<!DOCTYPE HTML>
<html lang="ko" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>TIL</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="custom.css">


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">TIL</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="about"><a class="header" href="#about">About</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="it"><a class="header" href="#it">IT</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="backlink01"><a class="header" href="#backlink01">backlink01</a></h1>
<p><code>하하하</code> 반가워요
<a href="it/./backlink02.html">링크</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="backlink02"><a class="header" href="#backlink02">backlink02</a></h1>
<p>ㅋㅋㅋ <a href="it/./backlink01.html">백링크</a> 걸기</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="infra"><a class="header" href="#infra">infra</a></h1>
<h2 id="특정-포트를-윈도우가-점유해서-쓸-수-없는-경우-해결법"><a class="header" href="#특정-포트를-윈도우가-점유해서-쓸-수-없는-경우-해결법">특정 포트를 윈도우가 점유해서 쓸 수 없는 경우 해결법</a></h2>
<p>윈도우가 일정 영역을 자기가 쓰기 위해 미리 예약해 두는데 가끔 8080이나 3000번을 예약해서 못 쓰게 되기도 한다.</p>
<h3 id="윈도우가-미리-예약해-놓은-포트들-확인"><a class="header" href="#윈도우가-미리-예약해-놓은-포트들-확인">윈도우가 미리 예약해 놓은 포트들 확인</a></h3>
<pre><code>netsh interface ipv4 show excludedportrange protocol=tcp
</code></pre>
<br/>
<h3 id="내가-쓸-포트는-목록에서-빼기"><a class="header" href="#내가-쓸-포트는-목록에서-빼기">내가 쓸 포트는 목록에서 빼기</a></h3>
<pre><code>netsh int ipv4 delete excludedportrange protocol=tcp startport=54022 numberofports=100
</code></pre>
<br/>
<h3 id="그냥-가장-쉬운-방법"><a class="header" href="#그냥-가장-쉬운-방법">그냥 가장 쉬운 방법</a></h3>
<pre><code class="language-shell">net stop winnat
net start winnat
</code></pre>
<p>출처: <a href="https://hiperzstudio.tistory.com/63" title="" target="_blank">https://hiperzstudio.tistory.com/63</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="docker"><a class="header" href="#docker">docker</a></h1>
<h2 id="podman-충돌"><a class="header" href="#podman-충돌">podman 충돌</a></h2>
<p><a href="docker/../podman/podman.html">podman</a> 이 실행 중이면 docker가 access denied가 났다면서 실행 안된다. docker 중지시키고 podman을 quit 하면 바로 제대로 실행된다.</p>
<p>이걸 모르고 docker를 초기화시킴. -.-;</p>
<p>초기화시킨 김에 <a href="docker/../podman/podman.html">podman</a>으로 완전히 옮겨가려 함.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="docker-환경설정"><a class="header" href="#docker-환경설정">docker 환경설정</a></h1>
<h2 id="여러-대의-서버를-하나의-네트워크에-놓고-서버마다-ip-정해줄-때postgresql"><a class="header" href="#여러-대의-서버를-하나의-네트워크에-놓고-서버마다-ip-정해줄-때postgresql">여러 대의 서버를 하나의 네트워크에 놓고 서버마다 IP 정해줄 때(postgresql)</a></h2>
<h3 id="네트워크-생성네트워크-이름-mynet"><a class="header" href="#네트워크-생성네트워크-이름-mynet">네트워크 생성(네트워크 이름: mynet)</a></h3>
<pre><code># docker network create --subnet=172.30.0.0/16 mynet 
</code></pre>
<h3 id="컨테이너-생성하면서-ip-주기"><a class="header" href="#컨테이너-생성하면서-ip-주기">컨테이너 생성하면서 ip 주기</a></h3>
<pre><code>docker run -d --net mynet --ip 172.30.0.7 --name postgres -p 43432:5432 -p 43022:22 -e POSTGRES_PASSWORD=My:s3Cr3t/ -e TZ=Asia/Seoul ubuntu/postgres:latest
</code></pre>
<h3 id="네트워크-생성없이-ip없이-컨테이너-생성할-때"><a class="header" href="#네트워크-생성없이-ip없이-컨테이너-생성할-때">네트워크 생성없이, IP없이 컨테이너 생성할 때</a></h3>
<pre><code>docker run -d --name postgres -p 43432:5432 -p 43022:22 -e POSTGRES_PASSWORD=My:s3Cr3t/ -e TZ=Asia/Seoul postgres
</code></pre>
<h2 id="webserver"><a class="header" href="#webserver">webserver</a></h2>
<pre><code>docker run -dit --net mynet --ip 172.30.0.5 --name httpd -p 41080:80 -p 41022:22 -e TZ=Asia/Seoul httpd
</code></pre>
<h2 id="tomcat"><a class="header" href="#tomcat">tomcat</a></h2>
<pre><code> docker run -dit --privileged --net mynet --ip 172.30.0.6 --name tomcat -p 42888:8080 -p 42022:22 -e TZ=Asia/Seoul tomcat:9.0
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="local-파일을-docker로-보내기"><a class="header" href="#local-파일을-docker로-보내기">local 파일을 docker로 보내기</a></h1>
<pre><code>docker cp . httpd:/usr/local/apache2/htdocs/js1
</code></pre>
<ul>
<li><code>.</code> : 현재 폴더의 모든 파일을</li>
<li><code>httpd:</code> : httpd 란 이름의 컨테이너에</li>
<li><code>/usr/local/apache2/htdocs/js1</code> : 폴더에<br />
복사한다.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="podman"><a class="header" href="#podman">podman</a></h1>
<ul>
<li>
<p>공식 홈페이지: <a href="https://podman.io/" title="" target="_blank">https://podman.io</a></p>
</li>
<li>
<p>윈도우에서 설치: <a href="https://github.com/containers/podman/blob/main/docs/tutorials/podman-for-windows.md" title="" target="_blank">https://github.com/containers/podman/blob/main/docs/tutorials/podman-for-windows.md</a></p>
</li>
</ul>
<h2 id="설치윈도우"><a class="header" href="#설치윈도우">설치(윈도우)</a></h2>
<p>cli를 꼭 설치해야 하나, 나는 데스크탑만 설치하고 싶은데.. 싶지만 위 공식 설치 안내문서가 cli를 기반으로 하고 있기 때문에, 그리고 윈도우만 설치해서는 뭔가 안되는 거 같기도 하다.</p>
<p>그래도 나는 한 번 CLI는 설치하지 않고 Podman Desktop만 설치해 보기로 하겠다. (tl;dr: desktop 사용 중에 CLI를 설치하라고 안내한다.)</p>
<p><img src="podman/img/20250507094834.png" alt="" /></p>
<p>처음 설치 후 실행하면 이렇게 나온다.</p>
<p><img src="podman/img/20250507094815.png" alt="" /></p>
<p>정보제공만 uncheck하고 [start onboarding] 버튼을 눌렀다.</p>
<p><img src="podman/img/20250507094944.png" alt="" /></p>
<p>음.. podman desktop을 실행했는데 podman이 없다니. [next]를 누르면</p>
<p><img src="podman/img/20250507095209.png" alt="" /></p>
<p>아.. 결국 podman 5.4.2를 설치하라고 한다. 아래 그림에서 알 수 있듯 이게 podman CLI임</p>
<p><img src="podman/img/20250507095435.png" alt="" /></p>
<p><img src="podman/img/20250507095643.png" alt="" /></p>
<p>이렇게 WSL2로 설치한다.</p>
<p><img src="podman/img/20250507102312.png" alt="" /></p>
<p>podman desktop을 실행하면 podman engine도 자동 실행한다는 옵션이 default로 설정되어 있다.</p>
<p><img src="podman/img/20250507102435.png" alt="" /></p>
<p>podman machine이 없다니.. 무슨 소리지. 일단 하나 만들러 가자.</p>
<p><img src="podman/img/20250507102532.png" alt="" /></p>
<p>뭔지 모르니 기본값으로 머신을 만들자. 꽤 시간이 걸린다.</p>
<p><img src="podman/img/20250507102804.png" alt="" /></p>
<pre><code>How to use podman
-----------------------------------------------------------------
Run podman help in the terminal for a list of commands to interact with Podman. 
For example, try the 'Create' button within the Containers tab of Podman Desktop and view your containers with podman:

$ podman ps
</code></pre>
<p>podman은 <code>windows terminal</code>을 설치해서 사용하길 원한다.</p>
<pre><code>winget install Microsoft.WindowsTerminal
</code></pre>
<p><img src="podman/img/20250507103013.png" alt="" /></p>
<pre><code>How to use kubectl
-----------------------------------------------------------------
Run kubectl help in the terminal for a list of commands to interact with your Kubernetes cluster. For example, try the 'Deploy to Kubernetes' button within Podman Desktop and view your pods with kubectl:

$ kubectl get pods
</code></pre>
<p><img src="podman/img/20250507103457.png" alt="" /></p>
<pre><code>How to use Compose
-----------------------------------------------------------------
Run podman compose up (podman CLI v4.7.0+) or docker-compose in a directory with a compose.yaml. Podman Desktop will automatically detect the Compose deployment and show it in the container list.'

$ podman compose up
</code></pre>
<p><img src="podman/img/20250507103604.png" alt="" /></p>
<p>설정이 다 끝나면 dashboard가 나타난다.</p>
<h2 id="이미지-다운로드-postgresql"><a class="header" href="#이미지-다운로드-postgresql">이미지 다운로드: postgresql</a></h2>
<p><img src="podman/img/20250507103759.png" alt="" /></p>
<p>왼쪽 메뉴에서 [Images] 를 선택한다.</p>
<p>[pull your first image] 버튼을 누르면 자동으로 이미지 하나를 다운로드 받아준다. 이미지 이름은 <code>quay.io/podman/hello</code> 이다. 시간이 꽤 걸린다.</p>
<p>이 이미지에 대한 정보는 <a href="https://quay.io/repository/podman/hello?tab=info" title="" target="_blank">https://quay.io/repository/podman/hello?tab=info</a>에서 볼 수 있다.</p>
<p><img src="podman/img/20250507104155.png" alt="" /></p>
<p>내 경우엔 이렇게 에러가 발생했다. 500에러다 따로 해결하지 않겠음. 이거 레드햇에 로그인해야 다운로드 되는 거 같다.</p>
<p>왼쪽 위에 “Search images…” 이 있는데 여기서 검색해도 아무것도 검색되지 않는다. 여기는 local 에 저장되어 있는 image를 검색하는 것이다.</p>
<p>이미지를 다운로드 하기 위해 오른쪽 위 보라색 [Pull] 버튼을 누른다.</p>
<p><img src="podman/img/20250507104621.png" alt="" /></p>
<p><img src="podman/img/20250507104651.png" alt="" /></p>
<p>검색어를 넣기만 하고 엔터는 치지 말자. 자동으로 pull image 버튼까지 눌리기 때문이다.</p>
<p>검색결과가 나오긴 했는데 도커 desktop과 달리 메타데이터 같은 설명이 없어 뭘 다운로드 받아야 할 지 알 수가 없다.</p>
<p>지금은 어디가서 봐야 상세 정보를 할지 알 수가 없다.</p>
<h2 id="docker와-충돌"><a class="header" href="#docker와-충돌">docker와 충돌</a></h2>
<p>podman 이 실행 중이면 <a href="podman/../docker/docker.html">docker</a>가 access denied가 났다면서 실행 안된다. docker 중지시키고 podman을 quit 하면 바로 제대로 실행된다. 아마 반대도 마찬가지지 않을까.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="docker-이미지를-podman에서-사용"><a class="header" href="#docker-이미지를-podman에서-사용">docker 이미지를 podman에서 사용</a></h1>
<h2 id="docker-이미지를-podman에서-사용하는-방법"><a class="header" href="#docker-이미지를-podman에서-사용하는-방법">docker 이미지를 podman에서 사용하는 방법</a></h2>
<ol>
<li>
<p>podman을 종료한다.</p>
</li>
<li>
<p>docker를 실행한다.</p>
</li>
<li>
<p>powershell에서 docker 이미지를 저장한다.</p>
<pre><code class="language-ps">docker save -o image.tar &lt;이미지이름:태그&gt;
</code></pre>
</li>
<li>
<p>image.tar 파일을 안전한 다른 곳(예: d:\podman)으로 이동한다.</p>
</li>
<li>
<p>파일을 이동한 곳(d:\podman)으로 cd 한다.</p>
</li>
<li>
<p>docker를 종료한다.</p>
</li>
<li>
<p>podman을 실행한다.</p>
</li>
<li>
<p>podman에서 이미지를 load한다.</p>
<pre><code class="language-ps">PS D:\podman&gt; podman load -i .\image.tar
</code></pre>
</li>
</ol>
<h2 id="podman에서-이미지-pull-할-수-없는-문제-해결"><a class="header" href="#podman에서-이미지-pull-할-수-없는-문제-해결">podman에서 이미지 pull 할 수 없는 문제 해결</a></h2>
<p>위와 같이 docker에서 이미지를 다운로드 받아 사용하려 헀던 이유는 이제보니 podman과 연결된 wsl에서 인터넷이 안되었기 때문이었음.</p>
<p>docker는 윈도우 자체에서 이미지를 다운로드 받는데, podman은 wsl에서 이미지를 다운로드 받는 형식인가봄.</p>
<p>그래서 podman과 연결된 vm에서 인터넷이 안되었기 때문에 pull image가 아예 안되었던 것. 권한 문제인줄 알고 github 등에 다 로그인 했으나 그 문제가 아니었음. 어쩐지 계속 io time out 이 나오더라.</p>
<p>해결방법은 <a href="podman/../wsl/wsl.html">여기</a>에.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="podman-컨테이너-등-삭제-안될-때"><a class="header" href="#podman-컨테이너-등-삭제-안될-때">podman 컨테이너 등 삭제 안될 때</a></h1>
<p>windows terminal에 탭이 여러 개 있다보니 wsl용 linux 탭을 열어서 그 안에서 podman run을 해 컨테이너를 하나 만들었다. 컨테이너 이름은 postgres 이다.</p>
<p>그런데 이렇게 만들어진 건 윈도우에서 실행되고 있는 podman desktop에서는 보이지 않는다.</p>
<p>CLI에서도 컨테이너가 확인이 안된다.</p>
<pre><code class="language-ps">PS E:\&gt; podman ps -a
CONTAINER ID  IMAGE       COMMAND     CREATED     STATUS      PORTS       NAMES
PS E:\&gt;
</code></pre>
<p>이 상태에서 같은 이름(postgres)으로 컨테이너를 생성하려 하면 에러가 난다.</p>
<pre><code class="language-ps">[user@DESKTOP-89UD3IQ e]$ podman run -d --net mynet --ip 172.31.0.7 --name postgres -p 43432:5432 -p 43022:22 -e POSTGRES_PASSWORD=My:s3Cr3t/ -e TZ=Asia/Seoul docker.io/library/postgres:latest
WARN[0000] Using cgroups-v1 which is deprecated in favor of cgroups-v2 with Podman v5 and will be removed in a future version. Set environment variable `PODMAN_IGNORE_CGROUPSV1_WARNING` to hide this warning.

Error: creating container storage: the container name "postgres" is already in use by f1823105fcf1f9a60dc80c83f009730d513ec996ca4eba2ef928066648030565. You have to remove that container to be able to reuse that name: that name is already in use, or use --replace to instruct Podman to do so.
[user@DESKTOP-89UD3IQ e]$
PS E:\&gt;
</code></pre>
<p>이걸 wsl 에서 똑같이 해보면,</p>
<pre><code class="language-ps">[user@DESKTOP-89UD3IQ ~]$ podman ps -a
WARN[0000] Using cgroups-v1 which is deprecated in favor of cgroups-v2 with Podman v5 and will be removed in a future version. Set environment variable `PODMAN_IGNORE_CGROUPSV1_WARNING` to hide this warning.
CONTAINER ID  IMAGE                              COMMAND     CREATED         STATUS                    PORTS                                           NAMES
f1823105fcf1  docker.io/library/postgres:latest  postgres    24 minutes ago  Exited (0) 292 years ago  0.0.0.0:43022-&gt;22/tcp, 0.0.0.0:43432-&gt;5432/tcp  postgres
</code></pre>
<p>이렇게 나온다. 이제 찾았으니 지울 수 있게 되었다.</p>
<p>모든 컨테이너를 다 중지하고,</p>
<pre><code class="language-ps">[user@DESKTOP-89UD3IQ ~]$ podman stop --all
WARN[0000] Using cgroups-v1 which is deprecated in favor of cgroups-v2 with Podman v5 and will be removed in a future version. Set environment variable `PODMAN_IGNORE_CGROUPSV1_WARNING` to hide this warning.
f1823105fcf1f9a60dc80c83f009730d513ec996ca4eba2ef928066648030565
[user@DESKTOP-89UD3IQ ~]$
</code></pre>
<p>모든 컨테이너를 다 삭제한다.</p>
<pre><code class="language-ps">[user@DESKTOP-89UD3IQ ~]$ podman rm --all
WARN[0000] Using cgroups-v1 which is deprecated in favor of cgroups-v2 with Podman v5 and will be removed in a future version. Set environment variable `PODMAN_IGNORE_CGROUPSV1_WARNING` to hide this warning.
f1823105fcf1f9a60dc80c83f009730d513ec996ca4eba2ef928066648030565
[user@DESKTOP-89UD3IQ ~]$
</code></pre>
<p>다시 확인해 보면,</p>
<pre><code class="language-ps">[user@DESKTOP-89UD3IQ ~]$ podman ps -a
WARN[0000] Using cgroups-v1 which is deprecated in favor of cgroups-v2 with Podman v5 and will be removed in a future version. Set environment variable `PODMAN_IGNORE_CGROUPSV1_WARNING` to hide this warning.
CONTAINER ID  IMAGE       COMMAND     CREATED     STATUS      PORTS       NAMES
[user@DESKTOP-89UD3IQ ~]$
</code></pre>
<p>깨끗해졌다. 이젠 wsl 들어가서 podman 명령 내리지 말아야지.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="postgresql-올린-컨테이너를-다른-컨테이너에서-사용"><a class="header" href="#postgresql-올린-컨테이너를-다른-컨테이너에서-사용">postgresql 올린 컨테이너를 다른 컨테이너에서 사용</a></h1>
<p>docker.io/library/rockylinux:9</p>
<p>docker.io/library/postgres:latest  (17 버전임)</p>
<p>이미지를 사용한 2개의 컨테이너가 돌고 있다.</p>
<p>두 컨테이너 사이에 일부러 네트워크 설정을 하거나 하지 않았다.</p>
<p>rockylinux 컨테이너에서 postgres 컨테이너의 ip로 5432번 포트로 접속하겠다 하면 접속이 된다.</p>
<p>이 postgresql 서버에 별 설정한 게 없다.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="wsl"><a class="header" href="#wsl">WSL</a></h1>
<h2 id="wsl-vm에서-인터넷이-안-된다"><a class="header" href="#wsl-vm에서-인터넷이-안-된다">WSL vm에서 인터넷이 안 된다.</a></h2>
<p><img src="wsl/img/20250508111049.png" alt="" /></p>
<p><img src="wsl/img/20250508111725.png" alt="" /></p>
<p>맨 아래 <code>hyper-v 확장 가능 가상 스위치</code>가 꺼져있다.</p>
<p>이걸 켜려고 하면</p>
<p><img src="wsl/img/20250508111911.png" alt="" /></p>
<p>가 나옴.</p>
<p>Hyper-V 확장 가능 가상 서비스를 켜려고 하는건데.</p>
<p>일단 여기까지만 보고 건드리지는 말고 다른 걸 해보자.</p>
<h3 id="문제-해결"><a class="header" href="#문제-해결">문제 해결</a></h3>
<p>다음 방법으로 해결함. 네트워크를 재설정하는 거임.</p>
<p>관리자 권한 명령 프롬프트에서,</p>
<pre><code class="language-ps">netsh interface ip reset
netsh winsock reset
</code></pre>
<p>재부팅하고 나니 인터넷 연결이 수동으로 바뀌어서 DHCP로 돌려줘야 했음</p>
<p>그리고 멀티 모니터의 위치 등 설정이 바뀌어 있었음.</p>
<p><img src="wsl/img/20250508114720.png" alt="" /></p>
<p>그런데 WSL VM에서 인터넷 잘 되는데 여전히 인터넷에 연결되어 있지 않다고 나옴.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="linux"><a class="header" href="#linux">linux</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="fedora"><a class="header" href="#fedora">fedora</a></h1>
<h2 id="패키지-관리"><a class="header" href="#패키지-관리">패키지 관리</a></h2>
<p>fedora는 debian 계열과 달리  apt-get을 쓰지 않고 dnf를 사용한다.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>APT 명령어</strong></th><th><strong>DNF 명령어</strong></th><th><strong>설명</strong></th></tr></thead><tbody>
<tr><td><code>apt-get install [패키지명]</code></td><td><code>dnf install [패키지명]</code></td><td>패키지 설치</td></tr>
<tr><td><code>apt-get update</code></td><td><code>dnf check-update</code></td><td>패키지 목록 업데이트 (DNF는 자동으로 캐시를 갱신하므로 자주 필요하지 않음)</td></tr>
<tr><td><code>apt-get upgrade</code></td><td><code>dnf upgrade</code></td><td>설치된 패키지 업그레이드</td></tr>
<tr><td><code>apt-get remove [패키지명]</code></td><td><code>dnf remove [패키지명]</code></td><td>패키지 제거</td></tr>
<tr><td><code>apt-get autoremove</code></td><td><code>dnf autoremove</code></td><td>더 이상 필요하지 않은 의존성 패키지 제거</td></tr>
<tr><td><code>apt-cache search [키워드]</code></td><td><code>dnf search [키워드]</code></td><td>패키지 검색</td></tr>
</tbody></table>
</div>
<p><strong>예시</strong>:</p>
<pre><code class="language-bash"># 패키지 설치
$ dnf install firefox

# 패키지 제거
$ dnf remove firefox

# 패키지 목록 업데이트
$ dnf check-update

# 시스템 업그레이드
$ dnf upgrade
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rockylinux"><a class="header" href="#rockylinux">rockylinux</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rockylinux-1"><a class="header" href="#rockylinux-1">rockylinux</a></h1>
<h2 id="podman에서-설치"><a class="header" href="#podman에서-설치">podman에서 설치</a></h2>
<h3 id="이미지는-rockylinux9로-검색해서-설치"><a class="header" href="#이미지는-rockylinux9로-검색해서-설치">이미지는 rockylinux:9로 검색해서 설치</a></h3>
<pre><code class="language-ps">PS C:\Users\test&gt; podman search rockylinux:9
NAME                                   DESCRIPTION
docker.io/rockylinux/rockylinux
docker.io/library/rockylinux           The official build of Rocky Linux.
docker.io/rockylinux/rocky-toolbox     Toolbox image for Rocky Linux - https://gith...
</code></pre>
<h3 id="pull-이미지"><a class="header" href="#pull-이미지">pull 이미지</a></h3>
<pre><code class="language-ps">PS C:\Users\test&gt; podman pull rockylinux:9
Trying to pull docker.io/library/rockylinux:9...
Getting image source signatures
Copying blob sha256:446f83f14b236772583d069e6f46a75e7e5456add656d1415a452618189fb825
Copying config sha256:9cc24f05f309508aa852967ab1e3b582b302afc92605c24ce27715c683acd805
Writing manifest to image destination
9cc24f05f309508aa852967ab1e3b582b302afc92605c24ce27715c683acd805
</code></pre>
<h3 id="포트설정"><a class="header" href="#포트설정">포트설정</a></h3>
<ul>
<li>23000:3000</li>
<li>20080:80</li>
<li>20443:443</li>
<li>25432:5432</li>
<li>20022:22</li>
</ul>
<h2 id="nodejs-설치"><a class="header" href="#nodejs-설치">node.js 설치</a></h2>
<p>podman에 이미지 설치해 사용한 후의 기록</p>
<h3 id="일단-업데이트한다"><a class="header" href="#일단-업데이트한다">일단 업데이트한다.</a></h3>
<pre><code class="language-bash">dnf update -y
</code></pre>
<h3 id="제공되는-nodejs-목록을-본다"><a class="header" href="#제공되는-nodejs-목록을-본다">제공되는 node.js 목록을 본다</a></h3>
<pre><code class="language-bash">[root@d8d8565ea203 /]# dnf module list nodejs
Last metadata expiration check: 0:01:55 ago on Sun Jun  8 11:24:17 2025.
AlmaLinux 9 - AppStream
Name                             Stream                           Profiles                                                        Summary                                    
nodejs                           18                               common [d], development, minimal, s2i                           Javascript runtime                         
nodejs                           20                               common [d], development, minimal, s2i                           Javascript runtime                         
nodejs                           22                               common [d], development, minimal, s2i                           Javascript runtime                         

Hint: [d]efault, [e]nabled, [x]disabled, [i]nstalled
[root@d8d8565ea203 /]# 
</code></pre>
<h3 id="22-버전을-사용하겠다고-표시한다"><a class="header" href="#22-버전을-사용하겠다고-표시한다">22 버전을 사용하겠다고 표시한다.</a></h3>
<pre><code class="language-bash">[root@d8d8565ea203 /]# dnf module -y enable nodejs:22
Last metadata expiration check: 0:03:01 ago on Sun Jun  8 11:24:17 2025.
Dependencies resolved.
=============================================================================================================================================================================
 Package                                  Architecture                            Version                                     Repository                                Size
=============================================================================================================================================================================
Enabling module streams:
 nodejs                                                                           22                                                                                        

Transaction Summary
=============================================================================================================================================================================

Complete!
[root@d8d8565ea203 /]# 
</code></pre>
<h3 id="22를-설치하겠다고-설정되었는지-확인한다"><a class="header" href="#22를-설치하겠다고-설정되었는지-확인한다">22를 설치하겠다고 설정되었는지 확인한다.</a></h3>
<pre><code class="language-bash">[root@d8d8565ea203 /]# dnf module list nodejs
Last metadata expiration check: 0:03:58 ago on Sun Jun  8 11:24:17 2025.
AlmaLinux 9 - AppStream
Name                             Stream                           Profiles                                                        Summary                                    
nodejs                           18                               common [d], development, minimal, s2i                           Javascript runtime                         
nodejs                           20                               common [d], development, minimal, s2i                           Javascript runtime                         
nodejs                           22 [e]                           common [d], development, minimal, s2i                           Javascript runtime                         

Hint: [d]efault, [e]nabled, [x]disabled, [i]nstalled
[root@d8d8565ea203 /]# 
</code></pre>
<p>22 버전 옆에 [e]라고 표시된 것을 볼 수 있다.</p>
<h3 id="이제-실제로-설치하자"><a class="header" href="#이제-실제로-설치하자">이제 실제로 설치하자.</a></h3>
<pre><code class="language-bash">[root@d8d8565ea203 /]# dnf -y install nodejs
Last metadata expiration check: 0:04:58 ago on Sun Jun  8 11:24:17 2025.
Dependencies resolved.
=============================================================================================================================================================================
 Package                                 Architecture                  Version                                                        Repository                        Size
=============================================================================================================================================================================
Installing:
 nodejs                                  x86_64                        1:22.16.0-1.module_el9.6.0+170+f035de78                        appstream                        1.9 M
Installing dependencies:
 libbrotli                               x86_64                        1.0.9-7.el9_5                                                  baseos                           312 k
 nodejs-libs                             x86_64                        1:22.16.0-1.module_el9.6.0+170+f035de78                        appstream                         21 M
Installing weak dependencies:
 nodejs-docs                             noarch                        1:22.16.0-1.module_el9.6.0+170+f035de78                        appstream                        8.8 M
 nodejs-full-i18n                        x86_64                        1:22.16.0-1.module_el9.6.0+170+f035de78                        appstream                        8.6 M

Transaction Summary
=============================================================================================================================================================================
Install  5 Packages

Total download size: 40 M
Installed size: 216 M
Downloading Packages:
(1/5): nodejs-22.16.0-1.module_el9.6.0+170+f035de78.x86_64.rpm                                                                               5.7 MB/s | 1.9 MB     00:00    
(2/5): nodejs-full-i18n-22.16.0-1.module_el9.6.0+170+f035de78.x86_64.rpm                                                                      17 MB/s | 8.6 MB     00:00    
(3/5): libbrotli-1.0.9-7.el9_5.x86_64.rpm                                                                                                    6.1 MB/s | 312 kB     00:00    
(4/5): nodejs-docs-22.16.0-1.module_el9.6.0+170+f035de78.noarch.rpm                                                                          9.8 MB/s | 8.8 MB     00:00    
(5/5): nodejs-libs-22.16.0-1.module_el9.6.0+170+f035de78.x86_64.rpm                                                                           15 MB/s |  21 MB     00:01    
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Total                                                                                                                                         13 MB/s |  40 MB     00:03     
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :                                                                                                                                                     1/1 
  Installing       : libbrotli-1.0.9-7.el9_5.x86_64                                                                                                                      1/5 
  Installing       : nodejs-libs-1:22.16.0-1.module_el9.6.0+170+f035de78.x86_64                                                                                          2/5 
  Installing       : nodejs-docs-1:22.16.0-1.module_el9.6.0+170+f035de78.noarch                                                                                          3/5 
  Installing       : nodejs-full-i18n-1:22.16.0-1.module_el9.6.0+170+f035de78.x86_64                                                                                     4/5 
  Installing       : nodejs-1:22.16.0-1.module_el9.6.0+170+f035de78.x86_64                                                                                               5/5 
  Running scriptlet: nodejs-1:22.16.0-1.module_el9.6.0+170+f035de78.x86_64                                                                                               5/5 
  Verifying        : nodejs-1:22.16.0-1.module_el9.6.0+170+f035de78.x86_64                                                                                               1/5 
  Verifying        : nodejs-docs-1:22.16.0-1.module_el9.6.0+170+f035de78.noarch                                                                                          2/5 
  Verifying        : nodejs-full-i18n-1:22.16.0-1.module_el9.6.0+170+f035de78.x86_64                                                                                     3/5 
  Verifying        : nodejs-libs-1:22.16.0-1.module_el9.6.0+170+f035de78.x86_64                                                                                          4/5 
  Verifying        : libbrotli-1.0.9-7.el9_5.x86_64                                                                                                                      5/5 

Installed:
  libbrotli-1.0.9-7.el9_5.x86_64                                                     nodejs-1:22.16.0-1.module_el9.6.0+170+f035de78.x86_64                                  
  nodejs-docs-1:22.16.0-1.module_el9.6.0+170+f035de78.noarch                         nodejs-full-i18n-1:22.16.0-1.module_el9.6.0+170+f035de78.x86_64                        
  nodejs-libs-1:22.16.0-1.module_el9.6.0+170+f035de78.x86_64                        

Complete!
[root@d8d8565ea203 /]# 
</code></pre>
<h3 id="설치한-다음에-버전-확인"><a class="header" href="#설치한-다음에-버전-확인">설치한 다음에 버전 확인</a></h3>
<pre><code class="language-bash">[root@d8d8565ea203 /]# node --version
v22.16.0
[root@d8d8565ea203 /]# npm -v
bash: npm: command not found
</code></pre>
<p>node.js는 잘 설치되었는데 npm이 설치가 안되어있다. ?</p>
<h3 id="npm도-설치하자"><a class="header" href="#npm도-설치하자">npm도 설치하자.</a></h3>
<pre><code class="language-bash">[root@d8d8565ea203 /]# yum install -y npm
Last metadata expiration check: 0:06:55 ago on Sun Jun  8 11:24:17 2025.
Dependencies resolved.
=============================================================================================================================================================================
 Package                     Architecture                   Version                                                                  Repository                         Size
=============================================================================================================================================================================
Installing:
 npm                         x86_64                         1:10.9.2-1.22.16.0.1.module_el9.6.0+170+f035de78                         appstream                         2.0 M

Transaction Summary
=============================================================================================================================================================================
Install  1 Package

Total download size: 2.0 M
Installed size: 9.3 M
Downloading Packages:
npm-10.9.2-1.22.16.0.1.module_el9.6.0+170+f035de78.x86_64.rpm                                                                                 13 MB/s | 2.0 MB     00:00    
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Total                                                                                                                                        2.3 MB/s | 2.0 MB     00:00     
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :                                                                                                                                                     1/1 
  Installing       : npm-1:10.9.2-1.22.16.0.1.module_el9.6.0+170+f035de78.x86_64                                                                                         1/1 
  Running scriptlet: npm-1:10.9.2-1.22.16.0.1.module_el9.6.0+170+f035de78.x86_64                                                                                         1/1 
  Verifying        : npm-1:10.9.2-1.22.16.0.1.module_el9.6.0+170+f035de78.x86_64                                                                                         1/1 

Installed:
  npm-1:10.9.2-1.22.16.0.1.module_el9.6.0+170+f035de78.x86_64                                                                                                                

Complete!
[root@d8d8565ea203 /]# 
</code></pre>
<h3 id="npm-버전도-확인"><a class="header" href="#npm-버전도-확인">npm 버전도 확인</a></h3>
<pre><code class="language-bash">[root@d8d8565ea203 /]# npm -v
10.9.2
</code></pre>
<h3 id="zip-unzip-설치"><a class="header" href="#zip-unzip-설치">zip unzip 설치</a></h3>
<pre><code class="language-bash">[root@8a9e08205a4d openclass]# dnf -y install zip unzip
Last metadata expiration check: 0:09:54 ago on Sun Jun  8 11:39:33 2025.
Dependencies resolved.
=============================================================================================================================================================================
 Package                                Architecture                            Version                                        Repository                               Size
=============================================================================================================================================================================
Installing:
 unzip                                  x86_64                                  6.0-58.el9_5                                   baseos                                  180 k
 zip                                    x86_64                                  3.0-35.el9                                     baseos                                  263 k

Transaction Summary
=============================================================================================================================================================================
Install  2 Packages

Total download size: 443 k
Installed size: 1.1 M
Downloading Packages:
(1/2): zip-3.0-35.el9.x86_64.rpm                                                                                                             2.5 MB/s | 263 kB     00:00    
(2/2): unzip-6.0-58.el9_5.x86_64.rpm                                                                                                         1.7 MB/s | 180 kB     00:00    
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Total                                                                                                                                        519 kB/s | 443 kB     00:00     
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :                                                                                                                                                     1/1 
  Installing       : unzip-6.0-58.el9_5.x86_64                                                                                                                           1/2 
  Installing       : zip-3.0-35.el9.x86_64                                                                                                                               2/2 
  Running scriptlet: zip-3.0-35.el9.x86_64                                                                                                                               2/2 
  Verifying        : unzip-6.0-58.el9_5.x86_64                                                                                                                           1/2 
  Verifying        : zip-3.0-35.el9.x86_64                                                                                                                               2/2 

Installed:
  unzip-6.0-58.el9_5.x86_64                                                               zip-3.0-35.el9.x86_64                                                              

Complete!
[root@8a9e08205a4d openclass]# 
</code></pre>
<h2 id="윈도우에서-파일-전송"><a class="header" href="#윈도우에서-파일-전송">윈도우에서 파일 전송</a></h2>
<p>podman cp 사용</p>
<p>먼저 linux에 디렉토리를 생성한다.</p>
<pre><code class="language-bash">[root@8a9e08205a4d ~]# mkdir dev
[root@8a9e08205a4d ~]# cd dev
[root@8a9e08205a4d dev]# mkdir openclass
[root@8a9e08205a4d dev]# cd openclass
[root@8a9e08205a4d openclass]# pwd
/root/dev/openclass
</code></pre>
<h3 id="윈도우에서-podman-컨테이너로-파일-보내기"><a class="header" href="#윈도우에서-podman-컨테이너로-파일-보내기">윈도우에서 podman 컨테이너로 파일 보내기</a></h3>
<pre><code class="language-ps">podman cp ./openclass-main.zip angry_cannon:/root/dev/openclass/
</code></pre>
<h3 id="압축풀기"><a class="header" href="#압축풀기">압축풀기</a></h3>
<pre><code class="language-bash">[root@8a9e08205a4d openclass]# unzip openclass-main.zip
</code></pre>
<h3 id="podman-컨테이너의-폴더를-윈도우로-보내기"><a class="header" href="#podman-컨테이너의-폴더를-윈도우로-보내기">podman 컨테이너의 폴더를 윈도우로 보내기</a></h3>
<pre><code class="language-ps">podman cp angry_cannon:/root/dev/openclass/ ./
</code></pre>
<h2 id="postgresql-17-설치"><a class="header" href="#postgresql-17-설치">postgresql 17 설치</a></h2>
<p>출처: https://www.postgresql.org/download/linux/redhat/</p>
<pre><code class="language-bash"># Install the repository RPM:
dnf install -y https://download.postgresql.org/pub/repos/yum/reporpms/EL-9-x86_64/pgdg-redhat-repo-latest.noarch.rpm

# Disable the built-in PostgreSQL module:
dnf -qy module disable postgresql

# Install PostgreSQL:
dnf install -y postgresql17-server

# Optionally initialize the database and enable automatic start:
/usr/pgsql-17/bin/postgresql-17-setup initdb
systemctl enable postgresql-17
systemctl start postgresql-17
</code></pre>
<p>여기서 <code>/usr/pgsql-17/bin/postgresql-17-setup initdb</code>과 <code>systemctl start postgresql-17</code>는 실패한다. 자기는 systemd 로 부팅한게 아니라나. 흠.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="podman-컨테이너에서-ssh-사용"><a class="header" href="#podman-컨테이너에서-ssh-사용">podman 컨테이너에서 ssh 사용</a></h1>
<p>사용 이미지: docker.io/library/rockylinux:9</p>
<p>이 이미지는 wsl에서 사용하는 특성상 systemd가 안된다. 그래서 약간 특별한 방식을 사용한다.</p>
<h2 id="설치"><a class="header" href="#설치">설치</a></h2>
<pre><code class="language-bash">[root@ab5b7b7ab2df /]# dnf install -y openssh-server
Last metadata expiration check: 0:18:57 ago on Mon Jun  9 14:26:13 2025.
Dependencies resolved.
=============================================================================================================================================================================
 Package                                       Architecture                          Version                                     Repository                             Size
=============================================================================================================================================================================
Installing:
 openssh-server                                x86_64                                8.7p1-45.el9                                baseos                                457 k

Transaction Summary
=============================================================================================================================================================================
Install  1 Package

Total download size: 457 k
Installed size: 1.0 M
Downloading Packages:
openssh-server-8.7p1-45.el9.x86_64.rpm                                                                                                       2.9 MB/s | 457 kB     00:00    
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Total                                                                                                                                        647 kB/s | 457 kB     00:00     
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :                                                                                                                                                     1/1 
  Running scriptlet: openssh-server-8.7p1-45.el9.x86_64                                                                                                                  1/1 
  Installing       : openssh-server-8.7p1-45.el9.x86_64                                                                                                                  1/1 
  Running scriptlet: openssh-server-8.7p1-45.el9.x86_64                                                                                                                  1/1 
Created symlink /etc/systemd/system/multi-user.target.wants/sshd.service → /usr/lib/systemd/system/sshd.service.

  Verifying        : openssh-server-8.7p1-45.el9.x86_64                                                                                                                  1/1 

Installed:
  openssh-server-8.7p1-45.el9.x86_64                                                                                                                                         

Complete!
</code></pre>
<h2 id="상태확인"><a class="header" href="#상태확인">상태확인</a></h2>
<pre><code class="language-bash">[root@ab5b7b7ab2df /]# systemctl status sshd
System has not been booted with systemd as init system (PID 1). Can't operate.
Failed to connect to bus: Host is down
</code></pre>
<p>실패한다. wsl의 systemd 관련 문제다.</p>
<h2 id="어쨋든-실행"><a class="header" href="#어쨋든-실행">어쨋든 실행</a></h2>
<p>먼저 키를 만들어주자.</p>
<pre><code class="language-bash">[root@ab5b7b7ab2df ~]# ssh-keygen -A
ssh-keygen: generating new host keys: RSA DSA ECDSA ED25519 
</code></pre>
<p>그리고 실행.</p>
<pre><code class="language-bash">[root@ab5b7b7ab2df ~]# /usr/sbin/sshd 
</code></pre>
<p>이제 22번 포트로 연결한 포트로 putty를 이용해 접속하면 된다.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="개발"><a class="header" href="#개발">개발</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="언어"><a class="header" href="#언어">언어</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rust"><a class="header" href="#rust">rust</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rust-구조체-출력"><a class="header" href="#rust-구조체-출력">rust 구조체 출력</a></h1>
<p>구조체 출력하려면 구조체 정의한 바로 위에</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[derive(Debug)]
<span class="boring">}</span></code></pre></pre>
<p>를 적어야 한다. 이건 모든 구조체 위에 적어야 한다.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>println!("user = {:?}", user);

user = User { active: false, username: "username", cdata: 1 }
<span class="boring">}</span></code></pre></pre>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>println!("user = {:#?}", user);

user = User {
    active: false,       
    username: "username",
    cdata: 1,
}
<span class="boring">}</span></code></pre></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rust-179--iced-0121-한글-폰트를-기본으로-설정하기"><a class="header" href="#rust-179--iced-0121-한글-폰트를-기본으로-설정하기">rust 1.79 + iced 0.12.1 한글 폰트를 기본으로 설정하기</a></h1>
<pre><pre class="playground"><code class="language-rust">use iced::{Settings, window};

fn main() -&gt; iced::Result
{
	let settings = Settings
	{
		window: window::Settings
		{
			size: iced::Size::new(500.0, 500.0),
			resizable: true,
			decorations: true,
			..Default::default()
		},
		default_font: Font::with_name("맑은 고딕"),
		..Default::default()
	};
	
	Editor::run(settings)
}</code></pre></pre>
<p>붙여넣기가 아닌 일일이 타이핑으로 적어서 틀린 데가 있을 수 있음.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rust-코드에-document-달기"><a class="header" href="#rust-코드에-document-달기">rust 코드에 document 달기</a></h1>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/**
 * 넓이를 구한다.
 * # Parameters
 * * `param1`: 첫번째 수
 * ```rust
 * let a = area(10, 10);
 * ```
 */
fn area(dimensions: (u32, u32)) -&gt; u32
{
    dimensions.0 * dimensions.1
}
<span class="boring">}</span></code></pre></pre>
<p>rust 는 자체적으로 document를 지원한다.
markdown 형식을 지원한다.
위와 같이 하면,</p>
<p><img src="dev/rust/img/20241201152559.png" alt="" /></p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/** 
 * 수학기능 trait
 */
pub trait Math 
{
    
    /// 더하기 함수
    /// 
    /// # Parameters
    /// * `d1`: 첫번째 수
    /// * `d2`: 두번째 수
    /// 
    /// # Return
    /// 두 수를 더한 값을 리턴한다.
    fn add(d1: i32, d2: i32) -&gt; i32;
}
<span class="boring">}</span></code></pre></pre>
<p><img src="dev/rust/img/20241201152610.png" alt="" /></p>
<p>와 같이 나온다.</p>
<pre><code class="language-shell">PS E:\test\rust\test02&gt; cargo doc --open
 Documenting test02 v1.0.0 (E:\test\rust\test02)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.91s
     Opening E:\test\rust\test02\target\doc\test02\index.html
</code></pre>
<p>위와 같이 <code>cargo doc --open</code>으로 문서를 만들 수 있다.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="visual-studio-code에서-rust-traits-한-번에-만들기-단축키-ctrl--"><a class="header" href="#visual-studio-code에서-rust-traits-한-번에-만들기-단축키-ctrl--">visual studio code에서 rust traits 한 번에 만들기 단축키: ctrl + .</a></h1>
<p><img src="dev/rust/img/20241201152645.png" alt="" /></p>
<p>brace 안에서 ctrl + . 을 하면 이렇게 나오는데 “implement missing members” 를 선택하면,</p>
<p><img src="dev/rust/img/20241201152654.png" alt="" /></p>
<p>이렇게 나온다. 와..</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rust-179--iced-0121-한글-나오게-하기"><a class="header" href="#rust-179--iced-0121-한글-나오게-하기">rust 1.79 + iced 0.12.1 한글 나오게 하기</a></h1>
<p><img src="dev/rust/img/20241201152716.png" alt="" /></p>
<p>코드에</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let title = text("한글 todos")
<span class="boring">}</span></code></pre></pre>
<p>라고 하면 맨 위에 처럼 한글이 제대로 나오지 않는다.</p>
<p>그 아래 <code>What needs to be done? </code> 라고 된 부분에 한글이 아무리 해도 입력조차 안되는데, 그러니까 한영키를 눌러도 그냥 영문으로만 입력이 되는데 다른 데서 한글을 쓰고 복사해서 붙여 넣으면 데이터가 추가되어 저렇게 한글로 제대로 보여진다. 모냐 이거. 하.</p>
<h2 id="일단-한글이-나오긴-한다-2024-6-29-1245"><a class="header" href="#일단-한글이-나오긴-한다-2024-6-29-1245">일단 한글이 나오긴 한다. 2024. 6. 29. 12:45</a></h2>
<p><img src="dev/rust/img/20241201152736.png" alt="" /></p>
<p><code>impl Sandbox for GroceryList</code> 안에서</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn view(&amp;self) -&gt; Element&lt;Self::Message&gt; {
		text("한글이 나오면 좋겠다.\nThis is where you will show the view of your app")
        .size(20)
        .font(Font::MONOSPACE)        
		.into()
<span class="boring">}</span></code></pre></pre>
<p>이제 custom font malgun.ttf를 쓰는 방법을 알아보자.</p>
<h2 id="맑은고딕-잘된다-맑은고딕은-windows-기본-글꼴"><a class="header" href="#맑은고딕-잘된다-맑은고딕은-windows-기본-글꼴">맑은고딕 잘된다. 맑은고딕은 windows 기본 글꼴.</a></h2>
<p><img src="dev/rust/img/20241201152750.png" alt="" /></p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn view(&amp;self) -&gt; Element&lt;Self::Message&gt; {
		text("한글이 나오면 좋겠다.\nThis is where you will show the view of your app")
        .size(20)
        //.font(Font::MONOSPACE)        
        //.font(Font::with_name("../fonts/malgun.ttf")) // 이건 안 됨.
        .font(Font::with_name("맑은 고딕"))
        //.font(Font::with_name("나눔고딕"))
        //.font(Font::with_name("휴먼편지체"))
        //.font(Font::with_name("Sandoll 미생"))        
		.into()
	}
<span class="boring">}</span></code></pre></pre>
<h2 id="나눔고딕-글꼴은-미리-설치되어-있어야-한다"><a class="header" href="#나눔고딕-글꼴은-미리-설치되어-있어야-한다">나눔고딕. 글꼴은 미리 설치되어 있어야 한다.</a></h2>
<p><img src="dev/rust/img/20241201152803.png" alt="" /></p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn view(&amp;self) -&gt; Element&lt;Self::Message&gt; {
		text("한글이 나오면 좋겠다.\nThis is where you will show the view of your app")
        .size(20)
        //.font(Font::MONOSPACE)        
        //.font(Font::with_name("../fonts/malgun.ttf")) // 이건 안 됨.
        //.font(Font::with_name("맑은 고딕"))
        .font(Font::with_name("나눔고딕"))
        //.font(Font::with_name("휴먼편지체"))
        //.font(Font::with_name("Sandoll 미생"))        
		.into()
	}
<span class="boring">}</span></code></pre></pre>
<p>나눔고딕도 잘 된다.
맑은 고딕이랑 비슷한데 맑은 고딕이 좀 더 세로로 길다.</p>
<h2 id="산돌미생체"><a class="header" href="#산돌미생체">산돌미생체</a></h2>
<p><img src="dev/rust/img/20241201152819.png" alt="" /></p>
<h2 id="휴먼편지체"><a class="header" href="#휴먼편지체">휴먼편지체</a></h2>
<p><img src="dev/rust/img/20241201152827.png" alt="" /></p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">main.rs 전문
</span>
use iced::{Element, Sandbox, Settings};
use iced::{Font};
use iced::widget::text;

struct GroceryList {}
#[derive(Debug, Clone)]
enum Message {}

impl Sandbox for GroceryList 
{
	type Message = Message;

    	
	/* Initialize your app */
	fn new() -&gt; GroceryList {
		Self {}
	}
	
	/**
	* The title of the window. It will show up on the top of your application window.
	*/
	fn title(&amp;self) -&gt; String {
		String::from("Grocery List App")
	}
	
	fn update(&amp;mut self, message: Self::Message) {
		// Update the state of your app
	}
	
	fn view(&amp;self) -&gt; Element&lt;Self::Message&gt; {
		text("한글이 나오면 좋겠다.\nThis is where you will show the view of your app")
        .size(20)
        //.font(Font::MONOSPACE)        
        //.font(Font::with_name("../fonts/malgun.ttf")) // 이건 안 됨.
        //.font(Font::with_name("맑은 고딕"))
        //.font(Font::with_name("나눔고딕"))
        .font(Font::with_name("휴먼편지체"))
        //.font(Font::with_name("Sandoll 미생"))        
		.into()
	}
}

fn main() -&gt; iced::Result 
{
	GroceryList::run(Settings::default())    
https://www.youtube.com/watch?v=epsLvcdXMr8&amp;list=PLZWdwSd12Q74o3ne0nUztVeUr9JDJIbSL&amp;index=6&amp;pp=iAQB}</code></pre></pre>
<p>아까 안되었던 todos example도 이 방법으로 하니까 잘 됨.</p>
<p><img src="dev/rust/img/20241201152844.png" alt="" /></p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn view(&amp;self) -&gt; Element&lt;Message&gt; {
        match self {
            Todos::Loading =&gt; loading_message(),
            Todos::Loaded(State {
                input_value,
                filter,
                tasks,
                ..
            }) =&gt; {
                let title = text("한글 todos")
                    .width(Length::Fill)
                    .size(100)
                    .font(Font::with_name("맑은 고딕"))
                    .color([0.5, 0.5, 0.5])
                    .horizontal_alignment(alignment::Horizontal::Center);
<span class="boring">}</span></code></pre></pre>
<p>todos example에서도</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let input = text_input("What needs to be done?", input_value)
                    .id(INPUT_ID.clone())
                    .on_input(Message::InputChanged)
                    .on_submit(Message::CreateTask)
                    .padding(15)
                    .font(Font::with_name("맑은 고딕"))
                    .size(30);
<span class="boring">}</span></code></pre></pre>
<p>이렇게 해도 저 “What needs to be done? 이라고 쓰인 입력창에 한글을 입력할 수가 없다. 한영 키를 눌러도 아무런 변화가 없다. 이건 자체적인 한글 입력 기능이 없는 듯하다.</p>
<p>이제 ttf 폰트를 읽어와서 쓰는 방법도 찾아봐야겠네.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rust에서-ffmpeg-개발하기"><a class="header" href="#rust에서-ffmpeg-개발하기">rust에서 ffmpeg 개발하기</a></h1>
<p>ffmpeg 개발할 때 몇몇 환경설정을 해야 한다.</p>
<ol>
<li>ffmpeg 설치.</li>
<li>ffmpeg 개발환경 라이브러리 설치</li>
<li>LLVM 설치</li>
</ol>
<h2 id="ffmpeg-설치"><a class="header" href="#ffmpeg-설치">ffmpeg 설치</a></h2>
<p>rust의 ffmpeg-next crate는 ffmpeg를 이용한다.
ffmpeg는 기본적으로 설치 프로그램을 제공하지 않는다.</p>
<p>https://ffmpeg.org/download.html 에서</p>
<p><img src="dev/rust/img/20241201152926.png" alt="" /></p>
<p>여기에서 둘 중 아무데나 들어가자. ffmpeg대신 빌드한 릴리즈를 공유하는 곳이다.
여기서 빌드된 바이너리를 받으면 된다.</p>
<p>압축을 풀고, 윈도우 환경설정의 path에 ffmpeg.exe 파일이 있는 폴더를 걸어준다.</p>
<h2 id="ffmpeg-개발환경-라이브러리-설치"><a class="header" href="#ffmpeg-개발환경-라이브러리-설치">ffmpeg 개발환경 라이브러리 설치</a></h2>
<p>ffmpeg-next crater는 ffmpeg 개발 라이브러리를 이용한다. 그래서 개발 라이브러리도 설치해야 한다.</p>
<p>vcpkg를 이용했다.</p>
<p><code>vcpkg install ffmpeg</code></p>
<h3 id="환경설정"><a class="header" href="#환경설정">환경설정</a></h3>
<p>시스템 환경 변수에</p>
<ul>
<li>path에 vcpkg의 packages\ffmpeg_x64-windows\bin 추가</li>
</ul>
<h2 id="llvm-설치"><a class="header" href="#llvm-설치">LLVM 설치</a></h2>
<p>cargo build하면 clang 설정이 안되었다고 에러가 난다. 이 문제는 LLVM을 설치해서 해결한다.
<code>vcpkg install llvm</code></p>
<p>ffmpeg는 LLVM을 이용해 빌드되기 때문이라 한다.</p>
<p>build 하는데 시간이 굉장히 오래 걸린다. 그래서인지 LLVM은 pre-compiled 를 제공한다.지금 거의 3시간동안 빌드하고 있는 거 같다.</p>
<h3 id="환경설정-1"><a class="header" href="#환경설정-1">환경설정</a></h3>
<p>시스템 환경 변수에</p>
<ul>
<li>LIBCLANG_PATH: vcpkg의 packages\llvm_x64-windows\tools\llvm</li>
<li>path에 vcpkg의 packages\llvm_x64-windows\tools\llvm  추가</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="winui3"><a class="header" href="#winui3">winui3</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="auto-를-반환하는-함수를-정의하기-전에-사용할-수-없다는-에러메시지가-나올-때"><a class="header" href="#auto-를-반환하는-함수를-정의하기-전에-사용할-수-없다는-에러메시지가-나올-때">auto 를 반환하는 함수를 정의하기 전에 사용할 수 없다는 에러메시지가 나올 때</a></h1>
<p>해당 클래스를 include 하지 않으면 auto 어쩌고 하는 에러가 나온다.<br />
하. 그냥 모르는 클래스라고 해.<br />
auto의 폐해.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="winui-3-패키징하지-않고-탐색기에서-exe-파일-실행하기"><a class="header" href="#winui-3-패키징하지-않고-탐색기에서-exe-파일-실행하기">winui 3 패키징하지 않고 탐색기에서 exe 파일 실행하기</a></h1>
<p>이거 보고 함.<br />
https://learn.microsoft.com/en-us/windows/apps/winui/winui3/create-your-first-winui3-app</p>
<ol>
<li>프로젝트를 만든다.</li>
</ol>
<p><img src="dev/winui3/img/20241201155210.png" alt="" /></p>
<p>이걸로 프로젝트 만들었음.</p>
<ol start="2">
<li>
<p>vcxproj 파일을 수정한다.
<code>&lt;PropertyGroup Label="Globals"&gt;</code> 안에
<code>&lt;WindowsPackageType&gt;None&lt;/WindowsPackageType&gt;</code>
을 추가한다.</p>
</li>
<li>
<p>vcxproj 파일을 수정한다.
<code>&lt;PropertyGroup Label="Globals"&gt;</code> 안에
<code>&lt;AppxPackage&gt;true&lt;/AppxPackage&gt;</code> 를
<code>&lt;AppxPackage&gt;false&lt;/AppxPackage&gt;</code>  로 수정한다.</p>
</li>
</ol>
<p>위 2, 3 번을 하고 나면 아래와 같다.</p>
<pre><code class="language-xml">&lt;PropertyGroup Label="Globals"&gt;
  &lt;CppWinRTOptimized&gt;true&lt;/CppWinRTOptimized&gt;
  &lt;CppWinRTRootNamespaceAutoMerge&gt;true&lt;/CppWinRTRootNamespaceAutoMerge&gt;
  &lt;MinimalCoreWin&gt;true&lt;/MinimalCoreWin&gt;
  &lt;ProjectGuid&gt;{1c4a0c28-b802-46ee-83ee-a35facb2c5d7}&lt;/ProjectGuid&gt;
  &lt;ProjectName&gt;winuitest&lt;/ProjectName&gt;
  &lt;RootNamespace&gt;winuitest&lt;/RootNamespace&gt;
  &lt;!--
    $(TargetName) should be same as $(RootNamespace) so that the produced binaries (.exe/.pri/etc.)
    have a name that matches the .winmd
  --&gt;
  &lt;TargetName&gt;$(RootNamespace)&lt;/TargetName&gt;
  &lt;DefaultLanguage&gt;ko-KR&lt;/DefaultLanguage&gt;
  &lt;MinimumVisualStudioVersion&gt;16.0&lt;/MinimumVisualStudioVersion&gt;
  &lt;AppContainerApplication&gt;false&lt;/AppContainerApplication&gt;
  &lt;AppxPackage&gt;false&lt;/AppxPackage&gt;
  &lt;ApplicationType&gt;Windows Store&lt;/ApplicationType&gt;
  &lt;ApplicationTypeRevision&gt;10.0&lt;/ApplicationTypeRevision&gt;
  &lt;WindowsTargetPlatformVersion&gt;10.0&lt;/WindowsTargetPlatformVersion&gt;
  &lt;WindowsTargetPlatformMinVersion&gt;10.0.17763.0&lt;/WindowsTargetPlatformMinVersion&gt;
  &lt;UseWinUI&gt;true&lt;/UseWinUI&gt;
  &lt;EnableMsixTooling&gt;true&lt;/EnableMsixTooling&gt;
  &lt;WindowsPackageType&gt;None&lt;/WindowsPackageType&gt;
&lt;/PropertyGroup&gt;
</code></pre>
<ol start="4">
<li>visual studio로 돌아오면</li>
</ol>
<p><img src="dev/winui3/img/20241201155226.png" alt="" /></p>
<p>이런 메시지가 나오는데 당연히 [모두 다시 로드]를 클릭한다.</p>
<ol start="5">
<li>build 하면</li>
</ol>
<p><img src="dev/winui3/img/20241201155234.png" alt="" /></p>
<p>E:\test\winuitest\x64\Debug\winuitest 안에 exe 파일이 생성된다.</p>
<p>실행하면</p>
<p><img src="dev/winui3/img/20241201155242.png" alt="" /></p>
<p>이런 메시지가 나온다. Windows App Runtime을 설치하라는 것.</p>
<p>[예]를 누르면</p>
<p>https://learn.microsoft.com/ko-kr/windows/apps/windows-app-sdk/downloads</p>
<p>창이 열린다.</p>
<p>여기서</p>
<p><img src="dev/winui3/img/20241201155252.png" alt="" /></p>
<p>저 다운로드 버튼을 눌러 실행하면 msix 패키징없이 탐색기에서 exe 파일을 더블클릭해 실행할 수 있게 된다.</p>
<p><img src="dev/winui3/img/20241201155300.png" alt="" /></p>
<p><img src="dev/winui3/img/20241201155309.png" alt="" /></p>
<p>탐색기에서 더블클릭해 실행된 winui 3 앱.</p>
<p>개발자 pc 가 아닌 다른 곳에서는 실행이 안될 수도 있는데 그때는 vcredist.exe 를 다운로드받아 실행하면 된다.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="python"><a class="header" href="#python">python</a></h1>
<h2 id="uv"><a class="header" href="#uv">uv</a></h2>
<ul>
<li>공식 홈페이지: <a href="https://github.com/astral-sh/uv" title="" target="_blank">https://github.com/astral-sh/uv</a></li>
<li>잘 정리한 글: <a href="https://www.0x00.kr/development/python/python-uv-simple-usage-and-example" title="" target="_blank">https://www.0x00.kr/development/python/python-uv-simple-usage-and-example</a></li>
</ul>
<h3 id="특징"><a class="header" href="#특징">특징</a></h3>
<ul>
<li>rust로 만들어 굉장히 빠름</li>
<li>패키지 관리자.</li>
<li>프로젝트 관리자</li>
<li>가상환경 관리자</li>
</ul>
<h3 id="가상환경"><a class="header" href="#가상환경">가상환경</a></h3>
<p>uv는 기본적으로 가상환경을 만들어준다. 프로젝트 생성(init)한다고 자동으로 가상환경을 만들어 주지는 않는데, <code>uv add &lt;package 이름&gt;</code>을 하면 자동으로 가상환경을 만들어 주고(.venv 폴더가 생긴다) 그 가상환경에 최신 버전의 파이썬을 설치해 준다. 굳이 <code>uv venv .venv</code> 하지 않아도 됨.</p>
<p>결국 프로젝트 하나마다 가상환경 하나씩 만드는 것. visual studio에서 사용하는 방법과 같다. 나는 이게 훨씬 편한 거 같다. 하드디스크는 많이 차지하지.</p>
<p>수동으로 가상환경 설정하는 방법있으나 굳이 여기 적지 않겠음.</p>
<h3 id="프로젝트-생성"><a class="header" href="#프로젝트-생성">프로젝트 생성</a></h3>
<pre><code>uv init &lt;프로젝트명&gt;
</code></pre>
<h3 id="프로그램-실행"><a class="header" href="#프로그램-실행">프로그램 실행</a></h3>
<pre><code>uv run &lt;python 파일명&gt;
</code></pre>
<br />
<h3 id="패키지-관리-1"><a class="header" href="#패키지-관리-1">패키지 관리</a></h3>
<h4 id="패키지-추가"><a class="header" href="#패키지-추가">패키지 추가</a></h4>
<pre><code>uv add &lt;패키지명&gt;
</code></pre>
<h4 id="실행형-패키지-실행"><a class="header" href="#실행형-패키지-실행">실행형 패키지 실행</a></h4>
<pre><code>uv run &lt;패키지명&gt;
</code></pre>
<h4 id="패키지-목록"><a class="header" href="#패키지-목록">패키지 목록</a></h4>
<pre><code>uv pip list
</code></pre>
<h4 id="uv-가상환경에-파이썬-특정-버전-설치"><a class="header" href="#uv-가상환경에-파이썬-특정-버전-설치">uv 가상환경에 파이썬 특정 버전 설치</a></h4>
<p>최신버전의 파이썬을 사용할 거면 자동으로 되니 굳이 할 필요없다.</p>
<pre><code>uv python install &lt;파이썬 버전&gt;
uv python install 3.13.3
</code></pre>
<h2 id="exe-파일로-만들기"><a class="header" href="#exe-파일로-만들기">exe 파일로 만들기</a></h2>
<p><code>PyInstaller</code>로 실행 파일 만들 수 있다.</p>
<pre><code>[pip]
pip install pyinstaller

[uv]
uv add pyinstaller
</code></pre>
<h3 id="실행파일-생성"><a class="header" href="#실행파일-생성">실행파일 생성</a></h3>
<pre><code>[pip로 설치한 경우]
pyinstaller --onefile &lt;python 파일명&gt;

[uv로 설치한 경우]
uv run pyinstaller --onefile &lt;python 파일명&gt;
</code></pre>
<ul>
<li><code>--onefile</code> 은 하나의 실행파일로 만들라는 옵션.</li>
<li>결과물은 <code>dist\</code> 디렉토리에 생성됨</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="게임"><a class="header" href="#게임">게임</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="o3de"><a class="header" href="#o3de">O3DE</a></h1>
<p>Open 3D Engine</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="o3de-설치하기"><a class="header" href="#o3de-설치하기">O3DE 설치하기</a></h1>
<h2 id="다운로드"><a class="header" href="#다운로드">다운로드</a></h2>
<p>url: https://o3de.org/download/</p>
<h2 id="최소-요구사항"><a class="header" href="#최소-요구사항">최소 요구사항</a></h2>
<p>O3DE requires Windows 10 64-bit (versions 1809, 10.0.17763 or later)</p>
<ul>
<li>2.5 GHz Intel or AMD processor with 4 or more physical cores</li>
<li>8 GB RAM</li>
<li>DirectX 12, Vulkan-compatible, or Metal-compatible video card with 2 GB VRAM minimum
<ul>
<li>NVIDIA GeForce GTX 1060 with driver version 471.11 or later</li>
<li>AMD Radeon Pro 560 or higher with latest drivers</li>
<li>Intel HD 630 or higher with latest drivers</li>
<li>Shader Model 6.2 (or Shader Model 6.3 to use raytracing features)</li>
<li>4 GB VRAM recommended</li>
</ul>
</li>
<li>40 to 100 GB of free disk space</li>
<li>1366 x 768 px screen resolution</li>
<li>(Recommended) Microsoft Visual Studio 2019 or 2022.</li>
<li>Visual Studio C++ Redistributable</li>
<li><strong>CMake 3.22.0 or later</strong></li>
</ul>
<h2 id="나의-설치-경험"><a class="header" href="#나의-설치-경험">나의 설치 경험</a></h2>
<p>https://github.com/o3de/o3de/issues/18376</p>
<p><img src="dev/game/O3DE/img/20241201150321.png" alt="" /></p>
<p>나도 정확히 위 URL의 글과 같은 현상이 나타났다.</p>
<h3 id="내가-했던-일"><a class="header" href="#내가-했던-일">내가 했던 일</a></h3>
<ul>
<li>
<p>Offline 버전이 아닌 웹에서 다운로드 받는 인스톨러를 다운로드 받아 설치</p>
<p><img src="dev/game/O3DE/img/20241201150334.png" alt="" /></p>
<p>저 에러 나타남.</p>
</li>
<li>
<p>위 이미지의 아래에 있는 offline 버전 다운로드받아 설치
여전히 저 에러 나타남.</p>
</li>
<li>
<p>보니까 맨 마지막의 CMake가 설치되어 있기는 한데 버전이 3.22보다 한참 낮음(정확히는 기억 안남)</p>
<ul>
<li>
<p>만약 CMake가 없다면 이렇게 보일 것.</p>
<p><img src="dev/game/O3DE/img/20241201150349.png" alt="" /></p>
</li>
</ul>
</li>
</ul>
<h3 id="문제-해결-1"><a class="header" href="#문제-해결-1">문제 해결</a></h3>
<ul>
<li>
<p>CMake 최신 버전으로 offline 버전 재설치</p>
<p><img src="dev/game/O3DE/img/20241201150407.png" alt="" /></p>
<p>여전히 저 에러 나타남</p>
</li>
<li>
<p>관리자 권한으로 offline 버전 재설치.</p>
<p>문제 해결</p>
<p><img src="dev/game/O3DE/img/20241201150416.png" alt="" /></p>
<h2 id="다른-컴퓨터에서"><a class="header" href="#다른-컴퓨터에서">다른 컴퓨터에서</a></h2>
<p>GONG 컴퓨터에서는 설치할 때 offline 버전 설치했지만 관리자 권한으로 설치하지 않았는데 한방에 잘 설치됨. 헐.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="godot4"><a class="header" href="#godot4">godot4</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="godot4-배경을-투명하게-하고-뒷면의-앱으로-마우스-통과시키기"><a class="header" href="#godot4-배경을-투명하게-하고-뒷면의-앱으로-마우스-통과시키기">Godot4 배경을 투명하게 하고 뒷면의 앱으로 마우스 통과시키기</a></h1>
<h2 id="개요"><a class="header" href="#개요">개요</a></h2>
<ul>
<li>버전: Godot 4.3</li>
<li>하고 싶은 거
<ul>
<li>게임의 배경을 투명하게 한다.</li>
<li>항상 맨 위에 올라온다.</li>
<li>일정 영역 외에는 마우스가 그 뒷면에 있는(배경이 투명하니 밑에 보이는) 앱을 마우스로 처리할 수 있도록 한다.</li>
</ul>
</li>
<li>예
<ul>
<li>https://www.youtube.com/watch?v=QGwaZ89vrzo
<img src="godot4/img/20250111153850.png" alt="" /><br />
<br>이렇게 어떤 프로그램을 띄어도 맨 위에 올라오고 배경이 투명하고, 바탕화면의 아이콘을 누르면 그 처리가 되고, 고양이를 클릭하면 고양이가 선택됨.</li>
</ul>
</li>
</ul>
<h2 id="튜토리얼"><a class="header" href="#튜토리얼">튜토리얼</a></h2>
<h3 id="프로젝트-생성-1"><a class="header" href="#프로젝트-생성-1">프로젝트 생성</a></h3>
<p><img src="godot4/img/20250111155620.png" alt="" /></p>
<p>렌더러를 “호환성“으로 한 거는 그냥 자원을 조금 쓰게 하기 위한 것. 꼭 호환성으로 해야 하는 건 아님.</p>
<h3 id="2d-노드-생성"><a class="header" href="#2d-노드-생성">2D 노드 생성</a></h3>
<p><img src="godot4/img/20250111155905.png" alt="" /></p>
<p>이 노드에 GD script를 붙인다. (node_2d.gd)</p>
<p>이 상태에서 scene을 저장하고 실행하면(그러니까 아무 것도 하지 않고 실행하는 경우) 다음 그림과 같이 나온다.</p>
<p><img src="godot4/img/20250111160154.png" alt="" /></p>
<h3 id="배경-투명하게"><a class="header" href="#배경-투명하게">배경 투명하게</a></h3>
<p><img src="godot4/img/20250111161626.png" alt="" /></p>
<p>프로젝트 설정창을 띄운 다음 검색어로 <code>trans</code>를 입력하고,</p>
<p>표시 &gt; 창 에서 위와 같이 크기/투명, 픽셀당 투명도/허용됨 을 모두 체크한다.</p>
<p>이 상태로 실행하면,</p>
<p><img src="godot4/img/20250111161827.png" alt="" /></p>
<p>이렇게 타이틀바가 나타나고 배경이 투명하게 된다.</p>
<p>하지만 이 상태에서는 뒷 배경을, 예를 들면 MuseScore Studio 4를 클릭할 수 없다.</p>
<p>우리 게임의 뒷 배경을 클릭하게 하는 방법은</p>
<p><code>Window.mouse_passthrough_polygon</code> 를 사용하는 거다.</p>
<p>저 속성에는 하나의 폴리곤을 넘겨줄 수 있다. 그럼 이 게임에서는 그 폴리곤의 영역만 마우스로 클릭할 수 있고, 그 외의 영역에서 발생한 마우스 이벤트는 그 뒤에 있는 앱으로 넘어간다. 그리고 그 폴리곤의 영역만 화면에 표시된다.</p>
<p>테스트를 위해 아이콘을 화면에 추가한다.</p>
<p><img src="godot4/img/20250111163018.png" alt="" /></p>
<p>이렇게 하고 실행하면</p>
<p><img src="godot4/img/20250111164156.png" alt="" /></p>
<p>이렇게 내가 추가한 건 제대로 보이고 그 외는 모두 투명하게 보이는 걸 알 수 있다. 훌륭하군. 이제 폴리곤을 넣어보자.</p>
<p><strong>node_2d.gd</strong> 파일</p>
<pre><code class="language-gdscript">func _ready() -&gt; void:
	# 다각형
	var polygon = [
		Vector2(100, 100),		
		Vector2(200, 100),
		Vector2(200, 200),
		Vector2(100, 200)
	]

	var window = get_viewport().get_window()	
	window.mouse_passthrough_polygon = polygon
</code></pre>
<p><img src="godot4/img/20250111163614.png" alt="" /></p>
<p>상황은 다음과 같다. 정확한 상황을 파악하기 위해 다음과 같이 한다.</p>
<p>좀전에 프로젝트 설정했던 것들을 다 원래대로 돌려 준다.</p>
<p><img src="godot4/img/20250111170044.png" alt="" /></p>
<p>그리고 스크립트 파일을 다음과 같이 맨 밑에 한 줄 추가한다.</p>
<p><strong>node_2d.gd</strong> 파일</p>
<pre><code class="language-gdscript">func _ready() -&gt; void:
	# 다각형
	var polygon = [
		Vector2(100, 100),		
		Vector2(200, 100),
		Vector2(200, 200),
		Vector2(100, 200)
	]

	var window = get_viewport().get_window()	
	window.mouse_passthrough_polygon = polygon

    window.transparent_bg = true    
</code></pre>
<p>그럼 아래와 같이 내가 만들어준 (100, 100) - (200, 200)의 정사각형 폴리곤이 검은 색으로 보이고, 딱 그 부분만 아이콘이 제대로 보이는 걸 알 수 있다.</p>
<p>(100, 100)인데 윗 부분이 더 길어 보이는데 싶은데, 그건 게임의 title bar의 높이 만큼 더 길어보이는 거다.</p>
<p><img src="godot4/img/20250111170241.png" alt="" /></p>
<p>정리하면, 위 이미지만큼이 원래 게임 앱의 크기인데, Window.mouse_passthrough_polygon에 넣어준 (100, 100) 크기의 폴리곤 만큼만 화면에 나타나고 게임 내에서 처리할 수 있는 클릭이 된다. 그 외의 영역은 뒷 부분이 보이고 뒷 부분의 앱에서 마우스로 클릭도 할 수 있다. 그래서 저 아이콘들을 눌러 실행할 수 있다.</p>
<p>만약 아래 글을 계속 볼 거면 현재 상태로 그냥 놔둔다.</p>
<p>그렇지 않고 바로 개발을 시작할 거면 다시 프로젝트 세팅 2개 설정하고 스크립트에 추가했던 맨 밑 한 줄을 지우자. 이 상태로 프로그램을 만들면 된다.</p>
<h2 id="여러-개의-폴리곤을-사용해야-하는-경우"><a class="header" href="#여러-개의-폴리곤을-사용해야-하는-경우">여러 개의 폴리곤을 사용해야 하는 경우</a></h2>
<p>Window.mouse_passthrough_polygon 에는 한 개의 폴리곤만 넣을 수 있다.</p>
<p>만약 2개의 폴리곤을 사용하고 싶으면 이걸 하나로 합쳐야 한다.</p>
<p>예를 들어,</p>
<p><img src="godot4/img/20250111173105.png" alt="" /></p>
<p>이렇게 2개의 폴리곤을 설정해 줘야 하는 경우, 생각없이 만들면,</p>
<p><img src="godot4/img/20250111174538.png" alt="" /></p>
<p>이런 식으로 된다. 그래서 이걸 제대로 만드는 방법을 설명하려 한다. 이 문제를 해결하려면</p>
<p><img src="godot4/img/20250111173331.png" alt="" /></p>
<p>이렇게 생긴 폴리곤으로 만들어야 위와 같이 이상한 모양이 나타나는 걸 막을 수 있다.</p>
<p>방법은,</p>
<pre><code class="language-gdscript">var polygon1 = [
		Vector2(200, 200),
        Vector2(100, 200),
        Vector2(100, 100),		
		Vector2(200, 100),
        Vector2(200, 200)
	]
</code></pre>
<p>와 같이 4각형이면 점을 5개해서, 연결되는 점인 (200, 200)이 시작점이자 끝점이 되도록 해야 한다.</p>
<pre><code class="language-gdscript">var polygon2 = [
		Vector2(400, 300),
        Vector2(500, 300),
        Vector2(500, 400),		
		Vector2(400, 400),
        Vector2(400, 300)
	]
</code></pre>
<p>과 같이 두 번째 폴리곤도 연결되어야 하는 점인 (400, 300)이 시작점이자 끝점이 되도록 만든다.</p>
<p>연결되는 점 선정 기준: 두 폴리곤 사이를 가장 가깝게 연결하는 두 점</p>
<p>그리고 연결하는 선을 정의한다.</p>
<pre><code class="language-gdscript">var polygon_br = [
		Vector2(200, 200),        
        Vector2(400, 300)
	]
</code></pre>
<p>이제 새로운 폴리곤을 만들고 첫 번째 폴리곤, 브릿지, 두 번째 폴리곤 순서로 추가한다.</p>
<pre><code>var polygon = []
polygon.append_array(polygon1)
polygon.append_array(polygon_br)
polygon.append_array(polygon2)

window.mouse_passthrough_polygon = polygon
</code></pre>
<p>이렇게 해주면 된다.</p>
<p>전체 코드</p>
<pre><code class="language-gdscript">func _ready() -&gt; void:
	# 다각
	var polygon1 = [
		Vector2(200, 200),
		Vector2(100, 200),
		Vector2(100, 100),		
		Vector2(200, 100),
		Vector2(200, 200)
	]
	
	var polygon2 = [
		Vector2(400, 300),
		Vector2(500, 300),
		Vector2(500, 400),		
		Vector2(400, 400),
		Vector2(400, 300)
	]
	
	var polygon_br = [
		Vector2(200, 200),        
		Vector2(400, 300)
	]
	
	var polygon = []
	polygon.append_array(polygon1)
	polygon.append_array(polygon_br)
	polygon.append_array(polygon2)
	
	var window = get_viewport().get_window()	
	window.mouse_passthrough_polygon = polygon
	
	window.transparent_bg = true
</code></pre>
<p><img src="godot4/img/20250111174309.png" alt="" /></p>
<p>중간 브릿지는 안 보인다.</p>
<h2 id="게임-앱을-제일-위에"><a class="header" href="#게임-앱을-제일-위에">게임 앱을 제일 위에</a></h2>
<p>아무래도 투명하게 보여서 밑에 있는 앱을 마우스로 클릭할 수 있다보니 그렇게 하면 이 앱이 다른 앱의 밑으로 내려가 버린다. 그러니 게임 앱을 always on top으로 설정해 줘야 한다.</p>
<p><img src="godot4/img/20250111180447.png" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="웹개발-시-url-param-가져오기"><a class="header" href="#웹개발-시-url-param-가져오기">웹개발 시 url param 가져오기</a></h1>
<pre><code class="language-gdscript">func _ready() -&gt; void:
	var a = JavaScriptBridge.eval("const urlParams = new URL(location.href).searchParams; const a = urlParams.get('a'); a")
	print("a=", a)
</code></pre>
<p>이렇게 하면 gdscript의 변수 a에</p>
<p><code>http://localhost:8060/tmp_js_export.html?a=105</code></p>
<p>와 같이 url을 적어줬을 때 url에 적은 파라마티 a의 값이 들어간다.</p>
<p><img src="godot4/img/20250125202732.png" alt="" /></p>
<p>이렇게 실행하면 되고, 웹 브라우저가 자동으로 실행되는데</p>
<p><code>http://localhost:8060/tmp_js_export.html?a=105</code></p>
<p>과 같이 하면 a 값으로 105가 찍힌다.</p>
<p><img src="godot4/img/20250125202908.png" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="git"><a class="header" href="#git">git</a></h1>
<h2 id="새-프로젝트-n을-만들면서-기존-프로젝트-o를-n-아래에-두고-싶을-때"><a class="header" href="#새-프로젝트-n을-만들면서-기존-프로젝트-o를-n-아래에-두고-싶을-때">새 프로젝트 N을 만들면서 기존 프로젝트 O를 N 아래에 두고 싶을 때</a></h2>
<h3 id="o-프로젝트를-submodule로-선언"><a class="header" href="#o-프로젝트를-submodule로-선언">O 프로젝트를 submodule로 선언</a></h3>
<p>submodule 기능을 사용하면 된다.</p>
<pre><code class="language-ps">N 프로젝트 루트 &gt; git submodule add &lt;프로젝트 O Git URL&gt; &lt;O를 위한 폴더 이름&gt;
</code></pre>
<p>예를 들면</p>
<pre><code class="language-ps">N 프로젝트 루트 &gt; git submodule add https://github.com/stuo/nextauth001.git nextauth001
</code></pre>
<p>N 프로젝트의 루트에 .gitmodules 파일 생성된다.</p>
<pre><code>[submodule "nextauth001"]
	path = nextauth001
	url = https://github.com/stuo/nextauth001.git
</code></pre>
<p>이제 commit 하면 됨.</p>
<br />
<h3 id="n--o-폴더에서만-수정하고-n-폴더의-루트에서-커밋하면-n에만-반영될까-o에만-반영될까-n과-o-모두-반영될까"><a class="header" href="#n--o-폴더에서만-수정하고-n-폴더의-루트에서-커밋하면-n에만-반영될까-o에만-반영될까-n과-o-모두-반영될까">N / O 폴더에서만 수정하고 N 폴더의 루트에서 커밋하면 N에만 반영될까 O에만 반영될까 N과 O 모두 반영될까.</a></h3>
<p>이걸 알아야 submodule을 정확하게 이해하는 거임.</p>
<p>정답: <strong>O 프로젝트의 변경사항은 O 프로젝트에만 반영</strong>되기 때문</p>
<p>submodule은 O 프로젝트의 특정 커밋을 참조만 하는 거임. N 프로젝트에서 <code>git status</code>를 해도 O 프로젝트의 변경사항이 있다고 나타나지만</p>
<p><code>git add</code>를 해도</p>
<pre><code class="language-PS">PS E:\stuo\nextjstest&gt; git status
On branch main
Your branch is up to date with 'origin/main'.

Changes not staged for commit:
  (use "git add &lt;file&gt;..." to update what will be committed)
  (use "git restore &lt;file&gt;..." to discard changes in working directory)
  (commit or discard the untracked or modified content in submodules)
        modified:   nextauth001 (modified content)

no changes added to commit (use "git add" and/or "git commit -a")
</code></pre>
<p><img src="dev/git/img/20250511134112.png" alt="" /></p>
<p>vscode git extension에는 이렇게 2개의 commit 버튼이 나타난다. 위가 N 프로젝트, 아래가 O 프로젝트다.</p>
<p>여기서 위에 있는 N 프로젝트에 뭔가 내용을 넣고 커밋해도</p>
<p><img src="dev/git/img/20250511134217.png" alt="" /></p>
<p>이렇게 에러난다.</p>
<h2 id="console에서-o-프로젝트-커밋"><a class="header" href="#console에서-o-프로젝트-커밋">console에서 O 프로젝트 커밋</a></h2>
<p>O 프로젝트의 루트 폴더로 가서 <code>git add .</code> 을 하고, <code>git status</code> 해 보면 잘 들어가 있는 걸 확인할 수 있다.</p>
<p>결국 각각 돌아가는 프로젝트 라는 걸 알 수 있다.</p>
<p><img src="dev/git/img/20250511135332.png" alt="" /></p>
<p>github에서 보면, N 프로젝트에 O 프로젝트가 이렇게 파란색으로 표시되고 클릭하면 O 프로젝트 repository로 이동한다.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="window-11-arm64에서-git-auth-창이-투명하게-보인다"><a class="header" href="#window-11-arm64에서-git-auth-창이-투명하게-보인다">window 11 arm64에서 git auth 창이 투명하게 보인다.</a></h1>
<p><img src="dev/git/img/20241201144214.png" alt="" /></p>
<p>가운데 있는 투명한 네모가 git auth창인데, 투명하게만 보이고 안에 내용이 보이질 않는다.</p>
<p>이 상태인데도 투명한 부분 중 버튼 부분을 클릭하면 실제 그 버튼을 누른 것처럼 동작한다. 하하.</p>
<p><a href="https://github.com/git-ecosystem/git-credential-manager/issues/1539" title="" target="_blank">https://github.com/git-ecosystem/git-credential-manager/issues/1539</a></p>
<p>나랑 같은 걸 말한 사람이 있다.</p>
<pre><code>git config --global credential.guiSoftwareRendering true
</code></pre>
<p>이렇게 하면 된단다. 소프트웨어적으로 렌더링하라는 뜻인듯.
해 보니 정말 된다. 와.</p>
<p><img src="dev/git/img/20241201144243.png" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="github-private-repository에-git-bash에서-접속하기"><a class="header" href="#github-private-repository에-git-bash에서-접속하기">github private repository에 git bash에서 접속하기</a></h1>
<p>git bash에서는 github와 통신할 일이 있을 때 로그인이 필요하면 자동으로 로그인 화면을 띄여준다 함.</p>
<p>그런데 나는 그런 화면이 나오질 않음.</p>
<pre><code class="language-shell">$ git pull
remote: Repository not found.
fatal: repository 'https://github.com/userID/project.git/' not found
</code></pre>
<p>이런 식이다.</p>
<p>그래서 아래와 같이 해 보았다.</p>
<p>제어판 &gt; 사용자 계정 &gt; 자격 증명 관리자 &gt; Windows 자격 증명 &gt; 일반 자격 증명
에서 github가 들어간 모든 아이템 삭제</p>
<p>그랬더니 로그인 창이 나왔다.</p>
<p><img src="dev/git/img/20241201144530.png" alt="" /></p>
<p>browser를 이용한 로그인을 했다.</p>
<p>아.. 그런데 select user인가 하는 창이 아니라 로그인을 하라는 창이 나온다. 이건 또 내가 원하는 건 아닌데.. 나는 아이디 목록이 쭉 나오고 그 중 하나를 선택하는 걸 하고 싶다. 암튼.</p>
<p>그랬더니 다시<br />
<img src="dev/git/img/20241201144543.png" alt="" /></p>
<p>이렇게 일반 자격 증명에 하나가 추가되었다.</p>
<p>그리고 git pull을 해 보았더니</p>
<pre><code class="language-shell">$ git pull origin
fatal: unable to connect to cache daemon: Unknown error
Already up to date.
</code></pre>
<p>이렇게 fatal error가 나왔다.</p>
<p>이건 아무래도</p>
<pre><code class="language-shell">git config --global credential.helper cache
</code></pre>
<p>로 설정해 놔서 생긴 문제인거 같았다. 그래서</p>
<pre><code class="language-shell">git config --global credential.helper store
</code></pre>
<p>로 해주었다. 그랬더니</p>
<pre><code class="language-shell">$ git pull
Already up to date.
</code></pre>
<p>이 에러는 없어졌다.</p>
<p>다른 아이디에서 clone한 곳에 가서 git pull을 해 보았다. 그랬더니</p>
<p><img src="dev/git/img/20241201144556.png" alt="" /></p>
<p>이 창이 또 나온다.</p>
<p>아까 아이디로 github 로그인하고 열어놨던 브라우저를 닫고 방금 전 git pull을 한 아이디로 새로 브라우저를 열고 로그인했다.</p>
<p><img src="dev/git/img/20241201144607.png" alt="" /></p>
<p>이렇게 로그인에 또 성공했다.</p>
<p>그리고 다시 windows 자격 증명을 확인해 봤더니</p>
<p><img src="dev/git/img/20241201144619.png" alt="" /></p>
<p>이렇게 하나가 추가되었다. 위 그림에서 밑에가 새로 추가된 거다.</p>
<p>좀전에 추가될 때는 아이디가 따로 나오지 않았는데 방금 전 추가될 때는 id@github.com 식으로 추가되었다.</p>
<p>이 상태에서 다시 아까 아이디로 clone 한 local directory로 가서 git pull 해 보았다.</p>
<p><img src="dev/git/img/20241201144633.png" alt="" /></p>
<p>헐 드디어 내가 원하던 select an account가 나왔다.</p>
<p>진짜 몇달동안 고민하던 문제가 해결되었다.</p>
<p>그런데 이렇게 해 놓고 보니까 굳이 includeif 를 할 필요가 없는 거였네.어차피 select an account가 나와서 그 중 하나를 고를텐데…</p>
<p>.. 라고 쓰고 좀 사용하다 보니 이게 아니다.</p>
<pre><code>$ git commit -m "update"
Author identity unknown

*** Please tell me who you are.

Run

  git config --global user.email "you@example.com"
  git config --global user.name "Your Name"

to set your account's default identity.
Omit --global to set the identity only in this repository.

fatal: unable to auto-detect email address (got 'eugene@DESKTOP-seersssQ.(none)')
</code></pre>
<p>라는 에러가 났다.</p>
<p>바로 includeif 해서 해결함.</p>
<p>– 추가 (2024. 9. 15.) –</p>
<p>여기부터
제어판 자격증명에서 github 관련된 자격증명을 지운 후에 github 로그인 창이 나오게 하려면</p>
<p><code>C:/Program Files/Git/etc/gitconfig</code> 파일에서 아래와 같은 설정이 있어야 하는 거 같다.</p>
<pre><code>[credential]
	helper = C:/Program\\ Files\\ \\(x86\\)/Git\\ Credential\\ Manager/git-credential-manager.exe	
</code></pre>
<p>여기까지 다 잘못되었음. 저렇게 하지 않아도 github 로그인 창이 나온다.</p>
<p>이렇게 자격증명이 되어야 여러 개의 아이디를 사용할 수 있나 보다.<br />
<img src="dev/git/img/20241201144656.png" alt="" /></p>
<br/>
<br/>
<p>– <strong>추가(2024. 10. 5.). 최종 해결</strong> –</p>
<p>제어판 자격증명에 github 관련 자격증명이</p>
<p>git:https://github.com</p>
<p>하나만 있을거다.  [일반 자격 증명 추가] 버튼을 눌러 하나를 더 추가한다.</p>
<ul>
<li>인터넷 또는 네트워크 주소 : git:https://ID@github.com</li>
<li>사용자 이름: 아무거나</li>
<li>암호: 아무거나</li>
</ul>
<p>일단 저렇게 인터넷 또는 네트워크 주소 를 넣어 놓은다. ID는 저렇게 그냥 ID라고만 하면 된다.</p>
<p>git:https://github.com
외에 또 다른 일반 자격 증명이 있기만 하면 된다.</p>
<p>그리고 다시 안 되던 private repository에 가서 git pull 해 보면</p>
<p><img src="dev/git/img/20241201144801.png" alt="" /></p>
<p>이 창이 나올텐데, 이 때 [Add a new account] 를 선택해서 새로운 git ID를 추가하면 된다. 드디어 해결.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="gitconfig-파일의-내용을-전부-다-지워도-git-config-list-하면-뭔가-정보가-남아있다"><a class="header" href="#gitconfig-파일의-내용을-전부-다-지워도-git-config-list-하면-뭔가-정보가-남아있다">.gitconfig 파일의 내용을 전부 다 지워도 git config –list 하면 뭔가 정보가 남아있다.</a></h1>
<p>git은 3가지 범위가 있다.</p>
<ul>
<li>local</li>
<li>global</li>
<li>system</li>
</ul>
<p>우리가 .gitconfig 파일을 수정하면 이 중 global이 수정되는거다.</p>
<p>system의 영역에 있는 값을 수정하려면</p>
<pre><code>C:\Users\eugene&gt; git config --system --unset credential.helper
</code></pre>
<p>이라고 해야 한다. 그런데 저렇게 하면 아래와 같은 메시지가 나온다.</p>
<pre><code>C:\Users\eugene&gt; git config --system --unset credential.helper
error: could not lock config file C:/Program Files/Git/etc/gitconfig: Permission denied
</code></pre>
<p><code>C:/Program Files/Git/etc/gitconfig</code> 에 global 보다 더 높은 수준인 system의 설정이 담겨 있었다. 열어 보니 내용도 많다.</p>
<pre><code>[diff "astextplain"]
	textconv = astextplain
[filter "lfs"]
	clean = git-lfs clean -- %f
	smudge = git-lfs smudge -- %f
	process = git-lfs filter-process
	required = true
[http]
	sslBackend = openssl
	sslCAInfo = C:/Program Files/Git/mingw64/etc/ssl/certs/ca-bundle.crt
[core]
	autocrlf = true
	fscache = true
	symlinks = false
[pull]
	rebase = false
[credential]
	helper = manager
	helper = 
	helper = C:/Program\\ Files\\ \\(x86\\)/Git\\ Credential\\ Manager/git-credential-manager.exe
[credential "https://dev.azure.com"]
	useHttpPath = true
[init]
	defaultBranch = master
</code></pre>
<p>여기서 보고 불필요한 내용은 다 지워주자.</p>
<p>나는 credential.helper은 다 지워버렸다. 이 파일을 수정하려면 관리자 권한으로 열어야 한다.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="git-한글-파일명이-숫자처럼-보이는-경우-해결"><a class="header" href="#git-한글-파일명이-숫자처럼-보이는-경우-해결">git 한글 파일명이 숫자처럼 보이는 경우 해결</a></h1>
<p>git config –global core.quotepath false</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tag"><a class="header" href="#tag">tag</a></h1>
<h2 id="태그-목록-보기"><a class="header" href="#태그-목록-보기">태그 목록 보기</a></h2>
<pre><code>git tag
</code></pre>
<h2 id="태그-걸기"><a class="header" href="#태그-걸기">태그 걸기</a></h2>
<pre><code>git tag v1.0.0
</code></pre>
<h2 id="태그를-포함해서-push하기"><a class="header" href="#태그를-포함해서-push하기">태그를 포함해서 push하기</a></h2>
<p>그냥 push하면 태그없이 올라간다.<br />
모든 태그를 포함해서 올리려면</p>
<pre><code>git push origin --tags
</code></pre>
<p>만약 특정 태그만 올리려면</p>
<pre><code>git push origin v1.0.0
</code></pre>
<p>참조: https://minsone.github.io/git/git-addtion-and-modified-delete-tag</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="특정파일이-등장한-시점-알아내기"><a class="header" href="#특정파일이-등장한-시점-알아내기">특정파일이 등장한 시점 알아내기</a></h1>
<h2 id="특정파일-관련-로그-모두-찾아내기"><a class="header" href="#특정파일-관련-로그-모두-찾아내기">특정파일 관련 로그 모두 찾아내기</a></h2>
<pre><code class="language-ps">PS E:\test\allflix&gt; git log -- "gra\Screenshot_20250531_183027_One UI Home.jpg"
commit 32c39xx
Author: sobi &lt;sobi@xxx.com&gt;
Date:   Sat May 31 23:21:19 2025 +0900

    update
PS E:\test\allflix&gt;
</code></pre>
<p>repository 루트에서 <code>git log &lt;파일경로&gt;</code> 실행
혹은 해당 파일이 있는 곳에서 <code>git log &lt;파일명&gt;</code> 실행</p>
<p>그 파일 관련 로그를 날짜순으로 볼 수 있다. 최신 파일이 맨 위에, 맨 밑이 그 파일이 등장한 시점.</p>
<h2 id="특정파일이-등장하는-최초-로그-빨리-찾아내기"><a class="header" href="#특정파일이-등장하는-최초-로그-빨리-찾아내기">특정파일이 등장하는 최초 로그 빨리 찾아내기</a></h2>
<pre><code class="language-ps">PS E:\test\allflix&gt; git log --reverse "gra\Screenshot_20250531_183027_One UI Home.jpg"
commit 32c39xx
Author: sobi &lt;sobi@xxx.com&gt;
Date:   Sat May 31 23:21:19 2025 +0900

    update
PS E:\test\allflix&gt;
</code></pre>
<p>repository 루트에서 <code>git log --reverse &lt;파일경로&gt;</code> 실행</p>
<p>혹은 해당 파일이 있는 곳에서 <code>git log --reverse &lt;파일명&gt;</code> 실행</p>
<p>그 파일 관련 로그를 날짜순으로 볼 수 있다. 맨 위가 해당 파일이 등장한 시점, 맨 아래가 가장 최신 commit이다.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="특정-시점-이전으로-돌아가기"><a class="header" href="#특정-시점-이전으로-돌아가기">특정 시점 이전으로 돌아가기</a></h1>
<p>참조: https://g.co/gemini/share/bd7d5a73ee6d</p>
<p>특정 시점(fedcba9) 으로 돌아가려면,</p>
<pre><code class="language-ps">git reset --hard fedcba9
</code></pre>
<p>그리고 github에 push하는데 그냥은 안되고 –force를 해야 한다.</p>
<pre><code class="language-ps">git push origin --force --all
</code></pre>
<p>어떤 파일이 처음 등장한 시점으로 돌아가려면 그 시점을 알아야 한다. <a href="dev/git/./00006.html">참조</a></p>
<p>어떤 파일이 처음 등장한 시점 이전으로 돌아가려면 <code>git log</code>로 순서상에서 찾아내야 한다.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="git-update-후-특정-아이디로-고정됨"><a class="header" href="#git-update-후-특정-아이디로-고정됨">git update 후 특정 아이디로 고정됨</a></h1>
<p>여러 개의 git 아이디를 사용하는 상황.</p>
<p>.gitconfig나 다른 파일들이 모두 아무런 문제 없는데, 폴더마다 특정 아이디를 사용하게끔 한 설정이 안되고 있다. 모두 하나의 특정 아이디로 고정되어 버렸다.</p>
<pre><code class="language-ps">$ git config user.name
bingxxx
</code></pre>
<p>이건 잘 되는데.</p>
<p>생각해 보니 좀전에 choco로 모든 파일을 업데이트한 게 걸렸다.</p>
<p><code>C:/Program Files/Git/etc/gitconfig</code> 파일을 보니 좀전에 업데이트되었다고 나왔다. 파일 자체가 새로 생성되었다. 백업이라도 해 놓을 걸.</p>
<pre><code>[credential]
    helper = C:/Program\\ Files\\ \\(x86\\)/Git\\ Credential\\ Manager/git-credential-manager.exe
</code></pre>
<p><code>C:/Program Files/Git/etc/gitconfig</code> 파일에 위 내용을 추가해 놓았더니 다시 예전처럼</p>
<p><img src="dev/git/img/20250602031340.png" alt="" /></p>
<p>이 창이 나온다.</p>
<p>저렇게 설정한 이유는 나는 git credential을 별도로 설치했었기 때문이다.</p>
<p>이 부분은 기본적으로 git 설치할 때 같이 설치되는 git credential을 사용해도 된다.</p>
<pre><code>[credential]
	helper = manager
</code></pre>
<p>라고 하면 git 설치할 때 기본 설치되는 파일을 이용한다. 이 파일의 위치는</p>
<p><code>C:\Program Files\Git\mingw64\bin\git-credential-manager.exe</code></p>
<p>이다.</p>
<p>기존 아이디가 전부 지워졌는데, 뭔가 문제인가 싶어서 기존 로그인 정보 죄다 지웠기 때문이다. -.-;</p>
<p>그런데 browser를 이용해 새로 로그인 해도 이번에는 계정이 이렇게 로그인한 계정 A 하나로만 고정된다. 다른 아이디 폴더로 들어가도 계정 A로 인식하는거다. 저 github sign in 창이 안나오고.</p>
<p>이 문제 해결 방법은 다음과 같다.</p>
<p>제어판 자격증명에 github 관련 자격증명이</p>
<p>git:https://github.com</p>
<p>하나만 있을거다.  [일반 자격 증명 추가] 버튼을 눌러 하나를 더 추가한다.</p>
<ul>
<li>인터넷 또는 네트워크 주소 : git:https://ID@github.com</li>
<li>사용자 이름: 아무거나</li>
<li>암호: 아무거나</li>
</ul>
<p>일단 저렇게 인터넷 또는 네트워크 주소 를 넣어 놓은다. ID는 저렇게 그냥 ID라고만 하면 된다.</p>
<p>git:https://github.com
외에 또 다른 일반 자격 증명이 있기만 하면 된다.</p>
<p>그리고 다시 안 되던 private repository에 가서 git pull 해 보면</p>
<p><img src="dev/git/img/20241201144801.png" alt="" /></p>
<p>이 창이 나올텐데, 이 때 [Add a new account] 를 선택해서 새로운 git ID를 추가하면 된다.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="linux에서-접속token"><a class="header" href="#linux에서-접속token">linux에서 접속(token)</a></h1>
<p>github에 만든 코드를 linux server cli에서 접속하려면 ssh 등의 방법도 있지만 token을 사용하는 방법도 있다.</p>
<p>참고: <a href="https://docs.github.com/ko/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens" title="" target="_blank">https://docs.github.com/ko/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens</a></p>
<h2 id="토큰만들기"><a class="header" href="#토큰만들기">토큰만들기</a></h2>
<ol>
<li>
<p>github에서 오른쪽 맨 위 사용자 아이디 프사를 클릭한다.</p>
</li>
<li>
<p>settings를 클릭한다.</p>
</li>
<li>
<p>맨 아래 &lt;&gt; Developer settings를 클릭한다.
<img src="dev/git/img/20250609020339.png" alt="" /></p>
</li>
<li>
<p>Personal access tokens / Fine-grained tokens를 선택한다.</p>
</li>
<li>
<p>위 그림에서 [Generate new token] 버튼을 눌러 새 토크을 만든다.</p>
</li>
<li>
<p>토큰을 만드는 화면에서 repository access를 설정할 수 있는데, 보안을 위해 Only Select repositories를 선택하거나 그 위 All repositories를 선택한다.
<img src="dev/git/img/20250609020855.png" alt="" /></p>
</li>
<li>
<p>그 아래 permissions에서 아래와 같이 contents에 access 권한을 줘야 일단 접속이 되고 clone 등을 할 수 있다.
<img src="dev/git/img/20250609021018.png" alt="" /></p>
</li>
</ol>
<p>이렇게 만들어진 토큰은 만들 때 딱 한 번 보여주고 그 다음부터는 보여주지 않으니 어디에 잘 복사해 놔야 한다.</p>
<h2 id="토큰-사용하기"><a class="header" href="#토큰-사용하기">토큰 사용하기</a></h2>
<p>clone 하기</p>
<pre><code class="language-ps">git clone https://github.com/&lt;USERID&gt;/&lt;PROJECT&gt;.git

username 을 물어보면 username을 답하고,  
password 를 물어보면 토큰 값을 붙여넣기 하면 된다.
</code></pre>
<p>이렇게 password에 넣는 값은 console에 남지 않기 때문에 안전하게 사용할 수 있다.</p>
<p>이렇게 리포지토리에 토큰이 걸려 있어도 이전처럼 윈도우에서 브라우저를 이용한 접속(git-credential-manager.exe 를 이용한)은 계속 사용할 수 있다.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="local에-git-서버-운영"><a class="header" href="#local에-git-서버-운영">local에 git 서버 운영</a></h1>
<p>참고자료: 정리된 자료 / git init –bare</p>
<p>local에 git 서버를 운영하는 방법</p>
<h2 id="중앙-저장소-만들기"><a class="header" href="#중앙-저장소-만들기">중앙 저장소 만들기</a></h2>
<p>중앙 저장소의 위치는 r:\git-repo 이다.</p>
<p>이 폴더 안에 openclass 라는 중앙 저장소를 만들려 한다.</p>
<pre><code class="language-ps">git init --bare openclasss.git
</code></pre>
<p>관례적으로 중앙 저장소 이름에는 .git을 붙인다. 그래서 github 에서 clone 하려고 보면 그 위치가 ~.git 인거.</p>
<p>–bare를 하면 소스코드의 변경된 정보만 저장되는 <code>.git</code> 폴더의 내용만 저장되는 저장소가 만들어진다.</p>
<p>이렇게 만들어진 중앙 저장소의 path는 r:\git-repo\openclass.git 이다.</p>
<h2 id="중앙-저장소-사용"><a class="header" href="#중앙-저장소-사용">중앙 저장소 사용</a></h2>
<pre><code class="language-ps">git clone r:/git-repo/openclass.git
</code></pre>
<p>을 하면 저장소가 복제되어 사용할 수 있는 상태가 된다.</p>
<h2 id="push-후-용량"><a class="header" href="#push-후-용량">push 후 용량</a></h2>
<p>이렇게 만들어진 중앙 저장소 r:\git-repo\openclass.git에 6메가를 push 해도 용량은 2메가 정도만 늘어난 걸 볼 수 있다. 내부적으로 gzip 압축을 하기 때문이다. 이후부터는 델타 압축을 하는데, 차이만 압축해서 저장하는 거다. 리누스 토발즈는 천재다.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="바뀐-점만-다른-곳에-적용"><a class="header" href="#바뀐-점만-다른-곳에-적용">바뀐 점만 다른 곳에 적용</a></h1>
<blockquote>
<p>참조: <a href="https://www.perplexity.ai/search/giteseo-diff-han-gabseul-dareu-ZJFNoHcjQbiJU8j6Q9o29A" title="" target="_blank">https://www.perplexity.ai/search/giteseo-diff-han-gabseul-dareu-ZJFNoHcjQbiJU8j6Q9o29A</a></p>
</blockquote>
<blockquote>
<p>참조: <a href="https://extbrain.tistory.com/150" title="" target="_blank">https://extbrain.tistory.com/150</a></p>
</blockquote>
<p>개발하다보면 인터넷이 안되는 곳에서 개발해야 하는 경우가 있다. 특히 내부망에 있는 배포서버 같은 경우가 그렇다.</p>
<p>이럴 때 인터넷이 되는 곳 C에서 개발하고 그 코드를 인터넷이 안되는 곳 D에 복사해 넣어야 하는데, 그냥 코드를 통째로 복사해 넣으면 뭔가 문제가 생길 거 같다.</p>
<p>그럴 때 C에서 바뀐 점만 찾아내서 D에 그 바뀐 점만 적용하면 된다.</p>
<p>이게 <strong>diff and patch</strong> 이다.</p>
<p>앞으로의 설명은 모두 <code>git bash</code>에서 해야 한다. <code>powershell</code>에서 하면 안된다.</p>
<h2 id="diff-하기"><a class="header" href="#diff-하기">diff 하기</a></h2>
<p>C 장소에서 아래와 같이 한다.</p>
<pre><code class="language-bash">git diff &gt; diff.patch
</code></pre>
<p>이렇게 하면 diff 파일이 생성된다.</p>
<p>이 파일이 commit 할 때 반영되지 않도록 하자.</p>
<p>여기서의 차이점은 직전 커밋 ~ 아직 커밋하지 않은 내용까지이다.</p>
<p>만약 커밋 간의 차이점을 알고 싶으면</p>
<pre><code class="language-bash">git diff 커밋1 커밋2
</code></pre>
<p>를 하면 된다.</p>
<p>그리고 이미지같은 binary 파일의 차이점은 커밋 간의 차이점을 볼 때만 나타난다.</p>
<p>그러니 제대로 보려면 커밋하고 커밋간의 차이점을 보자</p>
<p>현재 커밋과 그 직전 커밋을 비교하는 가장 쉬운 방법은</p>
<pre><code class="language-bash">git diff HEAD~1 HEAD
</code></pre>
<p>이다.</p>
<h2 id="patch-하기"><a class="header" href="#patch-하기">patch 하기</a></h2>
<p>꼭 같은 repository를 사용할 필요는 없다.</p>
<p>D 장소에서 아래와 같이 한다.</p>
<pre><code class="language-bash">patch -p1 &lt; diff.patch
</code></pre>
<h2 id="patch-되돌리기"><a class="header" href="#patch-되돌리기">patch 되돌리기</a></h2>
<p>patch한 내용이 문제가 있으면 되돌릴 수 있다.</p>
<p>그냥 위 patch를 한 번 더 실행하면 된다.</p>
<pre><code class="language-bash">$ patch -p1 &lt; diff.patch
patching file doc/서버만들기/서버만들기.md
Reversed (or previously applied) patch detected!  Assume -R? [n]
</code></pre>
<p>맨 밑에 reverse 하겠냐고 물어보는데 <code>y</code> 키를 누르면 패치하기 이전으로 되돌려진다.</p>
<p>혹은 명시적으로</p>
<pre><code class="language-bash">patch -R -p1 &lt; diff.patch
</code></pre>
<p>를 하면 patch 할 때와 출력 메시지에는 큰 변화가 없는데 되돌려져 있다.</p>
<h2 id="바이너리-파일의-변화"><a class="header" href="#바이너리-파일의-변화">바이너리 파일의 변화</a></h2>
<p>C에서 이미지를 새로 추가하면,</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="visual-studio"><a class="header" href="#visual-studio">visual studio</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="컴파일-오류-목록-중-하나를-더블클릭하면-문제-세부-정보-창이-나올-때-없애는-방법"><a class="header" href="#컴파일-오류-목록-중-하나를-더블클릭하면-문제-세부-정보-창이-나올-때-없애는-방법">컴파일 오류 목록 중 하나를 더블클릭하면 문제 세부 정보 창이 나올 때 없애는 방법</a></h1>
<p><img src="dev/visualstudio/img/20241201153112.png" alt="" /></p>
<h2 id="없애는-방법"><a class="header" href="#없애는-방법">없애는 방법</a></h2>
<p><img src="dev/visualstudio/img/20241201153121.png" alt="" /></p>
<p>도구 &gt; 텍스트 편집기 &gt; C/C++ / 고급 &gt; 오류 목록 &gt; 두 번 클릭 시 문제 세부 정보 표시 를 “False” 로 바꾸면 없어짐.</p>
<h2 id="관련-url"><a class="header" href="#관련-url">관련 URL</a></h2>
<p>https://learn.microsoft.com/ko-kr/visualstudio/ide/reference/problem-details-window?view=vs-2022</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="vscode"><a class="header" href="#vscode">vscode</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="extensions"><a class="header" href="#extensions">extensions</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="vscode에서-pdf-파일-보기-extension"><a class="header" href="#vscode에서-pdf-파일-보기-extension">vscode에서 pdf 파일 보기 extension</a></h1>
<p><img src="dev/vscode/extensions/img/20241201154415.png" alt="" /></p>
<p>vscode-pdf 1.2.2</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="md파일-내-이미지-특정-폴더에-붙여넣기"><a class="header" href="#md파일-내-이미지-특정-폴더에-붙여넣기">md파일 내 이미지 특정 폴더에 붙여넣기</a></h1>
<h2 id="extension-설치"><a class="header" href="#extension-설치">extension 설치</a></h2>
<p><img src="dev/vscode/extensions/img/20241201154447.png" alt="" /></p>
<p>vscode용 paste image extension을 설치한다.</p>
<h2 id="설정"><a class="header" href="#설정">설정</a></h2>
<p><img src="dev/vscode/extensions/img/20241201154459.png" alt="" /></p>
<h3 id="path"><a class="header" href="#path">Path</a></h3>
<p><img src="dev/vscode/extensions/img/20241201154510.png" alt="" /></p>
<p>Path 설정값을 <code>${currentFileDir}/img</code> 으로 수정한다.</p>
<p>이런 predefined variables는 <a href="https://github.com/telesoho/vscode-markdown-paste-image" title="" target="_blank">https://github.com/telesoho/vscode-markdown-paste-image</a> 에 정의되어 있다.</p>
<h3 id="default-name"><a class="header" href="#default-name">Default Name</a></h3>
<p><img src="dev/vscode/extensions/img/20241201154523.png" alt="" /></p>
<p>원래 값은 Y-MM-DD-HH-mm-ss 였음.</p>
<h3 id="붙여넣을-파일명-정하는-창-보여주기-체크"><a class="header" href="#붙여넣을-파일명-정하는-창-보여주기-체크">붙여넣을 파일명 정하는 창 보여주기 체크</a></h3>
<p><img src="dev/vscode/extensions/img/20241201154555.png" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="snippets"><a class="header" href="#snippets">snippets</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="snippet-만들기"><a class="header" href="#snippet-만들기">snippet 만들기</a></h1>
<p>https://seukjjang.tistory.com/18</p>
<p>snippet을 작성하기 위해서는 ’파일 탭 -&gt; 기본 설정 -&gt; 사용자 코드 조각 구성’으로 이동한 뒤 원하는 언어를 선택한다.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="답이-접혀-있는-문제를-내기-위한-code-snippet"><a class="header" href="#답이-접혀-있는-문제를-내기-위한-code-snippet">답이 접혀 있는 문제를 내기 위한 code snippet</a></h1>
<p>“make a practice”:
{
“scope”: “markdown”,
“prefix”: “112”,
“body”: [
“### <strong>$1. $2</strong>”,
“<details><summary>답(안) $3</summary>”,
“”,
“<code>$4", "$5", "</code>”,
“</details>”
],
“description”: “연습문제 내기”
}</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="vscode-작업-영역"><a class="header" href="#vscode-작업-영역">vscode 작업 영역</a></h1>
<p><a href="https://heyoonow.tistory.com/54" title="" target="_blank"></a></p>
<p>vscode에서 창을 나누고 했던 현재 작업 환경을 그대로 저장할 수 없나 찾아봤는데 vscode에 workspace 라는 기능이 있다. 그대로 저장할 수 있다. 넘나 훌륭한다.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="visual-studio-code-에서-terminal에서-한글이-안될-때"><a class="header" href="#visual-studio-code-에서-terminal에서-한글이-안될-때">visual studio code 에서 terminal에서 한글이 안될 때</a></h1>
<p>그냥 vs 터미널에서</p>
<pre><code class="language-shell">&gt; chcp 65001
</code></pre>
<p>하면 바로 해결된다. 65001이 utf-8</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="markdown-custom-css"><a class="header" href="#markdown-custom-css">markdown custom css</a></h1>
<p>C:\Users_USERID_\AppData\Local\Programs\Microsoft VS Code\resources\app\extensions\markdown-language-features\media\markdown.css</p>
<p>파일을 수정하면 된다.</p>
<p>오늘은 아래와 같이 수정함.</p>
<pre><code class="language-css">h1 {
    font-size: 2.3em;
    margin-top: 0;
    /* margin-bottom: 100px; */
    padding-bottom: 0.3em;
    border-bottom-width: 1px;
    border-bottom-style: solid;
    font-weight: bold
}

h2 {
    font-size: 2em;
    margin-top: 80px;
    /* margin-bottom: -30px; */
    padding-bottom: 0.3em;
    border-bottom-width: 1px;
    border-bottom-style: solid;
    font-weight: bold
}

h3 {
  margin-top: 60px;
  /* margin-bottom: -20px; */
    font-size: 1.5em;
    font-weight: bold
}

h4 {
  margin-top: 50px;
  /* margin-bottom: -20px; */
    font-size: 1.25em;
    font-weight: bold
}

h5 {
  margin-top: 30px;
  /* margin-bottom: -10px; */
    font-size: 1em;
    font-weight: bold
}

h6 {
    font-size: 0.85em;
}
</code></pre>
<p>이 파일을 수정하고 markdown 미리 보기 창을 닫고 다시 미리보기 하면 반영되어 있다.</p>
<p>그런데 이렇게 해도 yzane Markdown pdf 익스텐션을 이용해 pdf로 export 할 때는 이 css가 반영되지 않는다.</p>
<p>pdf 파일은</p>
<p>C:\Users\_USERID_.vscode\extensions\yzane.markdown-pdf-1.5.0\styles\markdown-pdf.css</p>
<p>파일을 수정하면 된다.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="markdown-파일을-html로-변환할-때-css-적용"><a class="header" href="#markdown-파일을-html로-변환할-때-css-적용">markdown 파일을 html로 변환할 때 css 적용</a></h1>
<p>index.md 파일을 html 파일로 변경하려 한다.</p>
<p><img src="dev/vscode/img/20250601002430.png" alt="" /></p>
<p>markdown pdf를 설치한 다음 html로 export할 때 css를 적용하려면, 아래와 같이 css 파일명을 적어준다.</p>
<p><img src="dev/vscode/img/20250601002611.png" alt="" /></p>
<p><img src="dev/vscode/img/20250601004504.png" alt="" /></p>
<p>이것도 해제해야 쓸데없는 간섭을 받지 않는다.</p>
<p>그리고  pdf.css 파일같은 css 파일을 생성한다.</p>
<pre><code class="language-css">body
{
    width: 1280px;
    margin: 0 auto;
    border: 0px solid;
}

p
{
    font-size: 1.3em;
}

h1 {
  /* 글꼴 크기: 매우 크게 설정하여 페이지의 주요 제목임을 강조 */
  font-size: 3.5em; /* 1em은 부모 요소의 font-size와 동일 */
  /* 글꼴 두께: 굵게 */
  font-weight: 800;
  /* 글꼴 색상: 진한 색상으로 설정 */
  color: #2c3e50;
  /* 아래쪽 여백: 다른 요소와의 간격 확보 */
  margin-bottom: 30px;
  
}

h2 {
  /* 글꼴 크기: h1보다 작지만 여전히 큼 */
  font-size: 2.5em;
  /* 글꼴 두께: 보통보다 약간 굵게 */
  font-weight: 700;
  /* 글꼴 색상: h1과 비슷하지만 조금 더 밝게 */
  color: #34495e;
  /* 아래쪽 여백: 적절한 간격 */
  margin-bottom: 30px;
}  

h3 {
  /* 글꼴 크기: 적당한 크기 */
  font-size: 2.0em;
  /* 글꼴 두께: 보통 */
  font-weight: 600;
  /* 글꼴 색상: 일반 텍스트보다 진하게 */
  color: #2c3e50;
  /* 아래쪽 여백: 다른 요소와의 간격 */
  margin-bottom: 20px;  
}

h4 {
  /* 글꼴 크기: 일반 텍스트보다 약간 크게 */
  font-size: 1.5em;
  /* 글꼴 두께: 보통 */
  font-weight: 500;
  /* 글꼴 색상: 어둡지만 너무 강하지 않게 */
  color: black;
  /* 아래쪽 여백: 작은 간격 */
  margin-bottom: 15px;
  
  
}

h5 {
  /* 글꼴 크기: 일반 텍스트와 비슷하거나 약간 크게 */
  font-size: 1.1em;
  /* 글꼴 두께: 보통 */
  font-weight: 400;
  /* 글꼴 색상: 일반 텍스트 색상 */
  color: #7f8c8d;
  /* 아래쪽 여백 */
  margin-bottom: 10px;
  /* 기울임꼴 */
  font-style: italic;
}

code{
    background-color: lightgray;
    border-radius: 7px;
    color: #020202;
    padding: 4px 6px;
    font-weight: 600;
}
</code></pre>
<p>이제 변환된 html 파일을 열어 다음 2가지를 해준다.</p>
<ol>
<li>title을 고친다.</li>
<li>pdf 파일 경로를 환경에 맞게 고친다.</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="비동기화"><a class="header" href="#비동기화">비동기화</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="자바스크립트-비동기화"><a class="header" href="#자바스크립트-비동기화">자바스크립트 비동기화</a></h1>
<p>자바스크립트 비동기화는 Promise 클래스와 async/await로 대표된다.</p>
<p>현재까지는 도저히 자바스크립트 비동기화를 이해 못하고 있다.</p>
<p>fetch() 같은 비동기화 함수를 쓰면 굳이 Promise 클래스나 async 키워드 없어도 그냥 바로 비동기가 된다. 오히려 fetch() 함수를 쓰면 동기화 방식으로 할 수 없는 거 같다.</p>
<h2 id="현재까지-해-본-것"><a class="header" href="#현재까지-해-본-것">현재까지 해 본 것</a></h2>
<p>먼저 firebase Cloud Function에서 함수를 하나 만들었다.</p>
<p>firebase Cloud Function의 index.js 파일을 통쨰로 보면,</p>
<pre><code class="language-js">const {onRequest} = require("firebase-functions/v2/https");
const logger = require("firebase-functions/logger");

 exports.add = onRequest((request, response) =&gt; {
    logger.info("add!", {structuredData: true});

    const a = request.query.a;
    const b = request.query.b;
    const sum = parseInt(a) + parseInt(b);

    const wakeUpTime = Date.now() + 5000;
    while (Date.now() &lt; wakeUpTime) 
    {

    }    

    response.send("add from Firebase! sum = " + sum);
  });
</code></pre>
<p>이렇게 add 함수를 만들었고, 5초후에 결과를 보내주도록 만들었다.</p>
<p>그리고 내 로컬에 node.js 같은 거 없이 그냥 index.html과 index.js 파일을 만들었다.</p>
<p><strong>index.html</strong></p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;Document&lt;/title&gt;
    &lt;script src="index.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;button onclick="LongTask_async()"&gt;웹에서 자료 가져오기&lt;/button&gt;
    &lt;button onclick="javascript:alert('버튼 눌림')"&gt;버튼&lt;/button&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p><strong>index.js</strong></p>
<pre><code class="language-js">function LongTask()
{
    var request = new XMLHttpRequest();
    request.open('GET', 'http://127.0.0.1:5001/asynctest002/us-central1/add?a=1&amp;b=7', false);
    request.send();

    console.log(request.responseText);
}  

function LongTask_async()
{
    console.log("LongTask_sync 함수 시작");
    const promise = new Promise((resolve, reject) =&gt; {
        LongTask(); 
    });
    console.log("LongTask_sync 함수 끝");
    
}
</code></pre>
<p><img src="asynchronous/./img/20250110022105.png" alt="" /></p>
<p>이렇게 해 놓고,</p>
<pre><code>firebase emulators:start
</code></pre>
<p>라고 하면 이걸 deploy 하지 않고도 local에서 바로 테스트할 수 있다.
5001번 포트에서 열린다.</p>
<p>여기서 XMLHttpRequest() 함수는 동기화 함수이다.<br />
이 상황에서 어떻게 해도 LongTask 함수의 내용을 동기적으로 처리할 수가 없다. 무조건 5초 기다린다.</p>
<p>반면에 XMLHttpRequest()가 아니라 애초에 비동기화 함수인 fetch() 함수를 이용하면 어떻게 해도 동기화로 처리할 수가 없다. 이거 어떻게 해야 하냐.</p>
<h2 id="알게-된-것"><a class="header" href="#알게-된-것">알게 된 것.</a></h2>
<p>Promise는 비동기화를 가능하게 해주는 클래스가 아니다. 그냥 비동기로 처리되는 것들에 대해 callback을 관리하고 쉽게 쓸 수 있도록 해주는 클래스였던 것.</p>
<p>자바스크립트도 별 거 없다. UI와의 비동기화를 하고 싶으면 타이머써야 한다.</p>
<p>async 예약어는 비동기화를 가능하게 해주는 예약어가 아니다. 그냥 Promise를 쉽게 쓸 수 있게 해 주는 역할만 한다.</p>
<p>그리고 자동으로 Promise로 리턴하게 해준다. return 1 이라고 하면 1을 Promise로 감싸서 리턴해준다.</p>
<p>await는 비동기화 함수 앞에서만 쓸 수 있는데 그걸 동기화되도록 쓰는 거. 죄다 쓰면 도대체 왜 비동기화 하는 거냐.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="웹"><a class="header" href="#웹">웹</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="nextjs"><a class="header" href="#nextjs">next.js</a></h1>
<h2 id="설치-1"><a class="header" href="#설치-1">설치</a></h2>
<ul>
<li>node.js를 설치한다.</li>
<li>next.js는 따로 설치하지 않고 그냥 프로젝트를 설치하면 된다.
<pre><code>npx create-next-app
</code></pre>
</li>
</ul>
<h2 id="실행"><a class="header" href="#실행">실행</a></h2>
<pre><code>npm run dev
</code></pre>
<h2 id="node_modules-설치"><a class="header" href="#node_modules-설치">node_modules 설치</a></h2>
<p>.gitignore 파일을 보면</p>
<p>/node_modules</p>
<p>가 포함되어 있다.</p>
<p>그럼 관련된 패키지들은 git을 통해 공유가 되지 않는다는 건데, 다른 곳에서 clone한 사람들은 프로젝트와 관련된 패키지가 없다는 문제가 생긴다.</p>
<p>이 문제는 아주 간단하게 해결된다.</p>
<p>프로젝트 root 디렉토리에서</p>
<pre><code class="language-ps">npm install
</code></pre>
<p>을 하면, <code>package.json</code> 파일에서 <code>dependencies</code>와 <code>devDependencies</code> 섹션에서 모든 패키지를 찾아 node_modules 폴더를 생성하고 설치한다.</p>
<h2 id="https로-테스트"><a class="header" href="#https로-테스트">https로 테스트</a></h2>
<p>powershell을 관리자 모드로 실행하고, 프로젝트 루트에서 다음 실행.</p>
<pre><code class="language-ps">npx next dev --experimental-https
</code></pre>
<h2 id="포트번호-바꾸기"><a class="header" href="#포트번호-바꾸기">포트번호 바꾸기</a></h2>
<p>package.json 파일 수정</p>
<pre><code class="language-json">"scripts": {
  "start": "next start -p 80"
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sqlite3-in-nextjs"><a class="header" href="#sqlite3-in-nextjs">SQLite3 in Next.js</a></h1>
<h2 id="프로젝트-생성-2"><a class="header" href="#프로젝트-생성-2">프로젝트 생성</a></h2>
<pre><code class="language-ps">npx create-next-app
</code></pre>
<h2 id="sqlite3-설치"><a class="header" href="#sqlite3-설치">sqlite3 설치</a></h2>
<pre><code class="language-ps">npm install sqlite3
npm install -D @types/sqlite3
</code></pre>
<h2 id="db-연결"><a class="header" href="#db-연결">DB 연결</a></h2>
<pre><code class="language-tsx">// app/page.tsx

import sqlite3 from 'sqlite3';

export default function Home() {
  // 데이터베이스 연결
  const db = new sqlite3.Database('./sqlite3_001.sqlite');
  return (
    &lt;div&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<p>이 코드를 실행하는 순간 프로젝트 루트에 <code>sqlite3_001.sqlite</code> 파일이 생성된다.</p>
<h2 id="db-연결-끊기"><a class="header" href="#db-연결-끊기">DB 연결 끊기</a></h2>
<pre><code class="language-tsx">// 데이터베이스 닫기
db.close();
</code></pre>
<h2 id="dbeaver에서-테이블-생성"><a class="header" href="#dbeaver에서-테이블-생성">DBeaver에서 테이블 생성</a></h2>
<p><img src="sqlite3/img/20250518231140.png" alt="" /></p>
<h2 id="쿼리-실행"><a class="header" href="#쿼리-실행">쿼리 실행</a></h2>
<pre><code class="language-tsx">import sqlite3 from 'sqlite3';

export default function Home() {
  // 데이터베이스 연결
  const db = new sqlite3.Database('./sqlite3_001.sqlite');

  // insert
  db.exec("insert into member (name) values ('steve')");

  // 데이터베이스 닫기
  db.close();

  return (
    &lt;div&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h2 id="여러-개의-row가-나올-것으로-예상되는-쿼리비동기-리턴이-먼저-된다"><a class="header" href="#여러-개의-row가-나올-것으로-예상되는-쿼리비동기-리턴이-먼저-된다">여러 개의 row가 나올 것으로 예상되는 쿼리(비동기. 리턴이 먼저 된다.)</a></h2>
<pre><code class="language-tsx">import sqlite3 from 'sqlite3';

interface SMember
{
  id: number;
  name: string;
}

export default function Home() {
  // 데이터베이스 연결
  const db = new sqlite3.Database('./sqlite3_001.sqlite');

  // insert
  //db.exec("insert into member (name) values ('steve')");

  // 여러 개의 row가 나올 것으로 예상되는 쿼리
  db.all("select * from member", [], (err, rows: Array&lt;SMember&gt;) =&gt;
  {
    if (err)
    {
      console.error(err.message);
      return;
    }

    rows.forEach((row) =&gt; {
      console.log(`id: ${row.id}, 이름: ${row.name}`);
    })

  });

  // 데이터베이스 닫기
  db.close();

  return (
    &lt;div&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h2 id="데이터가-하나인-경우-쿼리비동기-return이-먼저-된다"><a class="header" href="#데이터가-하나인-경우-쿼리비동기-return이-먼저-된다">데이터가 하나인 경우 쿼리(비동기. return이 먼저 된다.)</a></h2>
<pre><code class="language-tsx">// 한 개의 row가 나올 것으로 예상되는 쿼리
  db.get("select * from member where id = ?", [3], (err, row: SMember) =&gt;
  {
    if (err)
    {
      console.error(err.message);
      return;
    }

    if (row)
    {
      console.log(`id: ${row.id}, 이름: ${row.name}`);
    }
  });
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="정적호스팅"><a class="header" href="#정적호스팅">정적호스팅</a></h1>
<p><img src="next.js/../images/perplexity.png" alt="" />
<a href="https://www.perplexity.ai/search/typescript-next-jsro-aebeul-ma-fIcoQTKeSOKCMLtKldOdwQ" title="" target="_blank">https://www.perplexity.ai/search/typescript-next-jsro-aebeul-ma-fIcoQTKeSOKCMLtKldOdwQ</a></p>
<h2 id="githubio-같은-정적호스팅-서버에-올리기-위한-주의점"><a class="header" href="#githubio-같은-정적호스팅-서버에-올리기-위한-주의점">github.io 같은 정적호스팅 서버에 올리기 위한 주의점</a></h2>
<h3 id="nextjs의-다음-기능들-사용-불가"><a class="header" href="#nextjs의-다음-기능들-사용-불가">next.js의 다음 기능들 사용 불가</a></h3>
<ul>
<li>SSR</li>
<li>API Route</li>
<li>동적 서버</li>
<li>Server Component</li>
</ul>
<h3 id="nextconfigts-파일-수정"><a class="header" href="#nextconfigts-파일-수정">next.config.ts 파일 수정</a></h3>
<p>nextConfig에,</p>
<pre><code>output: 'export'
</code></pre>
<p>추가. 이렇게 하면 <code>npm run build</code> 시 <code>out</code> 폴더가 생긴다. 이걸 github.io에 올리면 됨.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="githubio에서-호스팅"><a class="header" href="#githubio에서-호스팅">github.io에서 호스팅</a></h1>
<p>github.io는 static hosting이기 때문에(node.js가 없음) 몇 가지 주의할 점이 있다.</p>
<h2 id="nextjs로-앱-만들-때-githubio에-올리려면-주의할-점"><a class="header" href="#nextjs로-앱-만들-때-githubio에-올리려면-주의할-점">next.js로 앱 만들 때 github.io에 올리려면 주의할 점</a></h2>
<h3 id="프로젝트-생성-시-app-route-사용-불가"><a class="header" href="#프로젝트-생성-시-app-route-사용-불가">프로젝트 생성 시: app route 사용 불가.</a></h3>
<p>app route는 node.js의 도움을 받는다.<br />
그래서 프로젝트 생성할 때 <strong>pages route</strong> 방식을 선택해야 한다.</p>
<h3 id="컴퍼넌트-생성-시-server-component-사용-불가"><a class="header" href="#컴퍼넌트-생성-시-server-component-사용-불가">컴퍼넌트 생성 시: server component 사용 불가</a></h3>
<p>무조건 client component로만 만들어야 한다.<br />
‘use client’;</p>
<h3 id="설정-변경"><a class="header" href="#설정-변경">설정 변경</a></h3>
<h4 id="export로-build"><a class="header" href="#export로-build">export로 build</a></h4>
<p>빌드 방식을 export 방식으로 변경해야 한다.<br />
next.config.ts 파일을 수정한다.</p>
<pre><code class="language-ts">const nextConfig: NextConfig = {
  output: "export",  
};
</code></pre>
<p>이렇게 하면 node.js 없이 index.html 부터 시작하는 build 결과를 얻을 수 있고, static web hosting에 올려 사용할 수 있다.</p>
<h4 id="이미지-최적화-비활성화"><a class="header" href="#이미지-최적화-비활성화">이미지 최적화 비활성화</a></h4>
<p>이미지 최적화를 하려면 next.config.ts 파일에 뭔가 작업해 줘야 하는데 일단 아래와 같이 처리.</p>
<pre><code class="language-ts">const nextConfig: NextConfig = {
  output: "export",
  images: {
    unoptimized: true, // 이미지 최적화 비활성화
  },  
};
</code></pre>
<h4 id="기본-경로-설정"><a class="header" href="#기본-경로-설정">기본 경로 설정</a></h4>
<p>github.io는 기본적으로</p>
<p><code>사용자명.github.io/프로젝트명</code> 의 경로를 가진다.</p>
<p>예를 들면 <code>hong.github.io/myapp</code> 과 같은 식이다.</p>
<p>그냥 두면 이거 폴더를 제대로 인식 못하는 문제가 생긴다. 그래서 아래와 같이 basePath를 설정해 줘야 한다.</p>
<pre><code class="language-ts">const nextConfig: NextConfig = {
  output: "export",  
  images: {
    unoptimized: true, // 이미지 최적화 비활성화
  },  
  basePath: "/프로젝트명",  // basePath: "/myapp"
};
</code></pre>
<h3 id="_next-폴더-밑의-경로를-인식하지-못하는-문제-해결"><a class="header" href="#_next-폴더-밑의-경로를-인식하지-못하는-문제-해결">_next 폴더 밑의 경로를 인식하지 못하는 문제 해결</a></h3>
<p>package.json 파일을 이용해 <code>.nojekyll</code> 파일을 생성해 준다.</p>
<pre><code class="language-json">"scripts": {
    ...
    "build": "next build &amp;&amp; type nul &gt; out/.nojekyll",   
    ...
  },
</code></pre>
<p>원래 <code>next build</code> 만 있었는데  <code>&amp;&amp; type nul &gt; out/.nojekyll</code> 을 추가해 준 거</p>
<h3 id="build-한-앱-테스트하기"><a class="header" href="#build-한-앱-테스트하기">build 한 앱 테스트하기</a></h3>
<pre><code class="language-ps"> ✓ Starting...
[Error: "next start" does not work with "output: export" configuration. Use "npx serve@latest out" instead.]
</code></pre>
<p>이런 에러가 나온다. 그래서</p>
<p><code>npx serve@latest out</code> 을 하면 아래와 같이 serve 패키지를 설치하고 실행해 준다.</p>
<pre><code class="language-ps">PS E:\github-panboy75\allflix0\src\nextjs\allflix&gt; npx serve@latest out
Need to install the following packages:
serve@14.2.4
Ok to proceed? (y) y


   ┌─────────────────────────────────────────┐
   │                                         │
   │   Serving!                              │
   │                                         │
   │   - Local:    http://localhost:3000     │
   │   - Network:  http://172.25.16.1:3000   │
   │                                         │
   │   Copied local address to clipboard!    │
   │                                         │
   └─────────────────────────────────────────┘
</code></pre>
<p>여기까지 오면 <code>http://localhost:3000</code>에 접속했을 때 다시 처음처럼 경로 문제를 보게 된다. 이유는 여태 우리의 설정은 /allflix 라는 basePath를 기반으로 하도록 했는데 나의 local에서는 이에 대한 처리를 하지 않았기 때문이다. 그러니까 github.io와 local의 경로가 달라서다.</p>
<p>이제 <code>next.config.ts</code> 파일에 다음 문구를 추가한다. build 된 앱이 저장되는 경로를 프로젝트 이름으로 바꿔서 github.io에 맞게 바꿔주는 거다.</p>
<pre><code class="language-ts">distDir: 'out/allflix',
</code></pre>
<p>그리고 test 할 때</p>
<pre><code class="language-ps">npx serve@latest out
</code></pre>
<p>로 하고 <code>http://localhost:3000/allflix</code>로 접속하면 github.io와 환경이 똑같아진다.</p>
<p>build 되는 위치가 바뀌었으니 <code>package.json</code> 파일에서 <code>.nojekyll</code> 파일의 생성위치도 바꿔줘야 한다.</p>
<pre><code class="language-json">"scripts": {
    ...
    "build": "next build &amp;&amp; type nul &gt; out/allflix/.nojekyll",
    ...
  },
</code></pre>
<p>git 에 올릴 때는 <code>out/allflix</code> 폴더 안의 파일이 <code>docs</code> 폴더 안에 저장되도록 해야 한다.</p>
<h3 id="여기까지-한-후-이미지-문제-해결"><a class="header" href="#여기까지-한-후-이미지-문제-해결">여기까지 한 후 이미지 문제 해결</a></h3>
<p>이제 이미지 문제를 해결해야 한다.</p>
<p>next.js에서는 내가 가지고 있는 이미지 a.svg 파일을 사용하기 위해서는</p>
<p>그 파일을 <code>public/a.svg</code> 에 두거나 <code>public/images/a.svg</code> 와 같은 식으로 파일을 저장해 두는데, 보통은 <code>public/images/a.svg</code>와 같이 저장한다.</p>
<p>이걸 사용하려면 컴퍼넌트의 return 문 안에서</p>
<pre><code class="language-tsx">&lt;Image src='/images/play.svg' /&gt;
</code></pre>
<p>와 같이 쓴다. 이렇게 되면 여태 우리가 했던 /allflix/images 와 어긋나기 때문에 또 문제가 된다.</p>
<pre><code class="language-tsx">&lt;Image src='images/play.svg' /&gt;
</code></pre>
<p>해도 역시 문제는 해결되지 않는다. 가장 쉬운 해결방법은</p>
<pre><code class="language-tsx">&lt;Image src='/allflix/images/play.svg' /&gt;
</code></pre>
<p>이지만 아무도 이렇게 하지 않을거다. 이 문제는 .env 환경설정파일로 다시 정리하자.</p>
<p>(.env는 git에 올리고, .env.local은 git에 올리지 않는다)</p>
<p>프로젝트 루트 폴더에 <code>.env</code> 파일을 생성하고 다음과 같이 적는다.</p>
<p>client component에서 사용하려면 반드시 <code>NEXT_PUBLIC_</code> prefix 를 지켜야 한다.</p>
<pre><code>NEXT_PUBLIC_BASEPATH=/allflix
</code></pre>
<p>그리고 <code>next.config.ts</code> 파일도 수정한다.</p>
<pre><code class="language-ts">basePath: process.env.NEXT_PUBLIC_BASEPATH,
distDir: 'out' + process.env.NEXT_PUBLIC_BASEPATH,
</code></pre>
<p><code>+ 연산자</code>가 먹다니 신기.</p>
<p>그래서 최종 <code>next.config.ts</code> 파일의 내용은 다음과 같다.</p>
<pre><code class="language-ts">import type { NextConfig } from "next";

const nextConfig: NextConfig = {
  output: "export",  
  basePath: process.env.NEXT_PUBLIC_BASEPATH,
  distDir: 'out' + process.env.NEXT_PUBLIC_BASEPATH,
  //assetPrefix: './',  ,
  reactStrictMode: true,
  images: {
    unoptimized: true, // 이미지 최적화 비활성화
  },
};

export default nextConfig;
</code></pre>
<p>이제 component 안의 이미지 부분도 고치자.</p>
<pre><code class="language-tsx">&lt;Image src={`${process.env.NEXT_PUBLIC_BASEPATH}/images/play.svg`} /&gt;
</code></pre>
<h3 id="basepath-를-설정한-경우-faviconico-문제"><a class="header" href="#basepath-를-설정한-경우-faviconico-문제">basePath 를 설정한 경우 favicon.ico 문제</a></h3>
<pre><code class="language-ps"> HTTP  2025. 5. 25. 오후 1:50:56 ::1 GET /favicon.ico
 HTTP  2025. 5. 25. 오후 1:50:56 ::1 Returned 404 in 1 ms
</code></pre>
<p>basePath를 설정하면 로그가 이렇게 나온다. basePath를 무시하고 /favicon.ico 파일을 읽으려고 해서 나오는 에러다.</p>
<p>pages router를 사용하니 _document.tsx 파일을 다음과 같이 수정한다.</p>
<pre><code class="language-tsx">&lt;Head&gt;
   &lt;link rel="icon" href={`${process.env.NEXT_PUBLIC_BASEPATH}/favicon.ico`} /&gt;
&lt;/Head&gt;
</code></pre>
<p>이제 다 좋아졌다.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="build-버전에서는-consolelog-안-보이게"><a class="header" href="#build-버전에서는-consolelog-안-보이게">build 버전에서는 console.log 안 보이게</a></h1>
<p>next.config.ts 파일을 다음과 같이 수정한다.</p>
<pre><code class="language-ts">const nextConfig: NextConfig = {
  /* config options here */
  compiler: {
    removeConsole: process.env.NODE_ENV === 'production',
  }
};
</code></pre>
<p>이렇게 하면 <code>npm run dev</code> 할 때는 브라우저에서 console.log 의 내용이 보이고, <code>npm run start</code> 하면 보이지 않게 된다.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="next-auth"><a class="header" href="#next-auth">next-auth</a></h1>
<p>좋은 자료: <a href="https://mycodings.fly.dev/blog/2023-05-31-nextjs-nextauth-tutorial-1-setup" title="" target="_blank">https://mycodings.fly.dev/blog/2023-05-31-nextjs-nextauth-tutorial-1-setup</a></p>
<p>지금은 auth.js로 이름을 바꾸었다.</p>
<h2 id="next-auth-설치"><a class="header" href="#next-auth-설치">next-auth 설치</a></h2>
<pre><code>npm install next-auth
</code></pre>
<h2 id="appauthnextauthroutets"><a class="header" href="#appauthnextauthroutets">/app/auth/[…nextauth]/route.ts</a></h2>
<p>next-auth는 이 파일을 중심으로 돌아간다. 로그인 방법, 로그인 버튼의 위치, 로그인 성공 시 이후 절차 같은 것들이 여기에 기술된다.</p>
<h3 id="로그인-방법"><a class="header" href="#로그인-방법">로그인 방법</a></h3>
<h4 id="credentials"><a class="header" href="#credentials">credentials</a></h4>
<p>아이디, 패스워드로 인증하는 방법. 인증에 필요한 항목(예: 아이디, 패스워드)를 정해주면 기본폼으로 로그인 페이지를 만들어준다. 물론 이걸 쓰는 사람은 없을 듯. 로그인 페이지는 커스터마이징이 가능하다.</p>
<h3 id="sns"><a class="header" href="#sns">sns</a></h3>
<p>google id, facebook id 로 로그인하는 방법 제공. 아직 해 본 적 없음.</p>
<h2 id="로그인로그아웃-버튼"><a class="header" href="#로그인로그아웃-버튼">로그인/로그아웃 버튼</a></h2>
<pre><code class="language-ts">import { signIn, signOut, useSession } from "next-auth/react";

return(
&lt;span onClick={() =&gt; signIn()}&gt;로그인&lt;/span&gt;
);
</code></pre>
<p>버튼을 클릭하면 next-auth/react의 <code>signIn()</code> 함수를 호출한다. 이렇게 되면 next-auth에서 제공하는 기본 로그인 폼이 나타난다.</p>
<p>로그아웃할 때는 <code>signOut()</code> 함수를 호출하면 된다. next-auth가 로그아웃에 필요한 처리(세션값을 삭제.. 까지만 확인함)를 해 준다.</p>
<h2 id="로그인-절차"><a class="header" href="#로그인-절차">로그인 절차</a></h2>
<p>next-auth를 이용해 로그인하면 세션에 값이 자동으로 들어가는 등 상당히 많은 부분들이 자동화된다.</p>
<p>로그인은 authorize()함수 내에서 처리된다.</p>
<p>이 함수에서 뭔가 자료를 리턴하면 로그인된거고, null을 리턴하면 로그인에 실패한거다.</p>
<p>그러니 이 authorize() 함수 내에서 아이디와 비밀번호로 DB 검색을 하고 그 결과를 담은 user 객체를 리턴하면 로그인이 일단 끝난다.</p>
<p>이렇게 리턴된 user 객체는 callback에서 처리된다.</p>
<h3 id="callbacks"><a class="header" href="#callbacks">callbacks</a></h3>
<p>next-auth는 로그인에서 2개의 callback을 제공한다.</p>
<h4 id="jwt-콜백-함수"><a class="header" href="#jwt-콜백-함수">jwt() 콜백 함수</a></h4>
<p>JWT가 생성되거나 업데이트될 때 실행되는데, authorize() 함수에서 값이 리턴되면 바로 JWT를 만들기 때문에 이 콜백함수도 실행된다.</p>
<p>2개의 파라미터를 받는다. token, user 를 받는데,<br />
authorize() 함수에서 로그인 성공 시 리턴된 user 객체가 user 파라미터로 넘어온다.</p>
<pre><code class="language-ts">console.log("[jwt] user = ", user);
</code></pre>
<p>결과</p>
<pre><code>[jwt] user =  {
  id: 'A10001',
  nickname: '교육생 1',
  role_cd: 11
}
</code></pre>
<p>이 값을 전부 token에 넣어주면, user 객체의 값과 jwt 값이 token 안에 다 들어가 세션을 유지하는데 사용할 수 있게 된다.</p>
<pre><code class="language-ts">callbacks: {
    jwt({ token, user }) 
    {
      if (user) 
      {
        token.id = user.id;
        token.nickname = user.nickname;                
        token.role_cd = user.role_cd;
      }
      
      return token;
    },
</code></pre>
<p>token의 type을 바꾸지 않아도 저렇게 잘 된다.</p>
<p>이렇게 하면 다음과 같이 token 값이 나온다. jti 등의 항목이 자동으로 추가되어 있다.</p>
<pre><code>[jwt] token =  {
  sub: 'A10001',
  id: 'A10001',
  nickname: '교육생 1',
  role_cd: 11,
  iat: 1746703602,
  exp: 1749295602,
  jti: '241f89fd-2e2a-424e-bab8-OOXOOXOXOX'
}

[jwt] user =  undefined
</code></pre>
<p>가만 보면 jwt()가 두 번 호출 되는데, 처음엔 user값이 있는 채로, 두 번째는 user 값이 없는 채로 들어온다.</p>
<p>이렇게 jwt() 콜백을 통해 token에 값을 채워 넣으면 이 token 값이 세션에 계속 유지된다.</p>
<p>여기서 리턴하는 token 값이 JWT 객체이다.</p>
<h4 id="session-콜백-함수"><a class="header" href="#session-콜백-함수">session() 콜백 함수</a></h4>
<p>session() 콜백 함수는 로그인할 때는 상관이 없다가 사용자가 세션값을 달라고 하면 그 때 이 session() 함수가 실행된다.</p>
<p>세션값을 달라고 하는 때는 클라이언트 컴퍼넌트가 useSession hook을 사용하거나 server 컴퍼넌트가 getServerSession() 함수를 호출할 때이다.</p>
<p>그래서 그 때마다 session.user 에 값을 채워준다.</p>
<pre><code class="language-ts">async session({ session, token }) 
    {   
      session.user = {
        id : token.id as string,
        nickname: token.nickname as string,
        role_cd: token.role_cd as number
      };

      console.log("[session] session.user = ", session.user);
      
      return session;
    },
  },
</code></pre>
<p>위 log의 결과는 다음과 같다.</p>
<pre><code class="language-ts">[session] session.user =  {
  id: 'A10001',
  nickname: '교육생 1',
  role_cd: 11
}
</code></pre>
<p>jwt() 콜백 함수에서 챙겨놨던 token의 값을 session() 콜백 함수에서 사용하는 모습이다.</p>
<p>처음에 user 의 값은 <code>undefined</code>이다. 여기에 token의 값을 채워 사용하는 것이다.</p>
<p>이렇게 하는 이유는 보안때문이다. token에는 중요한 많은 값들을 보관하고, 화면에 보여지는 값들(만) session.user에 복사해 넣어 사용한다.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="nextauth-튜토리얼"><a class="header" href="#nextauth-튜토리얼">nextauth 튜토리얼</a></h1>
<ul>
<li>next.js 버전: 15.3.52</li>
<li>nextauth 버전 4.24.11</li>
<li>postgresql 버전: 17.4</li>
<li>pg 라이브러리 버전: 8.15.6</li>
<li>작성: 2025. 5. 8.</li>
<li>stuo github에 코드 올림.</li>
</ul>
<h2 id="podman-설정"><a class="header" href="#podman-설정">podman 설정</a></h2>
<h3 id="postgresql-이미지-다운로드"><a class="header" href="#postgresql-이미지-다운로드">postgresql 이미지 다운로드</a></h3>
<pre><code class="language-ps">PS E:\&gt; podman search postgres
NAME                                DESCRIPTION
docker.io/library/postgres          The PostgreSQL object-relational database sy...


PS E:\&gt; podman pull docker.io/library/postgres
Trying to pull docker.io/library/postgres:latest...
Getting image source signatures
</code></pre>
<h3 id="postgresql-실행"><a class="header" href="#postgresql-실행">postgresql 실행</a></h3>
<pre><code class="language-ps">-- 네트워크 설정
podman network create --subnet=172.31.0.0/16 mynet

-- 실행
podman run -d --net mynet --ip 172.31.0.7 --name postgres -p 43432:5432 -p 43022:22 -e POSTGRES_PASSWORD=My:s3Cr3t/ -e TZ=Asia/Seoul docker.io/library/postgres:latest
</code></pre>
<h2 id="db-설정"><a class="header" href="#db-설정">DB 설정</a></h2>
<pre><code class="language-sql">-- user 생성은 생략

root@31dfb447326c:/# su - postgres


postgres@31dfb447326c:~$ psql 
psql (17.4 (Debian 17.4-1.pgdg120+2))
Type "help" for help.


postgres=# create user scott password 'tiger';
CREATE ROLE


postgres=# create database nextauth owner=scott LC_COLLATE='C.utf8' LC_CTYPE='C.utf8' template=template0;
CREATE DATABASE


postgres=# exit


postgres@31dfb447326c:~$ psql -U scott -d nextauth
psql (17.4 (Debian 17.4-1.pgdg120+2))
Type "help" for help.


nextauth=&gt; create table member
(
    id varchar(10) primary key
    , nickname varchar(10) not null
    , pwd varchar(62) not null
    , email varchar(100)
);
CREATE TABLE


-- crypt extension 생성. 로그인 위해
nextauth=&gt; create extension pgcrypto;
CREATE EXTENSION


-- member 하나 추가
nextauth=&gt; insert into member(id, nickname, pwd, email) values 
('user01', 'nickname01', crypt('1234', gen_salt('bf')), 'test@gmail.com');
INSERT 0 1



-- data 테이블 추가하고 데이터 2개 추가. session 테스트 위해.
nextauth=&gt; create table data (id int primary key, title varchar(100) not null);
CREATE TABLE
nextauth=&gt; insert into data (id, title) values (1, 'about next.js');
INSERT 0 1
nextauth=&gt; insert into data (id, title) values (2, 'about react');
INSERT 0 1
</code></pre>
<h2 id="nextjs-프로젝트-생성"><a class="header" href="#nextjs-프로젝트-생성">next.js 프로젝트 생성</a></h2>
<h3 id="프로젝트-생성-3"><a class="header" href="#프로젝트-생성-3">프로젝트 생성</a></h3>
<pre><code class="language-ps">npx create-next-app
√ What is your project named? ... nextauth
√ Would you like to use TypeScript? ... No / Yes
√ Would you like to use ESLint? ... No / Yes
√ Would you like to use Tailwind CSS? ... No / Yes
√ Would you like your code inside a `src/` directory? ... No / Yes
√ Would you like to use App Router? (recommended) ... No / Yes
√ Would you like to use Turbopack for `next dev`? ... No / Yes
√ Would you like to customize the import alias (`@/*` by default)? ... No / Yes
Creating a new Next.js app in D:\test\nextauth001\src\nextauth.

Using npm.

Initializing project with template: app-tw


Installing dependencies:
- react
- react-dom
- next

Installing devDependencies:
- typescript
- @types/node
- @types/react
- @types/react-dom
- @tailwindcss/postcss
- tailwindcss
- eslint
- eslint-config-next
- @eslint/eslintrc


added 436 packages, and audited 437 packages in 54s

165 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
Success! Created nextauth at D:\test\nextauth001\src\nextauth
</code></pre>
<h3 id="nextauthjs-설치"><a class="header" href="#nextauthjs-설치">nextauth.js 설치</a></h3>
<pre><code class="language-ps">PS D:\test\nextauth001\src\nextauth&gt; npm install next-auth

added 14 packages, and audited 451 packages in 9s

169 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities

PS D:\test\nextauth001\src\nextauth&gt; npm list next-auth
nextauth@0.1.0 D:\test\nextauth001\src\nextauth
└── next-auth@4.24.11
</code></pre>
<h3 id="pg-패키지-설치"><a class="header" href="#pg-패키지-설치">pg 패키지 설치</a></h3>
<pre><code class="language-ps">PS D:\test\nextauth001\src\nextauth&gt; npm install pg

added 14 packages, and audited 465 packages in 3s

169 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
PS D:\test\nextauth001\src\nextauth&gt; npm list pg
nextauth@0.1.0 D:\test\nextauth001\src\nextauth
└─┬ pg@8.15.6
  └─┬ pg-pool@3.9.6
    └── pg@8.15.6 deduped

PS D:\test\nextauth001\src\nextauth&gt; npm install --save @types/pg

added 9 packages, and audited 474 packages in 2s

169 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
</code></pre>
<h2 id="테스트-실행"><a class="header" href="#테스트-실행">테스트 실행</a></h2>
<p>프로젝트 폴더에서</p>
<pre><code>npm run dev
</code></pre>
<p><img src="nextauth/img/20250509093037.png" alt="" /></p>
<h3 id="apppagetsx-수정"><a class="header" href="#apppagetsx-수정">app/page.tsx 수정</a></h3>
<p>싸그리 지우고 아래만 남긴다.</p>
<pre><code class="language-ts">export default function Home() {
  return (
    &lt;div&gt;
      nextauth
    &lt;/div&gt;
  );
}
</code></pre>
<p><img src="nextauth/img/20250509093258.png" alt="" /></p>
<h2 id="nextjs에서-pg-접속"><a class="header" href="#nextjs에서-pg-접속">next.js에서 pg 접속</a></h2>
<h3 id="applibdbts"><a class="header" href="#applibdbts">app/lib/db.ts</a></h3>
<p>db관련 처리를 모두 담당할 클래스 생성</p>
<h4 id="pg-사용"><a class="header" href="#pg-사용">pg 사용</a></h4>
<pre><code class="language-ts">// app/lib/db.ts

import pg, { Client } from 'pg'
</code></pre>
<h4 id="인터페이스-생성"><a class="header" href="#인터페이스-생성">인터페이스 생성</a></h4>
<p>DB 테이블(member) 구조와 똑같이 만든다.<br />
다만 pwd는 가져와 쓸 일이 없으니 뺐다.</p>
<pre><code class="language-ts">//app/lib/db.ts

// 인터페이스 생성
export interface SMember
{
    id: string;
    nickname: string;        
    email: string  | null;
}
</code></pre>
<h4 id="클래스-본체"><a class="header" href="#클래스-본체">클래스 본체</a></h4>
<pre><code class="language-ts">class DBMan
{    
    private client: pg.Client;

    constructor()
    {
        this.client = new Client(
            {
                user: 'scott', 
                password: 'tiger',
                host: 'localhost',
                port: 43432,
                database: 'nextauth'
            }
        );

        this.client.connect()
            .then( ()=&gt; {
                console.log("connect 성공");
            })
            .catch( () =&gt; {
                console.log("connect 실패");
            });
    }


     // 멤버정보 가져오기
    public async getMembers()
    {
        const sql = `
            select * from member
            `;
        
        const result = await this.client.query(sql);
  
        const data = result.rows;
        console.log("[db.ts getMembers] result.rows = ", data);

        return data;
    }


    // 연결을 끊는다.
    public async disconnect()
    {
        this.client.end();        
    }
}

export default DBMan;
</code></pre>
<h4 id="db-접속-데이터-가져오기-테스트"><a class="header" href="#db-접속-데이터-가져오기-테스트">DB 접속, 데이터 가져오기 테스트</a></h4>
<p>app/lib/page.tsx 파일 생성</p>
<p>가장 간단하게 DB 테스트하는 방법</p>
<pre><code class="language-ts">// app/lib/page.tsx 파일
// db 연결 테스트 위한 서버 컴퍼넌트

import DBMan, { SMember } from '@/app/lib/db';

export default async function DBTest() {
    const db = new DBMan();
    const members: Array&lt;SMember&gt; = await db.getMembers();
    db.disconnect();
  
    members.forEach(element =&gt; {
      console.log(element.nickname);    
    });
  
    return (
      &lt;div&gt;
        member 테이블 데이터 갯수: {members.length}
      &lt;/div&gt;
    );
}
</code></pre>
<p>실행결과: localhost:3000/<strong>lib</strong> 로 접속</p>
<p><img src="nextauth/img/20250509101540.png" alt="" /></p>
<p>vscode 터미널에 출력된 콘솔 내용</p>
<pre><code class="language-ps"> GET /lib 200 in 141ms
 GET /favicon.ico?favicon.45db1c09.ico 200 in 304ms
 ✓ Compiled in 55ms
 ✓ Compiled /lib in 52ms
connect 성공
[db.ts getMembers] result.rows =  [
  {
    id: 'user01',
    nickname: 'nickname01',
    pwd: '$2a$06--------------------------------가림----------------',
    email: 'test@gmail.com'
  }
]
nickname01
 GET /lib 200 in 177ms
 GET /favicon.ico?favicon.45db1c09.ico 200 in 287ms
</code></pre>
<p>DB 접속 쉽게 잘 되는 것 확인</p>
<h2 id="nextauth를-이용한-로그인"><a class="header" href="#nextauth를-이용한-로그인">nextauth를 이용한 로그인</a></h2>
<p>credentials (아이디, 비밀번호)로 로그인</p>
<h3 id="appapiauthnextauthroutets"><a class="header" href="#appapiauthnextauthroutets">app/api/auth/[…nextauth]/route.ts</a></h3>
<p>nextauth에서 가장 중심이 되는 파일.</p>
<p>실제 폴더명이 <code>[...nextauth]</code> 이다.</p>
<pre><code class="language-ts">// app/api/auth/[...nextauth]/route.ts

import NextAuth from 'next-auth/next'
import CredentialsProvider from 'next-auth/providers/credentials'

const handler = NextAuth({
    providers: [
      CredentialsProvider({
        name: 'Credentials',
        credentials: {
          username: { label: '아이디', type: 'text', placeholder: '아이디 입력' },
          password: { label: '비밀번호', type: 'password', placeholder: '비밀번호 입력' },
        },
  
        async authorize(credentials, req) {
          return null;  // null을 넘기면 실패했다는 뜻이다. 
        },
      }),
    ]
  })
  
export { handler as GET, handler as POST }
</code></pre>
<p>위 코드가 nextauth에서 credentials 방식을 사용할 때 가장 간단한 형태이다.</p>
<p>이 코드는 get 방식을 사용하지 않고 POST 방식을 사용하기 때문에 바로 테스트해볼 수는 없다.</p>
<p><img src="nextauth/img/20250509103426.png" alt="" /></p>
<p>로그인 버튼을 만들고 누르면 로그인이 실행되도록 하자.</p>
<h3 id="로그인-버튼"><a class="header" href="#로그인-버튼">로그인 버튼</a></h3>
<p>app/page.tsx 파일에 로그인 버튼 추가</p>
<pre><code class="language-ts">// app/page.tsx

import { signIn } from "next-auth/react";

export default function Home() {
  return (
    &lt;div&gt;
      nextauth

      {/* 로그인 버튼 추가 */}
      &lt;button onClick={() =&gt; signIn()}&gt;로그인&lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<p><img src="nextauth/img/20250509104905.png" alt="" /></p>
<p>버튼을 누르면 그에 대한 이벤트 핸들링을 해야 하기 때문에 Client component에서만 이 동작이 가능하다. 그러니 app/page.tsx는 원래대로 돌려 놓고 로그인 버튼을 가지는 client component를 만들자.</p>
<p>(물론 page.tsx 파일 맨 위에 “use client“를 적으면 가장 간단하게 해결되지만 클라이언트는 컴퍼넌트로 만들어 추가해 쓰자.)</p>
<pre><code class="language-ts">// app/page.tsx

export default function Home() {
  return (
    &lt;div&gt;
      nextauth
    &lt;/div&gt;
  );
}
</code></pre>
<p>app/<strong>login</strong>/<strong>sign_in_button_c.tsx</strong> 컴퍼넌트를 만들자.</p>
<p>파일명 맨 뒤에 _c 를 붙인 건 이게 client 컴퍼넌트라 구분하기 위해서다.</p>
<p>nextauth에서는 login을 signin 이라 부른다. logout은 signout. 그래서 따라하기로 했다.</p>
<pre><code class="language-ts">// app/login/sign_in_button_c.tsx

"use client";
import React from "react";
import { signIn } from "next-auth/react";

export default function SignInButton_C() {
  return (    
        &lt;div&gt;
            &lt;button onClick={() =&gt; signIn()}&gt;로그인&lt;/button&gt;
        &lt;/div&gt;
  );
}
</code></pre>
<p>이제 이 컴퍼넌트를 사용하도록 app/page.tsx를 수정하자.</p>
<pre><code class="language-ts">// app/page.tsx

import SignInButton_C from "./login/sign_in_button_c";

export default function Home() {
  return (
    &lt;div&gt;
      nextauth

      &lt;SignInButton_C /&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<p><img src="nextauth/img/20250509111049.png" alt="" /></p>
<p>로그인 버튼에 CSS를 주지 않았더니(현재 tailwind 적용 상태) 그냥 텍스트처럼 보이는데 코드를 단순화하기 위해 css 먹이지 않겠음.</p>
<p>로그인 버튼을 누르면 아래와 같이 nextauth가 제공하는 기본 로그인 창이 나온다.</p>
<p><img src="nextauth/img/20250509111205.png" alt="" /></p>
<p><img src="nextauth/img/20250509111308.png" alt="" /></p>
<p>아이디 비번 모두 111을 넣고 [Sign in with Credentials] 버튼을 누르면,</p>
<p><img src="nextauth/img/20250509111322.png" alt="" /></p>
<p>로그인에 실패했다는 메시지를 볼 수 있다.</p>
<p>이거 전부 nextauth가 기본적으로 해주는 거다.</p>
<h3 id="db를-이용한-진짜-로그인"><a class="header" href="#db를-이용한-진짜-로그인">DB를 이용한 진짜 로그인</a></h3>
<p>app/api/auth/[…nextauth]/route.ts 파일을 다시 열어보자.</p>
<p>authorize() 함수에서 어떤 값을 리턴하면 로그인 성공이고 null을 리턴하면 로그인 실패다. 리턴하는 값은 나중에 세션을 구성할 때 쓰이니 아무 값이나 리턴하면 안 된다.</p>
<pre><code class="language-ts">// app/api/auth/[...nextauth]/route.ts 

async authorize(credentials, req) {
          return null;  // null을 넘기면 실패했다는 뜻이다. 
        },
</code></pre>
<p>이 부분을 수정할 거다.</p>
<p>이걸 하려면 먼저 DBMan 클래스에서 login을 처리하는 함수가 있어야 한다.</p>
<pre><code class="language-ts">// app/lib/db.ts

    // 로그인. 결과가 null이면 로그인 실패. 그렇지 않으면 로그인 성공
    public async login(id: string, password: string)
    {
        let sql = `
                select 
                    id
                    , nickname
                    , email
                from 
                    member
                where
                    id = '${id}'
                    and pwd = crypt('${password}', pwd)
                    `;

        const result = await this.client.query(sql);
        const rowcount = result?.rowCount || -1;
        
        if (1 == rowcount)
        {
            const data = result.rows[0];
            return data;        
        }

        return null;
    }
</code></pre>
<p>crypt를 이용해 insert 했으니, crypt를 이용해 where문을 만들어야 한다.</p>
<pre><code class="language-sql"> where pwd = crypt('${password}', pwd)
</code></pre>
<p>와 같은 식으로 where 절을 구성하면 된다.</p>
<p>이제 DB는 준비가 되었으니 authorize 함수를 수정하자.</p>
<p>app/api/auth/[…nextauth]/route.ts 파일의 윗부분에</p>
<pre><code class="language-ts">// app/api/auth/[...nextauth]/route.ts 

import DBMan, { SMember } from '@/app/lib/db';
</code></pre>
<p>을 추가해 DB를 사용하도록 준비하고,</p>
<pre><code class="language-ts">// app/api/auth/[...nextauth]/route.ts 

          async authorize(credentials, req) {
            const db = new DBMan();
            // console.log("credentials?.username", credentials?.username || "");
            // console.log("credentials?.password", credentials?.password || "");
            const member: SMember = await db.login(credentials?.username || "", credentials?.password || "")
            db.disconnect();
    
            console.log("[login] member: ", member);       
            
            if (member != null)
            {
              console.log("[login]로그인 성공. member: ", member);       
              return member;    // 로그인 성공
            }
            else          
            {
              console.log("[login] 로그인 실패: ", credentials?.username);
              return null;  // 로그인 실패
            }
        },
</code></pre>
<p>user01 / 1234 로 로그인해 보자. 틀리게도 해보자.</p>
<p>실패한 경우 로그</p>
<pre><code class="language-ps">connect 성공
[login] member:  null
[login] 로그인 실패:  user01
 POST /api/auth/callback/credentials 302 in 110ms
 GET /api/auth/error?error=CredentialsSignin&amp;provider=credentials 302 in 83ms
 GET /api/auth/signin?error=CredentialsSignin 200 in 79ms
 GET /favicon.ico 200 in 308ms
</code></pre>
<p>성공한 경우 로그</p>
<pre><code class="language-ps">connect 성공
[login] member:  { id: 'user01', nickname: 'nickname01', email: 'test@gmail.com' }
[login]로그인 성공. member:  { id: 'user01', nickname: 'nickname01', email: 'test@gmail.com' }
 POST /api/auth/callback/credentials 302 in 108ms
 GET / 200 in 147ms
 GET /favicon.ico?favicon.45db1c09.ico 200 in 314ms
</code></pre>
<h3 id="custom-로그인-화면"><a class="header" href="#custom-로그인-화면">custom 로그인 화면</a></h3>
<p>로그인 실패 시 메시지를 보여주는 등 좀 더 다양한 로그인 관련 처리를 하려면 아무래도 custom 로그인 화면이 있어야 한다. nextauth가 만들어서 보여주는 로그인 화면을 그대로 쓰는 경우는 없을거다.</p>
<p>이를 위해</p>
<p>app/api/auth/[…nextauth]/route.ts 파일에서 NextAuth() 파라미터로 pages 를 추가해 주면 된다.</p>
<p>providers: 밑에 pages: 를 추가해 주고 signIn() 함수가 호출될 때 이동할 페이지를 적어준다.</p>
<pre><code class="language-ts">// app/api/auth/[...nextauth]/route.ts

    , pages: {
        signIn: '/auth/signin', // Displays signin buttons
        // signOut: '/auth/signout', // Displays form with sign out button
        // error: '/auth/error', // Error code passed in query string as ?error=
        // verifyRequest: '/auth/verify-request', // (used for check email message)
        // newUser: null, // Will disable the new account creation screen
      }
</code></pre>
<p>밑에 여러 종류가 있지만 일단 signIn만 해보자.</p>
<p>여기까지만 하고 다시 [로그인] 버튼을 눌러보면</p>
<p><img src="nextauth/img/20250509132111.png" alt="" /></p>
<p>아까와 달리 NOT FOUND 에러가 난다.</p>
<p>app/api/auth/signin 으로 찾아가야 하는데 그런 폴더가 없어서다.</p>
<p>이제 설정한 것처럼 app/api/auth/signin 폴더를 만들자. 정확한 위치에 폴더가 만들어지지 않으면 dev 서버가 죽기도 한다.</p>
<p>그리고 그 폴더 아래에 page.tsx 파일을 만든다.</p>
<pre><code class="language-ts">// app/api/auth/signin/page.tsx

'use client'
import React, { useRef } from 'react'
import { signIn } from 'next-auth/react'


export default function LoginForm_C() {
    const useridRef = useRef(null)
    const passwordRef = useRef(null)

    const handleSubmit = async () =&gt; {
        //console.log(useridRef.current)
        //console.log(passwordRef.current)

        const result = await signIn('credentials', {
            username: useridRef.current,
            password: passwordRef.current,
            redirect: false,
            callbackUrl: '/',        
        });

        console.log("[Login] result", result);
        
        if (result?.ok == false) 
        {
          location.href = '/';          
        }
        else
        {
          alert("로그인에 실패했습니다.");
        }
    }

  return (    
        &lt;div&gt;
          &lt;label&gt;아이디&lt;/label&gt;&lt;input ref={useridRef} onChange={(e: any) =&gt; {useridRef.current = e.target.value}} id='id' name='id' type='text' required autoFocus={true} /&gt;
          &lt;label&gt;비밀번호&lt;/label&gt;&lt;input ref={passwordRef} onChange={(e: any) =&gt; {passwordRef.current = e.target.value}} id='password' name='password' type='password' required /&gt;
          
          &lt;button onClick={handleSubmit}&gt;로그인&lt;/button&gt;
        &lt;/div&gt;
  )
}
</code></pre>
<p>이제 로그인 버튼을 누르면 <code>app/api/auth/signin/page.tsx</code> 파일의 내용이 보여진다.</p>
<p><img src="nextauth/img/20250509133454.png" alt="" /></p>
<p>역시나 css 때문에 input box 의 테두리가 안 그려지고 있다.</p>
<p><img src="nextauth/img/20250509143333.png" alt="" /></p>
<p>로그인에 성공하면 <code>/</code>로 이동하고, 실패하면 에러메시지가 나온다.</p>
<p><img src="nextauth/img/20250509133752.png" alt="" /></p>
<p>signIn() 함수를 호출하면서 다양한 파라미터를 넘기는데, 그 중 redirect를 true로 세팅하면, 로그인 실패 시 그 자리에 가만히 있고, 성공하면 callbackUrl 에서 정해준 위치로 이동하게 된다.</p>
<p>뭔가 다른 옵션을 좀 더 찾아볼 필요가 있겠다.</p>
<p>하지만 일단은 내가 원하는대로 조정하려면 redirect를 false로 놓고 그 아래에서 결과에 따라 (await 하니까) 그에 맞는 처리를 해주었다.</p>
<h2 id="세션-처리"><a class="header" href="#세션-처리">세션 처리</a></h2>
<p>nextauth는 기본적으로 로그인한 결과를 세션에 넣어주고 JWT(JSON Web Token) 값까지 만들어준다. 아무 것도 안해도 세션에 값이 이미 들어가 있는거다.</p>
<p>만약 세션에 저장되는 값을 (당연하게도) 바꾸고 싶다면 <code>app/api/auth/[...nextauth]/route.ts</code> 파일에서 이번에는 callbacks: 를 추가해야 한다.</p>
<p>nextauth는 2개의 callbacks를 제공한다.</p>
<ul>
<li>jwt() : <a href="nextauth/./nextauth.html#jwt-%EC%BD%9C%EB%B0%B1-%ED%95%A8%EC%88%98">jws callback</a> 참조</li>
<li>session() : <a href="nextauth/./nextauth.html#session-%EC%BD%9C%EB%B0%B1-%ED%95%A8%EC%88%98">session callback</a> 참조</li>
</ul>
<p>pages 밑에 callbacks: 를 추가해 보자.</p>
<h3 id="jwt-콜백"><a class="header" href="#jwt-콜백">jwt() 콜백</a></h3>
<p>우선 jwt()를 추가한다.</p>
<pre><code class="language-ts">// app/api/auth/signin/page.tsx

    , callbacks: 
    {
        jwt({ token, user }) 
        {
          console.log("\n\n");
          console.log("------------------- [jwt callback] -------------------");
          console.log("[jwt] token = ", token, "\n");
          console.log("[jwt] user = ", user);
                    
          return token;
        }
    }
</code></pre>
<p>이렇게 해 놓고 로그인을 해보자.
jwt()는 JWT가 생성되거나 업데이트될 때 실행되는데, authorize() 함수에서 값이 리턴되면 이 값을 기반으로 바로 JWT를 만들기 때문에 이 jwt() 콜백함수도 실행된다.</p>
<p>이렇게 놓고 로그인이 성공하면 jwt()로 넘어오는 값이 어떤 값들인지 vscode의 terminal에 출력된 로그로 확인하자.</p>
<pre><code class="language-ps">------------------- [jwt callback] -------------------
[jwt] token =  {
  name: undefined,
  email: 'test@gmail.com',
  picture: undefined,
  sub: 'user01'
}

[jwt] user =  { id: 'user01', nickname: 'nickname01', email: 'test@gmail.com' } 
</code></pre>
<p>token을 가만 보면, member 객체가 가지고 있는 것 중 token이 기존에 가지고 있던 항목  중 하나인 email 항목에 자동으로 들어와 있는 걸 확인할 수 있다. 그리고 <code>sub</code> 항목(subject)에 id 값인 ’user01’이 들어가 있는 것도 볼 수 있다.</p>
<p>nickname은 token의 기존 항목에 없는 항목이라 아무 데에도 들어가 있지 않다.</p>
<pre><code class="language-ts">// app/api/auth/signin/page.tsx

if (member != null)
{
  console.log("[login]로그인 성공. member: ", member);       
  return member;    // 로그인 성공
}
</code></pre>
<p>위와 같이 authorize() 함수 내에서 로그인 성공 시 이렇게 리턴한 member 객체가 jwt() 함수의 user 객체로 그대로 들어와 있다.</p>
<p>여기서 쓸 값은 token이니까 token에 user의 값을 옮겨담고 기타 더 필요한 게 있으면 token에 적어주면 된다.</p>
<p>jwt() 함수를 아래처럼 조금 더 고쳤다.</p>
<pre><code class="language-ts">// app/api/auth/signin/page.tsx

    , callbacks: 
    {
        jwt({ token, user }) 
        {
            console.log("\n\n");
            console.log("------------------- [jwt callback] -------------------");
            console.log("[jwt] token = ", token, "\n");
            console.log("[jwt] user = ", user);

            if (user) 
            {
                token.id = user.id;
                token.nickname = user.nickname;
                token.email = user.email;
            }
            
            return token;
        }
    }
</code></pre>
<p>vscode에서 user에는 nickname이라는 값이 없다고 아래처럼 빨간 밑줄을 보여 줄거다. 당장은 큰 에러가 나지는 않으니 이 문제는 <a href="nextauth/nextauth_001.html#sessionuser%EC%9D%98-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EA%B5%AC%EC%A1%B0-%EB%B3%80%EA%B2%BD">나중에 해결</a> 하자.</p>
<p><img src="nextauth/img/20250509141949.png" alt="" /></p>
<p>여기까지 로그인하는 순간 nextauth가 JWT 값을 생성하고, 그래서 그 때 jwt() 함수가 콜백되어 token에 값을 쓸 수 있게 되었다.</p>
<p>이 값은 nextauth가 잘 보관하고 있다.</p>
<h3 id="session-콜백"><a class="header" href="#session-콜백">session() 콜백</a></h3>
<p>이제 nextauth가 가지고 있던 토큰 값을 사용할 떄가 되었다. 사용자가 session에 저장된 값을 원하면 그 때 session() 콜백이 일어난다.</p>
<p>구체적으로는 client component가 useSession 훅을 이용하거나 server component가 getServerSession() 함수를 호출할 때다.</p>
<p>jwt() 함수에서 token에 값이 잘 들어갔는지, 정확히는 어떤 값이 들어갔는지 확인하기 위해서라도 session() 콜백 함수를 만들어보자.</p>
<p>callbacks: 안에 jwt() 함수 아래에 session() 함수를 추가한다.</p>
<pre><code class="language-ts">// app/api/auth/signin/page.tsx

, async session({ session, token }) 
{
  console.log("\n\n");
  console.log("------------------- [session] -------------------");
  console.log("[session] session = ", session);
  console.log("[session] token = ", token);
  
  return session;
}
</code></pre>
<p>이렇게 추가하고 로그인을 해도 session() 함수 콜백은 일어나지 않는다. (로그에 아무것도 안나온다) 아무데서도 세션을 이용하지 않고 있으니까.</p>
<p>이제 nextauth에서 제공하는 세션을 이용해 보자.</p>
<h3 id="nextauth-session"><a class="header" href="#nextauth-session">nextauth session</a></h3>
<p>app/login/sign_in_button_c.tsx 파일을 수정하자. session 값을 확인해서 로그인 된 상태면 로그아웃 버튼을 보여주고, 그렇지 않으면 로그인 버튼을 보여주도록 고치려 한다. 그리고 로그인 되어 있는 상태면 nickname도 보여주자.</p>
<p>react의 useSession 훅을 사용해야 한다. 그러기 위해 client component여야 한다. 우리는 이 컴퍼넌트를 client 컴퍼넌트로 만들었었다.</p>
<p>import 부분을 이렇게 바꾼다.</p>
<pre><code class="language-ts">// app/login/sign_in_button_c.tsx

import { signIn, signOut, useSession } from "next-auth/react";
</code></pre>
<p>app/login/sign_in_button_c.tsx 파일의 전체 코드는 다음과 같다.</p>
<pre><code class="language-ts">// app/login/sign_in_button_c.tsx

"use client";
import React from "react";
import { signIn, signOut, useSession } from "next-auth/react";

export default function SignInButton_C() {
  const { data: session } = useSession();

  if (session &amp;&amp; session.user)
  {
      return (
          &lt;span onClick={() =&gt; signOut()}&gt;{session.user.nickname}님 로그아웃&lt;/span&gt;
      );
  }
  else
  {
    return (
          &lt;span onClick={() =&gt; signIn()}&gt;로그인&lt;/span&gt;
    );
  }    
}
</code></pre>
<p>여기까지 수정하고 <code>/</code> 페이지로 가면(http://localhost:3000)</p>
<p><img src="nextauth/img/20250509144332.png" alt="" /></p>
<p>useSession 쓸 꺼면 &lt;SessionProvider&gt; 로 감싸야 한단다.</p>
<p>그럼 Provider를 만들어 보자.</p>
<p>app/login/providers.tsx 파일을 생성하자.</p>
<pre><code class="language-ts">// app/login/providers.tsx

"use client";

import { SessionProvider } from "next-auth/react";
import React, { ReactNode } from "react";

interface Props 
{
  children: ReactNode;
}

export default function Providers({ children }: Props) 
{
  return (
    &lt;SessionProvider&gt;{children}&lt;/SessionProvider&gt;
  );
}
</code></pre>
<p>그냥 {children}을 &lt;SessionProvider&gt;로 감싸기만 한다.</p>
<p>이제 우리의 SingInButton_C 컴퍼넌트를 감싸기 위해 app/page.tsx 파일을 수정하자.</p>
<pre><code class="language-ts">// app/page.tsx

import Providers from "./login/providers";
import SignInButton_C from "./login/sign_in_button_c";

export default function Home() {
  return (
    &lt;div&gt;
      nextauth
      &lt;Providers&gt;
        &lt;SignInButton_C /&gt;
      &lt;/Providers&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<p>세션을 사용하는 모든 곳이 감싸지도록 해야 한다. 그래서 대부분 &lt;Providers&gt; 컴퍼넌트를 return 문의 맨 위와 아래에서 사용한다.</p>
<p>만약 providers를 server component로 만들면(맨 위에 “use client”; 하지 않으면) 아래와 같은 에러를 보게 된다.</p>
<p><img src="nextauth/img/20250509145043.png" alt="" /></p>
<p>여기까지 진행하면,</p>
<p><img src="nextauth/img/20250509145211.png" alt="" /></p>
<p>이렇게 나온다.</p>
<p><code>session.user.nickname</code> 부분에 값이 나오지 않다는 걸 알 수 있다.</p>
<p>이제 다시 vscode 터미널의 로그 값을 확인해 보자.</p>
<pre><code class="language-ps">------------------- [jwt callback] -------------------
[jwt] token =  {
  email: 'test@gmail.com',
  sub: 'user01',
  id: 'user01',
  nickname: 'nickname01',
  iat: 1746768710,
  exp: 1749360710,
  jti: '02e24704-ae76-4333-b8ee-163d5dbcde40'
}

[jwt] user =  undefined



------------------- [session] -------------------
[session] session =  {
  user: { name: undefined, email: 'test@gmail.com', image: undefined },
  expires: '2025-06-08T05:50:56.023Z'
}
[session] token =  {
  email: 'test@gmail.com',
  sub: 'user01',
  id: 'user01',
  nickname: 'nickname01',
  iat: 1746768710,
  exp: 1749360710,
  jti: '02e24704-ae76-4333-b8ee-163d5dbcde40'
}
</code></pre>
<p>로그인할 때마다 jwt() 함수가 콜백되어 로그에 나왔고, 로그인에 성공하면 <code>/</code>로 가도록 했는데 그럼 app/page.tsx를 호출한 거고, 거기서 useSession 훅을 사용하니 session() 함수가 콜백되었다. 그래서 세션 로그가 남은 것.</p>
<p>이 로그를 자세히 보면 파라미터로 넘어온 token에는 jwt() 함수 콜백때 적은 값이 그대로 있고, session.user는 처음 로그인했을 때 봤던 것과 같은 상태라는 걸 알 수 있다.</p>
<p>그리고 한 가지 더 알 수 있는 건 token에 jti(JWT ID)에 값이 들어가 있다는 거다. 이는 JWT를 구분하는데 사용된다. 만약 이상한 행동을 하는 사용자가 있으면 이 jti를 넘기는 사용자는(사용자 특정) 더 이상 아무 것도 하지 못하게 막을 수도 있다.</p>
<p>누군가 session 값을 요구하면 화면에 보여줄 내용들만 session.user에 담아 주자. 보안을 위해.</p>
<p>이제 app/login/sign_in_button_c.tsx 파일에서 <code>session.user.nickname</code> 값이 보이지 않았던 문제를 해결할 수 있을 거 같다.</p>
<pre><code class="language-ts">, async session({ session, token }) 
{
  console.log("\n\n");
  console.log("------------------- [session] -------------------");
  console.log("[session] session = ", session);
  console.log("[session] token = ", token);

  session.user = {
    id : token.id as string,
    nickname: token.nickname as string,
  };
  
  return session;
}
</code></pre>
<p>이렇게 session.user 값을 재설정해주면 로그인한 사람의 nickname을 제대로 보여준다.</p>
<p><img src="nextauth/img/20250509152900.png" alt="" /></p>
<p>음.. 화면 보여지는 부분을 최소화하려니 이런 참사가.</p>
<p>암튼 여기까지 세션값에 따라 로그인과 로그아웃 버튼이 나오는 걸 확인할 수 있다.</p>
<h2 id="로그인한-사람만-볼-수-있는-페이지"><a class="header" href="#로그인한-사람만-볼-수-있는-페이지">로그인한 사람만 볼 수 있는 페이지</a></h2>
<p>로그인한 사람만 볼 수 있는 페이지를 만들어 보겠다. 먼저 Restful API 서비스를 만들고 거기에 제한을 걸어보려 한다.</p>
<h3 id="api-서비스-만들기"><a class="header" href="#api-서비스-만들기">API 서비스 만들기</a></h3>
<p>data 테이블의 값을 읽어서 보여주는 서비스를 만들어 보자.</p>
<p>먼저 DB에서 data 테이블의 값을 모두 가져오는 함수를 만들어야 한다. DBMan 클래스를 수정하자.</p>
<pre><code class="language-ts">// app/lib/db.ts

    // 데이터 가져오기
    public async getData()
    {
        const sql = `
            select * from data
            `;
        
        const result = await this.client.query(sql);
  
        const data = result.rows;
        console.log("[db.ts getData] result.rows = ", data);

        return data;
    }
</code></pre>
<p>위와 같이 DBMan 클래스에 함수를 추가한다.</p>
<p>다음으로 app/api/data/route.ts 파일을 만들고 다음과 같이 작성하자.</p>
<pre><code class="language-ts">// app/api/data/route.ts

import { NextRequest, NextResponse } from 'next/server';
import DBMan from '@/app/lib/db';

export async function GET(req: NextRequest) 
{  
  const db = new DBMan();
  const data = await db.getData();
  db.disconnect();

  return NextResponse.json(data);
}
</code></pre>
<p>data 테이블의 모든 내용을 보여주는 restful 서비스다.</p>
<p><img src="nextauth/img/20250509154304.png" alt="" /></p>
<p>data 테이블의 모든 내용을 json 형태로 리턴해준다.</p>
<pre><code class="language-json">[{"id":1,"title":"about next.js"},{"id":2,"title":"about react"}]
</code></pre>
<p>이 서비스의 문제는 로그인하지 않아도 아무나 이 사이트에 접속해 데이터를 볼 수 있다는 거다. 이제 여기에 로그인한 사람만 내용을 볼 수 있도록 수정해 보자.</p>
<p>route.ts는 서버 컴퍼넌트니까 useSession이 아니라 getServerSession() 함수를 이용해야 한다.</p>
<p>app/api/data/route.ts 파일을 수정해 보자.</p>
<pre><code class="language-ts">import { NextRequest, NextResponse } from 'next/server';
import DBMan from '@/app/lib/db';

import { getServerSession } from 'next-auth';

export async function GET(req: NextRequest) 
{  
    const session = await getServerSession();
    console.log("\n\n[data/route.ts] session = ", session, "\n");

    const db = new DBMan();
    const data = await db.getData();
    db.disconnect();

    return NextResponse.json(data);
}
</code></pre>
<p>이렇게 하고 로그인 한 다음</p>
<p><code>http://localhost:3000/api/data</code> 에 접속하면 브라우저에서는 아무 문제가 없는 거 같은데 vscode 의 터미널에 나온 로그는 난리가 났다.</p>
<pre><code class="language-ps">[next-auth][error][JWT_SESSION_ERROR] 
https://next-auth.js.org/errors#jwt_session_error decryption operation failed {
  message: 'decryption operation failed',
  stack: 'JWEDecryptionFailed: decryption operation failed\n' +
    '    at gcmDecrypt (D:\\test\\nextauth001\\src\\nextauth\\.next\\server\\chunks\\node_modules_jose_dist_node_cjs_b4a80197._.js:769:15)\n' 

    ... 20줄 정도 나온 거 삭제함.
    
  name: 'JWEDecryptionFailed'
}


[data/route.ts] session =  null
</code></pre>
<p>우선 제일 처음 드는 생각은 아.. &lt;Proders&gt; 를 page.tsx가 아니라 layout.tsx에서 사용해야 겠구나. 였지만 일단 그 문제는 아닌거 같다.</p>
<p>getServerSession() 함수는 중요한 인자를 하나 받는다. 여태 클라이언트 컴퍼넌트에서 useSession 훅을 사용할 때는 큰 문제없이 쓸 수 있을 줄 알았는데 서버 컴퍼넌트에서 사용하기 위해서는 nextauth를 좀 더 제대로 설정해야 한다. getServerSession() 함수에 authOptions 인자를 추가하면서 nextauth를 좀 더 제대로, 보안을 강화해 가며 사용해 보자.</p>
<p>여태 우리는 app/api/auth/[…nextauth]/route.ts 파일에서 NextAuth() 함수에 복잡한 값을 파라미터로 던져줬다.</p>
<p>getServerSession() 함수에서 필수인 파라미터인 authOptions: AuthOptions 의 값이 바로 NextAuth() 함수에 넘겨준 값이었다.</p>
<p>그러니까 const authOptions = {} 과 같이 값이 설정해 주고,</p>
<pre><code class="language-ts">const handler = NextAuth(authOptions) 
</code></pre>
<p>와 같이 넘겨주면 되는 거였다.</p>
<p>이렇게 수정한 버전이 다음과 같다.</p>
<pre><code class="language-ts">// app/api/auth/[...nextauth]/route.ts

import NextAuth from 'next-auth/next'
import CredentialsProvider from 'next-auth/providers/credentials'
import DBMan, { SMember } from '@/app/lib/db';
import { AuthOptions } from 'next-auth';

export const authOptions: AuthOptions = {
  providers: [
    CredentialsProvider({
      name: 'Credentials',
      credentials: {
        username: { label: '아이디', type: 'text', placeholder: '아이디 입력' },
        password: { label: '비밀번호', type: 'password', placeholder: '비밀번호 입력' },
      },

      async authorize(credentials, req) {
          const db = new DBMan();
          // console.log("credentials?.username", credentials?.username || "");
          // console.log("credentials?.password", credentials?.password || "");
          const member: SMember = await db.login(credentials?.username || "", credentials?.password || "")
          db.disconnect();
  
          console.log("[login] member: ", member);       
          
          if (member != null)
          {
            console.log("[login]로그인 성공. member: ", member);       
            return member;    // 로그인 성공
          }
          else          
          {
            console.log("[login] 로그인 실패: ", credentials?.username);
            return null;  // 로그인 실패
          }
      },
    }),
  ] 

  , pages: 
  {
      signIn: '/auth/signin', // Displays signin buttons
      // signOut: '/auth/signout', // Displays form with sign out button
      // error: '/auth/error', // Error code passed in query string as ?error=
      // verifyRequest: '/auth/verify-request', // (used for check email message)
      // newUser: null, // Will disable the new account creation screen
  }
  
  , callbacks: 
  {
      jwt({ token, user }) 
      {
          console.log("\n\n");
          console.log("------------------- [jwt callback] -------------------");
          console.log("[jwt] token = ", token, "\n");
          console.log("[jwt] user = ", user);

          if (user) 
          {
              token.id = user.id;
              token.nickname = user.nickname;
              token.email = user.email;
          }
          
          return token;
      }

      , async session({ session, token }) 
      {
        console.log("\n\n");
        console.log("------------------- [session] -------------------");
        console.log("[session] session = ", session);
        console.log("[session] token = ", token);

        session.user = {
          id : token.id as string,
          nickname: token.nickname as string,
        };
        
        return session;
      }
  }
};

const handler = NextAuth(authOptions)
  
export { handler as GET, handler as POST }
</code></pre>
<p>이것만으로는 아직 getServerSession() 함수가 정상동작하지 않는다. JWT가 서명하기 위해 필요한 키를 입력해 줘야 한다.</p>
<p>원리를 알기 위해 아래와 같이 수동으로 할 수도 있지만 <a href="nextauth/./nextauth_001.html#%EC%9E%90%EB%8F%99%EC%9C%BC%EB%A1%9C-envlocal-%ED%8C%8C%EC%9D%BC-%EB%A7%8C%EB%93%A4%EA%B8%B0%EC%B6%94%EC%B2%9C">자동으로 하는 걸</a> 추천한다.</p>
<h4 id="수동으로-env-파일-만들기비추"><a class="header" href="#수동으로-env-파일-만들기비추">수동으로 .env 파일 만들기(비추)</a></h4>
<p>프로젝트 루트 폴더(D:\test\nextauth001\src\nextauth)에 <code>.env</code> 파일을 하나 생성하고, 그 파일에 다음과 같이 적는다.</p>
<pre><code class="language-ts">// 프로젝트 루트 폴더 / .env

NEXTAUTH_SECRET=asdflkajweofjaweofawjawofj902384fawoeijfawoefjq2398fjsadffj0234jfalweka
</code></pre>
<h4 id="자동으로-envlocal-파일-만들기추천"><a class="header" href="#자동으로-envlocal-파일-만들기추천">자동으로 .env.local 파일 만들기(추천)</a></h4>
<p>출처: <a href="https://authjs.dev/getting-started/installation#setupenvirontment" title="" target="_blank">https://authjs.dev/getting-started/installation</a></p>
<p>위에 수동으로 만드는 거랑 (자동으로 만들어진) 파일명이 다른 데도 같은 코드로 사용이 가능하다.</p>
<p>프로젝트 루트에서 다음을 실행한다.</p>
<pre><code class="language-ps">npx auth secret
</code></pre>
<p>실제 실행결과는 다음과 같다.</p>
<pre><code class="language-ps">PS E:\test\nextauth001\src\nextauth&gt; npx auth secret
Need to install the following packages:
auth@1.2.3
Ok to proceed? (y) y

📝 Created E:\test\nextauth001\src\nextauth\.env.local with `AUTH_SECRET`.
PS E:\github-stuousk\nextauth001\src\nextauth&gt;
</code></pre>
<p>만들어진 <code>.env.local</code> 파일의 내용은 다음과 같다.</p>
<pre><code>AUTH_SECRET="KFcZVCNUH3bAJBRXRVhJLx9Gp0qTb2eZheErE6Exy8A=" # Added by `npx auth`. Read more: https://cli.authjs.dev
</code></pre>
<p>next.js를 처음 만들면 .gitignore에 <code>.env*</code>이 포함되어 있다. 그래서 git에 올라가지 않는게 기본이다.</p>
<pre><code class="language-txt"># env files (can opt-in for committing if needed)
.env*
</code></pre>
<p>그래도 <code>git status</code> 등을 통해 이게 혹시 git 서버로 올라가지는 않는지 확인해야 한다.
저 키는 JWT 서명할 때 사용하는 키라 외부로 나가면 안 된다.</p>
<h4 id="만들어진-키-사용하기"><a class="header" href="#만들어진-키-사용하기">만들어진 키 사용하기</a></h4>
<p>자동으로 만들었건 수동으로 만들었건 이 키를 사용하도록 app/api/auth/[…nextauth]/route.ts 파일의 authOptions에 추가해야 한다.</p>
<pre><code class="language-ts">// app/api/auth/[...nextauth]/route.ts

, secret: process.env.NEXTAUTH_SECRET
</code></pre>
<p>를 추가한다.</p>
<p>여기까지 한 전체 코드는 다음과 같다.</p>
<pre><code class="language-ts">// app/api/auth/[...nextauth]/route.ts

import NextAuth from 'next-auth/next'
import CredentialsProvider from 'next-auth/providers/credentials'
import DBMan, { SMember } from '@/app/lib/db';
import { AuthOptions } from 'next-auth';

export const authOptions: AuthOptions = {
  providers: [
    CredentialsProvider({
      name: 'Credentials',
      credentials: {
        username: { label: '아이디', type: 'text', placeholder: '아이디 입력' },
        password: { label: '비밀번호', type: 'password', placeholder: '비밀번호 입력' },
      },

      async authorize(credentials, req) {
          const db = new DBMan();
          // console.log("credentials?.username", credentials?.username || "");
          // console.log("credentials?.password", credentials?.password || "");
          const member: SMember = await db.login(credentials?.username || "", credentials?.password || "")
          db.disconnect();
  
          console.log("[login] member: ", member);       
          
          if (member != null)
          {
            console.log("[login]로그인 성공. member: ", member);       
            return member;    // 로그인 성공
          }
          else          
          {
            console.log("[login] 로그인 실패: ", credentials?.username);
            return null;  // 로그인 실패
          }
      },
    }),
  ]
  
  , secret: process.env.NEXTAUTH_SECRET

  , pages: 
  {
      signIn: '/auth/signin', // Displays signin buttons
      // signOut: '/auth/signout', // Displays form with sign out button
      // error: '/auth/error', // Error code passed in query string as ?error=
      // verifyRequest: '/auth/verify-request', // (used for check email message)
      // newUser: null, // Will disable the new account creation screen
  }
  
  , callbacks: 
  {
      jwt({ token, user }) 
      {
          console.log("\n\n");
          console.log("------------------- [jwt callback] -------------------");
          console.log("[jwt] token = ", token, "\n");
          console.log("[jwt] user = ", user);

          if (user) 
          {
              token.id = user.id;
              token.nickname = user.nickname;
              token.email = user.email;
          }
          
          return token;
      }

      , async session({ session, token }) 
      {
        console.log("\n\n");
        console.log("------------------- [session] -------------------");
        console.log("[session] session = ", session);
        console.log("[session] token = ", token);

        session.user = {
          id : token.id as string,
          nickname: token.nickname as string,
        };
        
        return session;
      }
  }
};

const handler = NextAuth(authOptions)
  
export { handler as GET, handler as POST }
</code></pre>
<p>이제 다시 app/api/data/route.ts 파일을 수정해 위에 수정한 authOptions를 getServerSession() 함수에 파라미터로 넘기도록 해보자.</p>
<pre><code class="language-ts">import { NextRequest, NextResponse } from 'next/server';
import DBMan from '@/app/lib/db';

import { getServerSession } from 'next-auth';
import { authOptions } from '@/app/api/auth/[...nextauth]/route';

export async function GET(req: NextRequest) 
{  
    console.log("authOptions: ", authOptions);
    console.log("process.env.NEXTAUTH_SECRET: ", process.env.NEXTAUTH_SECRET);
    
    const session = await getServerSession(authOptions);
    console.log("\n\n[data/route.ts] session = ", session, "\n");

    const db = new DBMan();
    const data = await db.getData();
    db.disconnect();

    return NextResponse.json(data);
}
</code></pre>
<p>다시 로그인하자. 그리고 <code>http://localhost:3000/api/data</code>에 접속한다.</p>
<p>이제 로그를 보면 다음과 같이 서버에서도 값을 제대로 가져오고 있다는 것을 알 수 있다.</p>
<pre><code class="language-ps">authOptions:  {
  providers: [
    {
      id: 'credentials',
      name: 'Credentials',
      type: 'credentials',
      credentials: [Object],
      authorize: [Function: authorize],
      options: [Object]
    }
  ],
  secret: 'asdflkajweofjaweofawjawofj902384fawoeijfawoefjq2398fjsadffj0234jfalweka',
  pages: { signIn: '/auth/signin' },
  callbacks: { jwt: [Function: jwt], session: [AsyncFunction: session] }
}
process.env.NEXTAUTH_SECRET:  asdflkajweofjaweofawjawofj902384fawoeijfawoefjq2398fjsadffj0234jfalweka



------------------- [jwt callback] -------------------
[jwt] token =  {
  email: 'test@gmail.com',
  sub: 'user01',
  id: 'user01',
  nickname: 'nickname01',
  iat: 1746779367,
  exp: 1749371367,
  jti: 'b057cd20-d9e4-4df6-880a-cb4c3b619be7'
}

[jwt] user =  undefined



------------------- [session] -------------------
[session] session =  {
  user: { name: undefined, email: 'test@gmail.com', image: undefined },
  expires: '2025-06-08T08:29:32.449Z'
}
[session] token =  {
  email: 'test@gmail.com',
  sub: 'user01',
  id: 'user01',
  nickname: 'nickname01',
  iat: 1746779367,
  exp: 1749371367,
  jti: 'b057cd20-d9e4-4df6-880a-cb4c3b619be7'
}


[data/route.ts] session =  { user: { id: 'user01', nickname: 'nickname01' } }

connect 성공
[db.ts getData] result.rows =  [ { id: 1, title: 'about next.js' }, { id: 2, title: 'about react' } ]
</code></pre>
<p>이제 session 값이 없으면 튕겨내면 된다.</p>
<pre><code class="language-ts">import { NextRequest, NextResponse } from 'next/server';
import DBMan from '@/app/lib/db';

import { getServerSession } from 'next-auth';
import { authOptions } from '@/app/api/auth/[...nextauth]/route';

export async function GET(req: NextRequest) 
{      
    const session = await getServerSession(authOptions);
    console.log("\n\n[data/route.ts] session = ", session, "\n");

    if (session)
    {
        const db = new DBMan();
        const data = await db.getData();
        db.disconnect();

        return NextResponse.json(data);
    }
    else
    {
        return NextResponse.json("권한 없음");
    }
}
</code></pre>
<p>다시 로그인하자. 그리고 <code>http://localhost:3000/api/data</code>에 접속해 보자.</p>
<pre><code class="language-ps">[data/route.ts] session =  { user: { id: 'user01', nickname: 'nickname01' } }
</code></pre>
<p>로그인하면 session에 값이 제대로 들어온다.</p>
<p><img src="nextauth/img/20250509174300.png" alt="" /></p>
<p>로그아웃하고 <code>http://localhost:3000/api/data</code>에 접속하면 위와 같은 메시지만 나오고 데이터는 보여주지 않는다.</p>
<p>getServerSession() 함수를 이용하면 내부적으로 JWT의 서명부분을 자동으로 확인해준다. 암호화하고 복호화하기 위해 authOptions에 NEXTAUTH_SECRET 가 필요했던 것.</p>
<h2 id="sessionuser의-데이터-구조-변경"><a class="header" href="#sessionuser의-데이터-구조-변경">Session.User의 데이터 구조 변경</a></h2>
<p>app/api/auth/[…nextauth]/route.ts 파일에서 jwt() 콜백 함수 내에서 아래와 같이 나타나는 걸 볼 수 있다. typescript에서는 이 문제를 해결해야 한다.</p>
<p><img src="nextauth/img/20250509141949.png" alt="" /></p>
<p>Session.user는 {id, name, email}으로 구성되어 있다. 그래서 nickname이 없다고 저렇게 빨간색으로 나오는 거다.</p>
<p>이 문제는 Session.user의 타입을 새로 정의해 주면 된다.</p>
<p>app/types 폴더를 하나 만들자.</p>
<p>그 안에 next-auth.d.ts 파일을 생성하자.</p>
<pre><code class="language-ts">// app/types/next-auth.d.ts

import NextAuth from "next-auth"

declare module "next-auth" {
  interface Session {
    user: {
        id: string;
        nickname: string;        
        email: string | null;
    }
  }

  // jwt() 콜백 함수에 들어가는 user 파라미터 구조 변경
  interface User {
    id: string;
    nickname: string;    
    email: string | null;
  }

}
</code></pre>
<p>이렇게 타입을 재정의해주면 된다.</p>
<p><img src="nextauth/img/20250509202909.png" alt="" /></p>
<p>이제 빨간 줄이 없어졌다.</p>
<p><img src="nextauth/img/20250509203022.png" alt="" /></p>
<p>새롭게 여기에 빨간 줄이 새로 생겼는데, 이건 Session.user에 email이 있는데 들어가지 않아서 생긴거다.</p>
<p>이거마저 안나오게 하고 싶다면</p>
<pre><code class="language-ts">email?: string | null;
</code></pre>
<p>이렇게 해주면 된다.</p>
<pre><code class="language-ts">// app/types/next-auth.d.ts

import NextAuth from "next-auth"

declare module "next-auth" {
  interface Session {
    user: {
        id: string;
        nickname: string;        
        email?: string | null;
    }
  }

  // jwt() 콜백 함수에 들어가는 user 파라미터 구조 변경
  interface User {
    id: string;
    nickname: string;    
    email?: string | null;
  }
}
</code></pre>
<p>이렇게 해주면 모든 문제가 해결된다.</p>
<h2 id="providers-위치-다시-잡기"><a class="header" href="#providers-위치-다시-잡기">Providers 위치 다시 잡기</a></h2>
<p>현재 &lt;Providers&gt; 는 app/page.tsx 파일 내에 있다. 이게 전역적으로 다 감싸지려면 app/layout.tsx 파일 내에 있어야 한다.</p>
<p>app/page.tsx 파일 내에서 <code>&lt;Providers&gt;</code> 컴퍼넌트를 없앤다.</p>
<pre><code class="language-ts">// app/page.tsx

import SignInButton_C from "./login/sign_in_button_c";

export default function Home() {
  return (
    &lt;div&gt;
      nextauth
      &lt;SignInButton_C /&gt;      
    &lt;/div&gt;
  );
}
</code></pre>
<p>그리고 app/layout.tsx 파일 내에서 <code>&lt;Providers&gt;</code> 컴퍼넌트로 {Children}을 감싼다.</p>
<pre><code class="language-ts">// app/layout.tsx

&lt;Providers&gt;
{children}
&lt;/Providers&gt;
</code></pre>
<h2 id="빌드-문제-해결"><a class="header" href="#빌드-문제-해결">빌드 문제 해결</a></h2>
<p>이제 다 완성했다 생각하고</p>
<pre><code class="language-ps">npm run build
</code></pre>
<p>하면 많은 에러를 보게 된다. 하나씩 해결해 보자.</p>
<pre><code class="language-ps">PS D:\test\nextauth001\src\nextauth&gt; npm run build

&gt; nextauth@0.1.0 build
&gt; next build

   ▲ Next.js 15.3.2
   - Environments: .env

   Creating an optimized production build ...
 ✓ Compiled successfully in 0ms
   Linting and checking validity of types  ...Failed to compile.

.next/types/app/api/auth/[...nextauth]/route.ts:12:13
Type error: Type 'OmitWithTag&lt;typeof import("D:/test/nextauth001/src/nextauth/src/app/api/auth/[...nextauth]/route"), "GET" | "POST" | "HEAD" | "OPTIONS" | "PUT" | "DELETE" | "PATCH" | "config" | ... 7 more ... | "maxDuration", ""&gt;' does not satisfy the constraint '{ [x: string]: never; }'.
  Property 'authOptions' is incompatible with index signature.
    Type 'AuthOptions' is not assignable to type 'never'.

  10 |
  11 | // Check that the entry is a valid entry
&gt; 12 | checkFields&lt;Diff&lt;{
     |             ^
  13 |   GET?: Function
  14 |   HEAD?: Function
  15 |   OPTIONS?: Function
Next.js build worker exited with code: 1 and signal: null
</code></pre>
<p>여태까지 아무 문제없이 잘 작동했는데 이 에러를 좇다보면 황당한 결론을 얻게 된다. 우리가 사용한 nextauth는 v4인데 v4는 app router를 공식 지원하지 않는다 한다.(우리는 app router 사용)</p>
<p>.next 폴더와 node_modules 폴더를 지운 후 auth.js v5를 설치했음.</p>
<pre><code class="language-ps">npm install next-auth@beta
</code></pre>
<p>그런데 build 해도 똑같은 에러 발생함.</p>
<pre><code>.next/types/app/api/auth/[...nextauth]/route.ts:12:13
Type error: Type 'OmitWithTag&lt;typeof import("D:/github_stuousk/nextauth001/src/nextauth/src/app/api/auth/[...nextauth]/route"), "config" | "generateStaticParams" | "revalidate" | "dynamic" | "dynamicParams" | ... 10 more ... | "PATCH", ""&gt;' does not satisfy the constraint '{ [x: string]: never; }'.
  Property 'authOptions' is incompatible with index signature.
    Type 'AuthOptions' is not assignable to type 'never'.

  10 |
  11 | // Check that the entry is a valid entry
&gt; 12 | checkFields&lt;Diff&lt;{
     |             ^
  13 |   GET?: Function
  14 |   HEAD?: Function
  15 |   OPTIONS?: Function
</code></pre>
<p>next-auth v4에서 <a href="https://next-auth.js.org/configuration/initialization#route-handlers-app" title="" target="_blank">https://next-auth.js.org/configuration/initialization#route-handlers-app</a> 문서를, 전에는 그냥 대충 봤는데 다시 자세히 보고 있음.</p>
<p>다시 next-auth v4로 돌려 놓았음.</p>
<p>이 문제는 app/api/auth/[…nextauth]/route.ts 파일에서 authOptions를 export 해서 벌어진 문제였음. 이 파일에서의 export는 GET, POST 등 HTTP 메소드 관련 핸들러만 가능하다. 그래서 authOptions는 다른 파일에 정의해 놓고 가져다 쓰기로 함.</p>
<p>app/api/auth/[…nextauth]/authoption.ts 파일 생성하고 authOptions 내용 모두 가져가서 export 하기</p>
<pre><code class="language-ts">// app/api/auth/[...nextauth]/authoption.ts

import CredentialsProvider from 'next-auth/providers/credentials'
import DBMan, { SMember } from '@/app/lib/db';
import { AuthOptions } from 'next-auth';

export const authOptions: AuthOptions = {
  providers: [
    CredentialsProvider({
      name: 'Credentials',
      credentials: {
        username: { label: '아이디', type: 'text', placeholder: '아이디 입력' },
        password: { label: '비밀번호', type: 'password', placeholder: '비밀번호 입력' },
      },

      async authorize(credentials, req) {
          const db = new DBMan();
          // console.log("credentials?.username", credentials?.username || "");
          // console.log("credentials?.password", credentials?.password || "");
          const member: SMember = await db.login(credentials?.username || "", credentials?.password || "")
          db.disconnect();
  
          console.log("[login] member: ", member);       
          
          if (member != null)
          {
            console.log("[login]로그인 성공. member: ", member);       
            return member;    // 로그인 성공
          }
          else          
          {
            console.log("[login] 로그인 실패: ", credentials?.username);
            return null;  // 로그인 실패
          }
      },
    }),
  ]
  , secret: process.env.NEXTAUTH_SECRET

  , pages: 
  {
      signIn: '/auth/signin', // Displays signin buttons
      // signOut: '/auth/signout', // Displays form with sign out button
      // error: '/auth/error', // Error code passed in query string as ?error=
      // verifyRequest: '/auth/verify-request', // (used for check email message)
      // newUser: null, // Will disable the new account creation screen
  }
  
  , callbacks: 
  {
      jwt({ token, user }) 
      {
          console.log("\n\n");
          console.log("------------------- [jwt callback] -------------------");
          console.log("[jwt] token = ", token, "\n");
          console.log("[jwt] user = ", user);

          if (user) 
          {
              token.id = user.id;
              token.nickname = user.nickname;
              token.email = user.email;
          }
          
          return token;
      }

      , async session({ session, token }) 
      {
        console.log("\n\n");
        console.log("------------------- [session] -------------------");
        console.log("[session] session = ", session);
        console.log("[session] token = ", token);

        session.user = {
          id : token.id as string,
          nickname: token.nickname as string,
        };
        
        return session;
      }
  }
};
</code></pre>
<p>app/api/auth/[…nextauth]/route.ts 파일 수정본</p>
<pre><code class="language-ts">// app/api/auth/[...nextauth]/route.ts

import NextAuth from 'next-auth/next'
import { authOptions } from './authoption';

const handler = NextAuth(authOptions)
  
export { handler as GET, handler as POST }
</code></pre>
<p>그리고 app/api/data/route.ts 파일도 authOptions import 하는 부분을 수정했다.</p>
<pre><code class="language-ts">// app/api/data/route.ts
import { authOptions } from '@/app/api/auth/[...nextauth]/authoption';
</code></pre>
<p>이렇게 했더니 빌드 통과되었다.</p>
<p>다음 문제는</p>
<pre><code>./src/app/lib/db.ts:17:21
Type error: Cannot find namespace 'pg'.

  15 | class DBMan
  16 | {
&gt; 17 |     private client: pg.Client;
     |                     ^
  18 |
</code></pre>
<p>이 문제다. 역시나 pg가 없다고 나온다.</p>
<p>전에 문제가 있어서 문제가 없도록 수정했었는데 다시 에러가 나온다.</p>
<p>이 부분은 이렇게 수정헀다.</p>
<pre><code class="language-ts">// app/lib/db.ts

import pg from 'pg';
const {Client} = pg;

class DBMan
{    
    client = new Client();
</code></pre>
<p>이제는 type 에러만 남았다.</p>
<p>build할 때 eslint를 빼고 싶으면,
<code>next.config.ts</code> 파일을 수정하면 된다.</p>
<pre><code class="language-ts">// next.config.ts

import type { NextConfig } from "next";

const nextConfig: NextConfig = {
  eslint: {
    // Warning: This allows production builds to successfully complete even if
    // your project has ESLint errors.
    ignoreDuringBuilds: true,
  }
};

export default nextConfig;
</code></pre>
<p>추가한 부분은 다음과 같다.</p>
<pre><code>eslint: {
    ignoreDuringBuilds: true,
  }
</code></pre>
<p>관련 문서: <a href="https://nextjs.org/docs/app/api-reference/config/eslint#disabling-rules" title="" target="_blank">https://nextjs.org/docs/app/api-reference/config/eslint#disabling-rules</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="editorjs"><a class="header" href="#editorjs">Editor.js</a></h1>
<ul>
<li>노션 스타일의 블록형 에디터</li>
<li>오픈소스</li>
<li>홈페이지: <a href="https://editorjs.io/" title="" target="_blank">https://editorjs.io</a></li>
<li>작성일: 2025. 5. 11.</li>
<li>최종수정일: 2025. 5. 11.</li>
</ul>
<h2 id="설치-2"><a class="header" href="#설치-2">설치</a></h2>
<p>editor.js는 다양한 플러그인을 제공한다. 우선 본체만 설치.</p>
<pre><code class="language-ps">npm install @editorjs/editorjs
</code></pre>
<h2 id="가장-간단한-샘플"><a class="header" href="#가장-간단한-샘플">가장 간단한 샘플</a></h2>
<h3 id="pagetsx"><a class="header" href="#pagetsx">page.tsx</a></h3>
<p>죄다 지우고 아래와 같이 바꾼다.</p>
<pre><code class="language-ts">// app/page.tsx

import EditorPage from "./editor";


export default function Home() {
  return (
    &lt;div&gt;
      &lt;EditorPage /&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h3 id="editortsx"><a class="header" href="#editortsx">editor.tsx</a></h3>
<p>Editor.js를 정의한 클라이언트 컴포넌트</p>
<pre><code class="language-ts">// app/editor.tsx

"use client";

import EditorJS from '@editorjs/editorjs';
import './globals.css';


export default function EditorPage()
{
    const editor = new EditorJS('editorjs');

    return(
        &lt;div&gt;
            &lt;div id="editorjs" /&gt;
        &lt;/div&gt;
    );
}
</code></pre>
<p>vs 터미널에서 <code>npm run dev</code>로 실행하면 터미널에 에러가 잔뜩 나오는데,</p>
<p>실행한 후에 화면의 빈 곳을 마우스로 움직이다 보면</p>
<p><img src="editorjs/img/20250511174313.png" alt="" /></p>
<p>이렇게 <code>+</code> 기호가 나오고 노션처럼 글을 쓸 수 있다.</p>
<p><img src="editorjs/img/20250511174435.png" alt="" /></p>
<p>아직까지는 text만 추가할 수 있다.</p>
<p>혹시 <code>+</code> 기호가 안나오면</p>
<pre><code class="language-ts">// app/editor.tsx

const editor = new EditorJS('editorjs');
</code></pre>
<p>의 <code>editorjs</code> 부분의 값을 바꾸고 다시 원래대로 돌려놓으면서 테스트해 보자.</p>
<p><code>editorjs</code>가 holder인데, 이 값이랑</p>
<pre><code class="language-ts">// app/editor.tsx

&lt;div id="editorjs" /&gt;
</code></pre>
<p>이 부분의 id 값이 같아야 한다.</p>
<p><img src="editorjs/img/20250511190839.png" alt="" /></p>
<p>블록을 잡으면 진하게 등을 설정할 수 있게 된다.</p>
<h2 id="configuration"><a class="header" href="#configuration">configuration</a></h2>
<p>EditorJS() 에 문자열을 넘기면 div의 id에 넣어주는 holder가 되지만 이렇게는 쓰지 않고 다양한 설정들을 담아 넣어줘야 한다.</p>
<pre><code class="language-ts">// app/editor.tsx

import EditorJS, {EditorConfig} from '@editorjs/editorjs';
</code></pre>
<p><code>EditConfig</code>를 추가하고 이 타입 객체를 EditorJS() 안에 파라미터로 넣어준다.</p>
<pre><code class="language-ts">// app/editor.tsx

const editor = new EditorJS(
    {
        holder: 'editorjs'
    }
);
</code></pre>
<p>이런 식으로 값을 넣어줄 수도 있지만, 아래처럼 EditorConfig 객체를 만들어 넣어주겠다.</p>
<pre><code class="language-ts">// app/editor.tsx

const editorConfig: EditorConfig = 
{
    holder: 'editorjs'
}   
const editor = new EditorJS(editorConfig);
</code></pre>
<p>이제 holder와 같은 옵션을 눌려주며 에디터를 설정해 간다.</p>
<pre><code class="language-ts">// app/editor.tsx

const editorConfig: EditorConfig = 
{
    holder: 'editorjs',
    placeholder: '여기에 글자 입력',
}   
const editor = new EditorJS(editorConfig);
</code></pre>
<p><img src="editorjs/img/20250511181307.png" alt="" /></p>
<h2 id="heading-플러그인"><a class="header" href="#heading-플러그인">heading 플러그인</a></h2>
<p>먼저 header 플러그인을 설치하자.</p>
<pre><code class="language-ps">npm install @editorjs/header
</code></pre>
<pre><code class="language-ts">// app/editor.tsx

import Header from '@editorjs/header';
</code></pre>
<p>아래와 같이 설정하면 H1, H2 등을 설정할 수 있게 된다.</p>
<pre><code class="language-ts">// app/editor.tsx

const editorConfig: EditorConfig = 
{
    holder: 'editorjs',

    placeholder: '여기에 글자 입력',

    tools: { 
        header: Header
        }
    
};
</code></pre>
<p><img src="editorjs/img/20250511190043.png" alt="" /></p>
<p>이렇게 Heading을 설정할 수 있다.</p>
<p><img src="editorjs/img/20250511190343.png" alt="" /></p>
<p>.. 3줄인 버튼을 누르면 Heading 1 ~ Heading 6 까지 선택할 수 있는데, 이걸 바꿔도 글자 크기가 바뀌지 않는다. next.js에서 tailwind css를 사용하기 때문이다.</p>
<p><code>app/globlas.css</code> 파일안에 h1 ~ h6까지 정의해 줘야 그게 여기에 반영된다.</p>
<pre><code class="language-css">/* app/globlas.css */

h1 {
  color: #333;
  font-size: 2.5em;
  font-weight: bold;
  margin-bottom: 0.5em;
}

h2 {
  color: steelblue;
  font-size: 2em;
  font-weight: bold;
  border-bottom: 2px solid steelblue;
  margin-top: 1em;
}

h3 {
  color: darkgreen;
  font-size: 1.75em;
  font-weight: bold;
}

h4 {
  color: purple;
  font-size: 1.5em;
  font-weight: bold;
}

h5 {
  color: orange;
  font-size: 1.25em;
  font-weight: bold;
}

h6 {
  color: gray;
  font-size: 1em;
  font-weight: bold;
}
</code></pre>
<p><img src="editorjs/img/20250511190634.png" alt="" /></p>
<p>이렇게 글자 크기가 바뀐다.</p>
<h2 id="데이터-저장"><a class="header" href="#데이터-저장">데이터 저장</a></h2>
<pre><code class="language-ts">// app/editor.tsx

return(
    &lt;div&gt;
        &lt;button onClick={OnSaveClicked} className='bg-blue-300 p-2'&gt;저장&lt;/button&gt;
        &lt;div id="editorjs" /&gt;
    &lt;/div&gt;
);
</code></pre>
<p>이렇게 저장 버튼을 넣으면 저장할 수 있게 되고, <code>OnSaveClicked</code> 핸들러는</p>
<pre><code class="language-ts">// app/editor.tsx

const OnSaveClicked = async () =&gt;
{
    const article = await editor.save();
    console.log("article = " , article);
}
</code></pre>
<p>와 같이 해 준다. 전체 코드는 다음과 같다.</p>
<pre><code class="language-ts">// app/editor.tsx

"use client";

import EditorJS, {EditorConfig} from '@editorjs/editorjs';
import Header from '@editorjs/header';

import './globals.css';


export default function EditorPage()
{
    const OnSaveClicked = async () =&gt;
    {
        const article = await editor.save();
        console.log("article = " , article);
    }

    const editorConfig: EditorConfig = 
    {
        holder: 'editorjs',

        placeholder: '여기에 글자 입력',

        tools: { 
            header: Header
        }      
    };


    const editor = new EditorJS(editorConfig);

    return(
        &lt;div&gt;
            &lt;button onClick={OnSaveClicked} className='bg-blue-300 p-2'&gt;저장&lt;/button&gt;
            &lt;div id="editorjs" /&gt;
        &lt;/div&gt;
    );
}
</code></pre>
<p>여기서 나온 article의 구조는 다음과 같다.</p>
<pre><code class="language-ts">// app/editor.tsx

const OnSaveClicked = async () =&gt;
{
    const article = await editor.save();
    console.log("article = " , article);

    const json = JSON.stringify(article)
    console.log("json = " , json);
}
</code></pre>
<p>이 코드로 본 결과는 아래와 같고, 이 값을 DB에 저장하면 된다.</p>
<pre><code class="language-json">{
    "time":1746960562590,
    "blocks":[
        {"id":"gPa7tDK3Gh","type":"paragraph","data":{"text":"안녕하세요."}}
    ],
    "version":"2.31.0-rc.7"
}
</code></pre>
<h2 id="데이터-읽어오기"><a class="header" href="#데이터-읽어오기">데이터 읽어오기</a></h2>
<pre><code class="language-ts">// app/editor.tsx

const editorConfig: EditorConfig = 
{
    ...생략...

    data: {
        "time":1746960562590,
        "blocks":[
            {"id":"gPa7tDK3Gh","type":"paragraph","data":{"text":"안녕하세요."}}
        ],
        "version":"2.31.0-rc.7"
    }
};
</code></pre>
<p>이렇게 data 항목에 값을 위 article 에서 본 형식으로 값을 세팅하면 컴퍼넌트가 나오면서 이 값이 보여진다.</p>
<h2 id="리스트-플러그인"><a class="header" href="#리스트-플러그인">리스트 플러그인</a></h2>
<p>설치</p>
<pre><code class="language-ps">npm install @editorjs/list
</code></pre>
<p>아래와 같이 모듈을 사용한다.</p>
<pre><code class="language-ts">// app/editor.tsx

import EditorjsList from '@editorjs/list';
</code></pre>
<p>이제 list를 추가한다.</p>
<pre><code class="language-ts">tools: { 
    header: Header, 
    list: 
    {
        EditorjsList
    }
},
</code></pre>
<p><img src="editorjs/img/20250511201414.png" alt="" /></p>
<h2 id="이미지-플러그인"><a class="header" href="#이미지-플러그인">이미지 플러그인</a></h2>
<p>paste를 통해서만 이미지를 추가할 수 있는 간단 버전.</p>
<pre><code class="language-json">editor.tsx:19 json =  {"time":1746963981205,"blocks":[{"id":"CMI0iKaAeY","type":"image","data":{"url":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAnUAAAESCAIAAAAUjLR8AAAgAElEQVR4Ae2dTatdx5X3+5vsUUSDrzDIIF0rIAecS7AGiWK4RgpptUWjcNHgooEQSqBNLm4yMB54EoJNoEl3Bh2c7k7jJpNAQIMMgk1GDxq4P0U+QR7Wqre16mWfs89Ze5999v4b4btfqlat+lWd+u9VtV/+rlvof0+fPn399dcnq9y3vvWta9euTVYcCgIBEAABEJg5gb+buX87uwd93RkdMoIACIAACOxPAPq6P0OygPjVhiOsgAAIgMBSCEBfbVoS+mrDEVZAAARAYCkEoK82LQl9teEIKyAAAiCwFAJG+nr74vL5Vfx3frvEc+PsIia4OC3PWx/B+qs1UdgDARAAARAYQMBIX2WJrLVKYk/uP3p+9ejuDZlq7G3o69iEYR8EQAAEQKCHwAj62nGo
</code></pre>
<p>별도의 이미지 전송 처리같은 거 없이 위에 보이는 것처럼 이미지를 base64 인코딩해서 전송할 수 있어 빠르게 처리할 수 있다. 단점은 파일선택이 불가능하고 paste를 통한 이미지 추가만 가능하다는 거.</p>
<p>설치</p>
<pre><code class="language-ps">npm install @editorjs/simple-image
</code></pre>
<p>플러그인 임포트</p>
<pre><code class="language-ts">// app/editor.tsx

import SimpleImage from "@editorjs/simple-image";
</code></pre>
<pre><code class="language-ts">// app/editor.tsx

tools: { 
    header: Header,

    list: EditorjsList, 

    image: SimpleImage
},
</code></pre>
<p>tools에 image를 추가한다.</p>
<p><img src="editorjs/img/20250511204209.png" alt="" /></p>
<p>모듈을 제대로 설치해도 이렇게 빨간색으로 나오는데 기능은 동작한다.</p>
<p><img src="editorjs/img/20250511204304.png" alt="" /></p>
<h2 id="문제-해결-2"><a class="header" href="#문제-해결-2">문제 해결</a></h2>
<h3 id="f5를-누르면-안나와서-div-ideditorjs-의-id-값을-바꾸면서-테스트해야-하던-문제--한-번에-3줄씩-나오던-문제"><a class="header" href="#f5를-누르면-안나와서-div-ideditorjs-의-id-값을-바꾸면서-테스트해야-하던-문제--한-번에-3줄씩-나오던-문제">F5를 누르면 안나와서 <code>&lt;div id="editorjs" /&gt;</code>의 id 값을 바꾸면서 테스트해야 하던 문제 &amp; 한 번에 3줄씩 나오던 문제</a></h3>
<pre><code class="language-ts">// app/editor.tsx

import React, {useEffect} from 'react';
</code></pre>
<p>editor 설정 부분을</p>
<pre><code class="language-ts">useEffect(() =&gt;
{
    const editor = new EditorJS(editorConfig);
}, []);
</code></pre>
<p>과 같이 고쳐 주고 useRef() 훅도 사용해야 한다.</p>
<p>그리고 SSR을 막는 처리도 해줘야 한다.</p>
<p>이렇게 하려면 app/editor_c.tsx 파일을 만들고 그 안에 다음과 같이 코딩한다.</p>
<pre><code class="language-ts">// app/editor_c.tsx

// SSR 을 막고 client에서만 돌아가도록 한다.

'use client';
import dynamic from 'next/dynamic';
import React from 'react';

const DynamicEditor = dynamic(
    () =&gt; import('./editor'), // Editor 컴포넌트 경로
    { ssr: false } // 서버 측 렌더링 비활성화
);

const MyPage: React.FC = () =&gt; {
  return (    
      &lt;DynamicEditor /&gt;
  );
};

export default MyPage;
</code></pre>
<p>여기서 ./editor.tsx 를 import 해서 사용하니, 이제 이 page.tsx에서 이 파일을 읽어 사용하도록 만들어줘야 한다.</p>
<pre><code class="language-ts">// app/page.tsx

import MyPage from "./editor_c";
// import EditorPage from "./editor";

export default function Home() {
  return (
    &lt;div&gt;
      &lt;MyPage /&gt;
      {/* &lt;EditorPage /&gt; */}
    &lt;/div&gt;
  );
}
</code></pre>
<h2 id="build-에러-해결"><a class="header" href="#build-에러-해결">build 에러 해결</a></h2>
<p>빌드하면 src/editor.tsx 파일에서 에러가 난다.</p>
<pre><code class="language-ps">PS E:\github-stuousk\nextjstest\md_editor\editor01&gt; npm run build                                 
&gt; editor01@0.1.0 build
&gt; next build

   ▲ Next.js 15.3.2

   Creating an optimized production build ...
 ✓ Compiled successfully in 0ms
   Linting and checking validity of types  ..Failed to compile.

   Linting and checking validity of types  ..../src/app/editor.tsx:7:25
Type error: Could not find a declaration file for module '@editorjs/simple-image'. 'E:/github-stuousk/nextjstest/md_editor/editor01/node_modules/@editorjs/simple-image/dist/simple-image.mjs' implicitly has an 'any' type.
  Try `npm i --save-dev @types/editorjs__simple-image` if it exists or add a new declaration (.d.ts) file containing `declare module '@editorjs/simple-image';`

   5 | import Header from '@editorjs/header';
   6 | import EditorjsList from '@editorjs/list';
&gt;  7 | import SimpleImage from '@editorjs/simple-image';
     |                         ^
   8 |
   9 | import './globals.css';
  10 |
Next.js build worker exited with code: 1 and signal: null
</code></pre>
<p>보면 simple-image 플러그인을 읽는데 에러가 나는거다. 기능은 동작하는데. 이 플러그인은 ts 버전도 따로 없다.</p>
<p><code>Try npm i --save-dev @types/editorjs__simple-image</code> 이거 해도 없다고 나온다. 문제가 해결되지 않는다.</p>
<p>문제 해결은,</p>
<p>/src/types/editorjs_simple-image.d.ts 파일을 만들고, 다음과 같이 한 줄 적어주면 빌드 문제가 해결된다.</p>
<pre><code class="language-ts">// /src/types/editorjs_simple-image.d.ts

declare module "@editorjs/simple-image";
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="react"><a class="header" href="#react">react</a></h1>
<h3 id="프로젝트-생성typescript로"><a class="header" href="#프로젝트-생성typescript로">프로젝트 생성(typescript로)</a></h3>
<pre><code>npx create-react-app url_mp3_player --template typescript
</code></pre>
<h3 id="프로젝트의-모듈-업그레이드"><a class="header" href="#프로젝트의-모듈-업그레이드">프로젝트의 모듈 업그레이드</a></h3>
<pre><code>npm update
</code></pre>
<p>이래도 안되면
<code>package-lock.json</code>을 지우고 다시 <code>npm update</code> 한다.()</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="typescript"><a class="header" href="#typescript">typescript</a></h1>
<h2 id="mdeditor의-change-이벤트-처리"><a class="header" href="#mdeditor의-change-이벤트-처리">MDEditor의 change 이벤트 처리</a></h2>
<p><img src="typescript/img/20250606190557.png" alt="" /></p>
<p>이렇게 onChange에 빨간줄이 나온다.
이게 setState에 걸려 있는데 아무리 해도 해결이 안된다.</p>
<p>이럴 때는 vscode에서 저 <code>onChange</code> 부분을 ctrl + 클릭하면 설명이 나온다.</p>
<p><img src="typescript/img/20250606190814.png" alt="" /></p>
<p>저 부분을 참조해서 함수를 새로 만들고 그 함수 안에서 setState 함수를 호출하도록 한다.</p>
<pre><code class="language-tsx">//위 이미지 부분을 이렇게 수정하고,
&lt;MDEditor value={memo} onChange={OnMemoChanged} style={{minWidth:"100%", minHeight:"400px"}} /&gt;    

// 처리하는 함수의 모양은 아래와 같이.
const OnMemoChanged = (value?: string, event?: React.ChangeEvent&lt;HTMLTextAreaElement&gt;, state?: ContextStore) =&gt;
{
    if (value)
        setDescript(value);
}
</code></pre>
<p>최종적으로는 아래의 모양이 될 거다. event 랑 state 등은 안 써서 eslint에 걸리니까.</p>
<pre><code class="language-tsx">const OnMemoChanged = (value?: string) =&gt;
{
    if (value)
        setDescript(value);
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="html"><a class="header" href="#html">html</a></h1>
<h2 id="html-named-character-목록"><a class="header" href="#html-named-character-목록">html named character 목록</a></h2>
<p><a href="https://html.spec.whatwg.org/multipage/named-characters.html" title="" target="_blank">https://html.spec.whatwg.org/multipage/named-characters.html</a></p>
<p><img src="html/img/20250610113031.png" alt="" /></p>
<p>이렇게 표시되어 있는데 속이 빈 별을 md 파일에서 표시하고 싶으면</p>
<pre><code class="language-md">&amp;star;
</code></pre>
<p>라고 해주면 된다.</p>
<p>결과는 ☆ 이다.</p>
<pre><code class="language-md">&amp;starf;
</code></pre>
<p>의 결과는 ★ 이다.</p>
<p>대소문자를 가린다.</p>
<h2 id="쓸만한-거"><a class="header" href="#쓸만한-거">쓸만한 거</a></h2>
<ul>
<li>█ : <code>&amp;block;</code></li>
<li>▮: <code>&amp;marker;</code></li>
<li>◼ : <code>&amp;FilledSmallSquare;</code></li>
<li>▪: <code>&amp;FilledVerySmallSquare;</code></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="settings"><a class="header" href="#settings">settings</a></h1>
<h2 id="세팅파일-만드는-데-사용되는-파일-포맷들"><a class="header" href="#세팅파일-만드는-데-사용되는-파일-포맷들">세팅파일 만드는 데 사용되는 파일 포맷들</a></h2>
<p>https://velog.io/@jk01019/TOML-VS-YAML</p>
<h3 id="toml"><a class="header" href="#toml">TOML</a></h3>
<p>쓰기 쉽다. 설정파일 만들 때 가장 좋음.</p>
<h3 id="yaml"><a class="header" href="#yaml">YAML</a></h3>
<p>구조화된 데이터 사용 가능, 조금 복잡할 수도.</p>
<h3 id="json"><a class="header" href="#json">JSON</a></h3>
<p>가볍고 처리속도 빠르고 많이 사용. 불편.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="mac"><a class="header" href="#mac">mac</a></h1>
<h2 id="윈도우-com4는-맥북에서-어떻게-표현해야-할까"><a class="header" href="#윈도우-com4는-맥북에서-어떻게-표현해야-할까">윈도우 “COM4“는 맥북에서 어떻게 표현해야 할까</a></h2>
<pre><code class="language-python">drone.open("COM4")
</code></pre>
<p>이 코드는 맥북에서 실행되지 않는다. COM4가 없으니까.</p>
<p>맥북에서 시리얼 통신은 <code>/dev/tty.*</code>의 형태로 표시한다.</p>
<p>현재 연결된 포트를 확인하려면 터미널에서</p>
<pre><code class="language-bash">ls /dev/tty.*
</code></pre>
<p>로 한다.</p>
<p>이렇게 하면 여러 개의 /dev/tty.OOOOOOOO 이 나타난다.</p>
<p>이 중 내 기기와 연결되었을 것으로 추정되는 걸 찾아 사용하면 된다.</p>
<pre><code class="language-python">drone.open("/dev/tty.usbmodem348C3396333241")
</code></pre>
<p>과 같은 식이다.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="기타"><a class="header" href="#기타">기타</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="miniconda"><a class="header" href="#miniconda">miniconda</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="miniconda-사용법"><a class="header" href="#miniconda-사용법">miniconda 사용법</a></h1>
<h2 id="references"><a class="header" href="#references">references</a></h2>
<ul>
<li>https://docs.anaconda.com/working-with-conda/environments</li>
<li>https://developer-woo.tistory.com/40</li>
</ul>
<br>
<h2 id="새-환경-만들기"><a class="header" href="#새-환경-만들기">새 환경 만들기</a></h2>
<pre><code>conda create -n &lt;ENV_NAME&gt;
</code></pre>
<br>
<h2 id="새로-만든-환경-활성화"><a class="header" href="#새로-만든-환경-활성화">새로 만든 환경 활성화</a></h2>
<pre><code>conda activate &lt;ENV_NAME&gt;
</code></pre>
<br>
<h2 id="파이썬-버전-변경하기"><a class="header" href="#파이썬-버전-변경하기">파이썬 버전 변경하기</a></h2>
<pre><code>conda install python=3.10.6
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ai"><a class="header" href="#ai">AI</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="lm-studio"><a class="header" href="#lm-studio">LM Studio</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="chainlit"><a class="header" href="#chainlit">Chainlit</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="lm-studio--chainlit"><a class="header" href="#lm-studio--chainlit">LM Studio &amp; chainlit</a></h1>
<h2 id="파이썬-설치"><a class="header" href="#파이썬-설치">파이썬 설치</a></h2>
<p><strong>참고자료</strong></p>
<a href="https://www.youtube.com/watch?v=dBSYt-vuEmA" title="" target="_blank">
![](https://img.youtube.com/vi/dBSYt-vuEmA/0.jpg)</a>
<p><strong>pip 를 아래와 같이 uv 방식으로 바꿈. 이제 이 아래부터가 새로 정리한 처음임.</strong></p>
<h2 id="프로젝트-폴더-만들고-프로젝트-생성"><a class="header" href="#프로젝트-폴더-만들고-프로젝트-생성">프로젝트 폴더 만들고 프로젝트 생성</a></h2>
<pre><code class="language-PS">e:\test\lmstudio
</code></pre>
<p>이 폴더에서 powershell 띄우고 아래의 방법으로 프로젝트 생성</p>
<pre><code class="language-PS">PS E:\test\lmstudio&gt; uv init lm001
</code></pre>
<h3 id="프로젝트로-이동"><a class="header" href="#프로젝트로-이동">프로젝트로 이동</a></h3>
<pre><code class="language-PS">PS E:\test\lmstudio&gt; cd lm001
</code></pre>
<h3 id="필요한-패키지-설치-chainlit을-쓰기-위한-준비"><a class="header" href="#필요한-패키지-설치-chainlit을-쓰기-위한-준비">필요한 패키지 설치: chainlit을 쓰기 위한 준비</a></h3>
<pre><code class="language-PS">PS E:\test\lmstudio\lm001&gt; uv add chainlit openai
</code></pre>
<h3 id="파일-다운로드-apppy"><a class="header" href="#파일-다운로드-apppy">파일 다운로드: app.py</a></h3>
<p><a href="https://github.com/Zenulous/local-ai-mcp-chainlit/blob/main/app.py" title="" target="_blank">https://github.com/Zenulous/local-ai-mcp-chainlit/blob/main/app.py</a></p>
<p>위 파일을 다운로드 받아</p>
<p><code>E:\test\lmstudio\lm001\app.py</code></p>
<p>로 저장한다.</p>
<h3 id="chainlit-실행"><a class="header" href="#chainlit-실행">chainlit 실행</a></h3>
<pre><code class="language-PS">PS E:\test\lmstudio\lm001&gt; uv run chainlit run app.py
</code></pre>
<p><img src="ai/img/20250429020157.png" alt="" /></p>
<h2 id="lm-studio-실행"><a class="header" href="#lm-studio-실행">LM Studio 실행</a></h2>
<h3 id="llm-다운로드-gemma-3-4b-it-qat-gguf"><a class="header" href="#llm-다운로드-gemma-3-4b-it-qat-gguf">LLM 다운로드: gemma-3-4B-it-qat-GGUF</a></h3>
<p><img src="ai/img/20250429020617.png" alt="" /></p>
<p>다운로드받은 모델을 로드한다.</p>
<h3 id="서버-실행"><a class="header" href="#서버-실행">서버 실행</a></h3>
<p><img src="ai/img/20250429020953.png" alt="" /></p>
<p>왼쪽 위 빨간 표시한 것처럼 <code>Status stopped</code> 오른쪽을 클릭해 <code>Status: Running</code> 부분의 오른쪽이 초록색이 되도록 만들면 localhost:1234로 서버가 실행된다.</p>
<p>다시 chainlit으로 가서</p>
<p><code>hi</code>라고 쳐본다.</p>
<p><img src="ai/img/20250429021115.png" alt="" /> 연결이 되면 이렇게 답이 나오고 밑에 모델명도 나온다(Used gemma-3-4b-it-qat 라고)</p>
<p>만약 lm studio에서 서버를 실행하지 않았다면 아래와 같이 Connection Error라고 나온다.</p>
<p><img src="ai/img/20250429021305.png" alt="" /></p>
<p><code>gemma-3-4b-it-qat</code>는 반응속도가 굉장히 빠르다.</p>
<br />
<h2 id="mcp-적용"><a class="header" href="#mcp-적용">MCP 적용</a></h2>
<p>MCP를 위해 사용할 패키지를 설치한다.</p>
<pre><code class="language-PS">PS E:\test\lmstudio\lm001&gt; uv add requests
</code></pre>
<h3 id="mcp-서버-생성"><a class="header" href="#mcp-서버-생성">MCP 서버 생성</a></h3>
<p>lm001 폴더에 server.py 파일을 생성한다.</p>
<pre><code class="language-python"># server.py
from mcp.server.fastmcp import FastMCP

# MCP 서버 생성
app = FastMCP("My MCP Server")

# 도구 정의: BMI 계산. AI는 함수명을 보고 유추하는 듯.
@app.tool()
def calculate_bmi(weight: float, height: float) -&gt; float:
    return weight / (height ** 2)

# 도구 정의: 두 숫자 더하기
@app.tool()
def add(a: int, b: int) -&gt; int:
    return a + b

# 리소스 정의: 사용자 이름에 맞춘 인사말 제공
@app.resource("greeting://{name}")
def get_greeting(name: str) -&gt; str:
    return f"Hello, {name}!"

# 서버 실행
if __name__ == "__main__":
    app.run()
</code></pre>
<p>이 파일이 에러는 없는지 확인한다.</p>
<pre><code class="language-PS">uv run server.py
</code></pre>
<p>일단 에러가 나지 않고 실행된 채로 가만히 있으면 큰 문제 없는 거. ctrl+c를 눌러 실행을 종료한다.</p>
<h2 id="chainlit에서-uv-실행할-수-있도록-환경설정"><a class="header" href="#chainlit에서-uv-실행할-수-있도록-환경설정">chainlit에서 uv 실행할 수 있도록 환경설정</a></h2>
<p>.chainlit / config.toml 파일을 열고</p>
<pre><code>[features.mcp.stdio]
    enabled = true
    allowed_executables = [ "npx", "uvx", "uv"]
</code></pre>
<p>allowed_executables 값에 “uv” 도 추가해준다.</p>
<h2 id="mcp-서버-등록"><a class="header" href="#mcp-서버-등록">MCP 서버 등록</a></h2>
<p><img src="ai/img/20250429161916.png" alt="" /></p>
<p>맨 아래 플러그인 모양 버튼을 눌러 아래 화면에서 다음과 같이 mcp 서버를 등록한다.</p>
<p><img src="ai/img/20250429161828.png" alt="" /></p>
<ul>
<li>name: test001</li>
<li>type: stdio</li>
<li>command: uv run D:\test\lmstudio\lm001\server.py</li>
</ul>
<p><img src="ai/img/20250429162257.png" alt="" /></p>
<p>문제없으면 이렇게 MCP 서버 등록에 성공한다.</p>
<p>MCP 서버에서 제공하는 함수도 아래에 2개 보여진다.</p>
<p><img src="ai/img/20250429162633.png" alt="" /></p>
<p>BMI를 물어보면 내가 제공한 함수를 이용해 계산한다.</p>
<p>키는 단위를 m로 줘야 하는구나. cm로 줬더니 이상한 값이 나왔다.</p>
<p>mcp 함수 찾기까지 속도가 굉장히 느리다.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="mcp"><a class="header" href="#mcp">MCP</a></h1>
<h2 id="가장-간단한-형태의-mcp"><a class="header" href="#가장-간단한-형태의-mcp">가장 간단한 형태의 mcp</a></h2>
<p><a href="https://github.com/modelcontextprotocol/python-sdk/blob/main/examples/fastmcp/echo.py" title="" target="_blank">https://github.com/modelcontextprotocol/python-sdk/blob/main/examples/fastmcp/echo.py</a></p>
<pre><code class="language-python">"""
FastMCP Echo Server
"""

from mcp.server.fastmcp import FastMCP

# Create server
mcp = FastMCP("Echo Server")


@mcp.tool()
def echo_tool(text: str) -&gt; str:
    """Echo the input text"""
    return text


@mcp.resource("echo://static")
def echo_resource() -&gt; str:
    return "Echo!"


@mcp.resource("echo://{text}")
def echo_template(text: str) -&gt; str:
    """Echo the input text"""
    return f"Echo: {text}"


@mcp.prompt("echo")
def echo_prompt(text: str) -&gt; str:
    return text
</code></pre>
<p>그런데 이거 막상 chainlit 에서 MCP 서버로 등록하려하면 에러는 나지 않는데 등록은 안된다. 맨 밑에</p>
<pre><code class="language-python"># 서버 실행
if __name__ == "__main__":
    print("Starting server...")
    mcp.run()
</code></pre>
<p>이 들어가야 mcp 서버로 추가된다.</p>
<br />
<h2 id="mcp의-구조"><a class="header" href="#mcp의-구조">MCP의 구조</a></h2>
<p><a href="https://modelcontextprotocol.io/introduction#explore-mcp" title="" target="_blank">https://modelcontextprotocol.io/introduction#explore-mcp</a></p>
<h3 id="mcp-primitive-3개"><a class="header" href="#mcp-primitive-3개">MCP primitive 3개</a></h3>
<h4 id="resources"><a class="header" href="#resources">resources</a></h4>
<h4 id="prompts"><a class="header" href="#prompts">prompts</a></h4>
<h4 id="tools"><a class="header" href="#tools">tools</a></h4>
<h2 id="mcp-상세-소개"><a class="header" href="#mcp-상세-소개">MCP 상세 소개</a></h2>
<p><a href="https://modelcontextprotocol.io/introduction" title="" target="_blank">https://modelcontextprotocol.io/introduction</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="공간정보"><a class="header" href="#공간정보">공간정보</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="qgis"><a class="header" href="#qgis">QGIS</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="qgis-plugin-개발"><a class="header" href="#qgis-plugin-개발">QGIS plugin 개발</a></h1>
<p><strong>공식 문서</strong><br />
<a href="https://docs.qgis.org/3.40/ko/docs/pyqgis_developer_cookbook/plugins/index.html" title="" target="_blank">https://docs.qgis.org/3.40/ko/docs/pyqgis_developer_cookbook/plugins/index.html</a></p>
<p><strong>가장 간단한 python 플러그인 샘플</strong><br />
<a href="https://github.com/wonder-sk/qgis-minimal-plugin" title="" target="_blank">https://github.com/wonder-sk/qgis-minimal-plugin</a></p>
<p><strong>pyqgis와 plugin 차이</strong><br />
pyqgis는 qgis 내에서 직접 스크립트를 입력해 처리하는 방식</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="cesium"><a class="header" href="#cesium">cesium</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="cesium과-google-earth-차이점"><a class="header" href="#cesium과-google-earth-차이점">cesium과 google earth 차이점</a></h1>
<p><strong>from perplexity</strong></p>
<h2 id="cesium-서비스와-google-earth의-차이점"><a class="header" href="#cesium-서비스와-google-earth의-차이점">Cesium 서비스와 Google Earth의 차이점</a></h2>
<p><strong>기본 개념 및 목적</strong></p>
<ul>
<li>
<p><strong>Google Earth</strong><br />
Google Earth는 위성사진, 항공사진, 3D 지형 데이터를 바탕으로 전 세계 지리 정보를 시각화하는 대표적인 3D 지구본 소프트웨어입니다. 주로 일반 사용자와 전문가 모두가 지도 탐색, 위치 검색, 지리 정보 확인, KML 파일 활용 등에 사용합니다.</p>
</li>
<li>
<p><strong>Cesium</strong><br />
Cesium은 오픈소스 기반의 웹GL 3D 지구본 엔진으로, 개발자들이 웹, 게임엔진(예: 언리얼 엔진) 등 다양한 환경에서 3D 지리공간 데이터를 시각화하고, 디지털 트윈, 시뮬레이션, 맞춤형 GIS 애플리케이션을 개발할 수 있게 해줍니다[3][4][5].</p>
</li>
</ul>
<hr />
<h2 id="주요-차이점"><a class="header" href="#주요-차이점">주요 차이점</a></h2>
<div class="table-wrapper"><table><thead><tr><th>구분</th><th>Google Earth</th><th>Cesium</th></tr></thead><tbody>
<tr><td><strong>접근 방식</strong></td><td>완성된 애플리케이션 제공</td><td>개발용 플랫폼/엔진(웹·게임엔진 통합 가능)</td></tr>
<tr><td><strong>사용자 대상</strong></td><td>일반 사용자, 전문가</td><td>개발자, GIS 전문가, 기업</td></tr>
<tr><td><strong>확장성</strong></td><td>제한적(KML, 일부 API)</td><td>매우 높음(풀 API, 3D Tiles, 커스텀 데이터)</td></tr>
<tr><td><strong>API 지원</strong></td><td>제한적(COM API, KML 위주)</td><td>강력한 API, 다양한 언어·플랫폼 지원</td></tr>
<tr><td><strong>커스터마이징</strong></td><td>제한적</td><td>자유로운 커스터마이징·플러그인 확장</td></tr>
<tr><td><strong>데이터 소스</strong></td><td>Google 데이터(위성, 항공, 3D)</td><td>자체 데이터, 오픈스트리트맵, Google Tiles 등</td></tr>
<tr><td><strong>활용 예시</strong></td><td>지도 탐색, 위치 검색, 간단한 분석</td><td>디지털 트윈, 시뮬레이션, 맞춤형 GIS 앱</td></tr>
<tr><td><strong>엔진 통합</strong></td><td>불가</td><td>언리얼 엔진 등 게임엔진과 통합 가능</td></tr>
<tr><td><strong>상세도</strong></td><td>매우 높음</td><td>Google Tiles 활용 시 상세도 일부 제한</td></tr>
</tbody></table>
</div>
<hr />
<h2 id="세부-설명"><a class="header" href="#세부-설명">세부 설명</a></h2>
<p><strong>1. 개발 및 확장성</strong></p>
<ul>
<li>Google Earth는 완성된 소프트웨어로, 사용자는 주어진 기능 내에서만 활용이 가능합니다. API는 제한적이며, 주로 KML 파일을 통한 데이터 시각화에 머뭅니다[3].</li>
<li>Cesium은 강력한 API와 3D Tiles 표준을 제공해, 개발자가 웹, 게임엔진(언리얼 등)에서 자유롭게 3D 공간 정보를 커스터마이징하고 확장할 수 있습니다[2][3][5].</li>
</ul>
<p><strong>2. 데이터 활용 및 통합</strong></p>
<ul>
<li>Google Earth는 Google이 제공하는 데이터만 사용 가능하며, 외부 데이터 통합이 제한적입니다.</li>
<li>Cesium은 자체 데이터뿐 아니라 Google의 3D Tiles, 오픈스트리트맵 등 다양한 소스를 통합할 수 있습니다. 또한 언리얼 엔진 등과 연동해 메타버스, 시뮬레이션 등 다양한 분야에 적용할 수 있습니다[2][5][8].</li>
</ul>
<p><strong>3. 시각화 및 상세도</strong></p>
<ul>
<li>Google Earth는 매우 높은 수준의 3D 상세도를 제공합니다.</li>
<li>Cesium도 Google Maps API 기반의 3D Tiles를 활용할 수 있지만, Google Earth에 비해 일부 상세도가 떨어질 수 있습니다(특히 언리얼 엔진 등에서)[6].</li>
</ul>
<p><strong>4. 주요 활용 분야</strong></p>
<ul>
<li>Google Earth: 대중적 지도 탐색, 위치 확인, 교육, 간단한 공간 분석.</li>
<li>Cesium: 디지털 트윈 구축, 공간 정보 기반 메타버스, 시뮬레이션, 맞춤형 GIS 애플리케이션 개발 등[2][4].</li>
</ul>
<hr />
<h2 id="요약"><a class="header" href="#요약">요약</a></h2>
<ul>
<li><strong>Google Earth</strong>는 완성형 지도 서비스로, 누구나 쉽게 사용할 수 있지만 확장성과 커스터마이징이 제한적입니다.</li>
<li><strong>Cesium</strong>은 개발자를 위한 3D 지리공간 시각화 플랫폼으로, 다양한 데이터 통합과 강력한 커스터마이징, 게임엔진 연동이 가능합니다.</li>
<li>Google Earth가 “사용자 중심의 지도 서비스“라면, Cesium은 “개발자 중심의 3D 공간 정보 플랫폼“입니다[3][5][8].</li>
</ul>
<p>Citations:
[1] https://6sense.com/tech/3d-rendering/googleearthpro-vs-cesium
[2] https://blog.naver.com/kcscpr/223153975819
[3] https://community.cesium.com/t/comparing-google-earth-to-cesium/862
[4] https://www.slideshare.net/slideshow/cesium-63d9/272998631
[5] https://nuriarchive.tistory.com/20
[6] https://community.cesium.com/t/google-tiles-in-cesium-less-detailed-than-google-earth/26721
[7] https://6sense.com/tech/3d-rendering/cesium-vs-googleearthpro
[8] https://www.toolify.ai/ko/ai-news-kr/5-google-api-cesium-pt-1-992576</p>
<hr />
<p>Perplexity로부터의 답변: https://www.perplexity.ai/search/cesiumseobiseuwa-google-earth-xKIUx37wRQ2BudWKfkk3Ag?utm_source=copy_output</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="데이터베이스"><a class="header" href="#데이터베이스">데이터베이스</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="postgresql"><a class="header" href="#postgresql">postgresql</a></h1>
<h2 id="사용법"><a class="header" href="#사용법">사용법</a></h2>
<p>docker에 postgresql을 실행한 다음임.</p>
<h3 id="유저-생성"><a class="header" href="#유저-생성">유저 생성</a></h3>
<pre><code class="language-sql"># su - postgres
postgres@963e6c43fae6:~$ psql    
psql (17.4 (Debian 17.4-1.pgdg120+2))
Type "help" for help.

postgres=# create user scott password 'tiger';
CREATE ROLE
</code></pre>
<h3 id="생성된-유저-보기"><a class="header" href="#생성된-유저-보기">생성된 유저 보기</a></h3>
<pre><code>postgres=# \du
                             List of roles
 Role name |                         Attributes                         
-----------+------------------------------------------------------------
 postgres  | Superuser, Create role, Create DB, Replication, Bypass RLS
 scott     |
</code></pre>
<h3 id="데이터베이스-생성한글-잘-나오게"><a class="header" href="#데이터베이스-생성한글-잘-나오게">데이터베이스 생성(한글 잘 나오게)</a></h3>
<pre><code class="language-sql">postgres=# create database test owner scott  LC_COLLATE='C.utf8' LC_CTYPE='C.utf8' template=template0;
CREATE DATABASE
</code></pre>
<h3 id="scott으로-접속하기"><a class="header" href="#scott으로-접속하기">scott으로 접속하기</a></h3>
<pre><code class="language-sql">postgres=# exit
postgres@963e6c43fae6:~$ psql -U scott test
psql (17.4 (Debian 17.4-1.pgdg120+2))
Type "help" for help.

test=&gt; 
</code></pre>
<h3 id="데이터베이스-목록-보기"><a class="header" href="#데이터베이스-목록-보기">데이터베이스 목록 보기</a></h3>
<pre><code class="language-sql">nextauth=&gt; \l
                                                    List of databases
   Name    |  Owner   | Encoding | Locale Provider |  Collate   |   Ctype    | Locale | ICU Rules |   Access privileges   
-----------+----------+----------+-----------------+------------+------------+--------+-----------+-----------------------
 nextauth  | scott    | UTF8     | libc            | C.utf8     | C.utf8     |        |           | 
 postgres  | postgres | UTF8     | libc            | en_US.utf8 | en_US.utf8 |        |           | 

 (4 rows)
</code></pre>
<h3 id="테이블-목록-보기"><a class="header" href="#테이블-목록-보기">테이블 목록 보기</a></h3>
<pre><code class="language-sql">nextauth=&gt; \dt
        List of relations
 Schema |  Name  | Type  | Owner 
--------+--------+-------+-------
 public | data   | table | scott
 public | member | table | scott
(2 rows)
</code></pre>
<h3 id="테이블-구조-보기"><a class="header" href="#테이블-구조-보기">테이블 구조 보기</a></h3>
<pre><code class="language-sql">nextauth=&gt; \d member
                       Table "public.member"
  Column  |          Type          | Collation | Nullable | Default 
----------+------------------------+-----------+----------+---------
 id       | character varying(10)  |           | not null | 
 nickname | character varying(10)  |           | not null | 
 pwd      | character varying(62)  |           | not null | 
 email    | character varying(100) |           |          | 
Indexes:
    "member_pkey" PRIMARY KEY, btree (id)

nextauth=&gt; 
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="postgresql-보안"><a class="header" href="#postgresql-보안">postgresql 보안</a></h1>
<h2 id="암호화-pgcrypto"><a class="header" href="#암호화-pgcrypto">암호화: pgcrypto</a></h2>
<p>postgresql에서 pgcrypto extenwsion을 설치해 사용.</p>
<pre><code class="language-sql">create extension pgcrypto;
</code></pre>
<pre><code class="language-sql">select crypt('password', gen_salt('bf')), gen_salt('bf'), gen_salt('bf') from person 
</code></pre>
<div class="table-wrapper"><table><thead><tr><th>crypt</th><th>gen_salt</th><th>gen_salt</th></tr></thead><tbody>
<tr><td>$2a$06$4VKMr06kmf.B2NYsXIo8YuFklgDAN/.d0DtXr8AjAGMTHmZM6zJPi</td><td>$2a$06$Pn8VLVjEMdDHGR6Kd8zHou</td><td>$2a$06$QVFyuO7KUwHM6ICBkOuKAO</td></tr>
<tr><td>$2a$06$z2G9KZTwNtRPRWC5aOGMz.pUQTyhLg8aJzqB9ITQ5Qh2snW8B4vaa</td><td>$2a$06$aZOByB.sIkzI1GIvvoJ7ce</td><td>$2a$06$msvxhMmuRI6rCkoTurvn9.</td></tr>
<tr><td>$2a$06$SEJOY6Fq6sAAODVeF9WQwOiXEYFVDdMVJnjMed/lOyLEwB4nj919O</td><td>$2a$06$UQb22zkq9hV0OMDTwFYxzO</td><td>$2a$06$shgzHIozenbZt7R7wFcsaO</td></tr>
<tr><td>$2a$06$3dGWLx4sW4wA/L1bcoj.L.X3ZT.KNINrTkrJhC2a41ntWuj5rERye</td><td>$2a$06$rTj03AOManccUIuI2XIbV.</td><td>$2a$06$2GBJ/6jZr1qg0nPgulMdFe</td></tr>
<tr><td>$2a$06$4OAARuBSDOZG9MpGee3psOzTiWM7dd20geejE71O9xVA94UqIk04O</td><td>$2a$06$/unpztSApPOrMpUFWZPaKO</td><td>$2a$06$jkqcmG.zFt43dfnKD4Jmo.</td></tr>
<tr><td>$2a$06$o1twjlcnFMbD7Ia2t/maye0QasloFQrH4YJBeP7xwqPO1nQe579pq</td><td>$2a$06$v.8anVVjrOqpwVs97AaTWe</td><td>$2a$06$5G/yWb9TZd8d9UPHdEdRLO</td></tr>
<tr><td>$2a$06$e9yMZYCbRsrzZ.EgFDzDLuWD3/soADwDmOPKV2UYJf8X0NlL8vNYK</td><td>$2a$06$N5gsCvmLl5p7h4HqTUo2ce</td><td>$2a$06$IxwHaxoJtS.8wtpRSqYxIO</td></tr>
<tr><td>$2a$06$KWrWFoDNVV81KGcF3Du0deuLKRRKjjuXCVJxOTd.QuothBzTD5rAa</td><td>$2a$06$sn09Y90aC2BIduxLJlTj2O</td><td>$2a$06$LnLkctD2dMdOh1OM1sfHq.</td></tr>
<tr><td>$2a$06$3YUzaaW8vWerHmlp2oqd3.G2nPEo5RdKTrp.Vsrxinqif2O7iJjDK</td><td>$2a$06$OdBQSrm05ATGeVrxna/d5u</td><td>$2a$06$8DBvMyAbKjyxLVG0MbAbO.</td></tr>
</tbody></table>
</div><br />
<p><code>get_salt('bf')</code>는 할 때 마다 다 다른 값이 나온다.</p>
<p>이 값을 기반으로 같은 비밀번호라도(여기서는 ‘password’) 해싱값이 다 다르게 나온다. 그래서 보안이 강력해진다.</p>
<h3 id="salt-값을-저장하지-않는-경우"><a class="header" href="#salt-값을-저장하지-않는-경우">salt 값을 저장하지 않는 경우</a></h3>
<h4 id="암호화하기"><a class="header" href="#암호화하기">암호화하기</a></h4>
<pre><code class="language-sql">insert into person (id, pwd) values ('X00101', crypt('password', gen_salt('bf')));
</code></pre>
<h4 id="암호-검증"><a class="header" href="#암호-검증">암호 검증</a></h4>
<pre><code class="language-sql">select id from person where id ='X00101' and pwd = crypt('password', pwd);
</code></pre>
<p>salt 값을 저장하지 않아도 문제없이 로그인을 할 수 있다.</p>
<p>보안이 아래 salt 값을 저장하는 경우보다 떨어진다고 한다.</p>
<br />
<h3 id="salt-값을-저장하는-경우"><a class="header" href="#salt-값을-저장하는-경우">salt 값을 저장하는 경우</a></h3>
<h4 id="암호화하기-1"><a class="header" href="#암호화하기-1">암호화하기</a></h4>
<pre><code class="language-sql">insert into person 
    (id, pwd, salt) 
values 
    ('X00101', crypt('password', gen_salt('bf')), gen_salt('bf'));
</code></pre>
<h4 id="암호-검증-1"><a class="header" href="#암호-검증-1">암호 검증</a></h4>
<pre><code class="language-sql">select 
    id 
from 
    person 
where 
    id ='X00101' 
    and pwd = crypt('password', salt);
</code></pre>
<p>이해는 되지 않지만 이렇게 해도 문제없이 로그인을 할 수 있다.</p>
<p>위에서 본 것 처럼 get_salt(‘bf’)를 할 때마다 값이 달라지는데, 왜 salt 값을 저장.. 하는 거야.</p>
<p><a href="https://postgresql.kr/docs/9.6/pgcrypto.html" title="" target="_blank">https://postgresql.kr/docs/9.6/pgcrypto.html</a> 을 봐도 salt 값을 저장하라는 말은 없다.</p>
<p>perplexity 답:</p>
<pre><code>PostgreSQL pgcrypto 확장 모듈을 이용해 비밀번호를 해시할 때, salt 값을 별도로 저장하지 않는 것이 일반적입니다. 이유는 crypt() 함수가 해시 결과 안에 salt 정보를 함께 포함하기 때문입니다.

비밀번호를 처음 저장할 때는 gen_salt() 함수로 salt를 생성하고, crypt(비밀번호, salt)로 해시를 만듭니다.

이 해시 문자열 안에 salt와 알고리즘 정보가 모두 포함되어 저장됩니다.

로그인 검증 시에는 저장된 해시 값을 salt 인자로 다시 crypt()에 넣어 같은 방식으로 해시를 생성하고, 결과를 비교합니다.

즉, salt를 별도의 컬럼에 저장하지 않고, 해시 문자열 자체에 포함시키는 방식이 표준입니다.
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sqlite3"><a class="header" href="#sqlite3">sqlite3</a></h1>
<h2 id="설치-3"><a class="header" href="#설치-3">설치</a></h2>
<h3 id="윈도우즈"><a class="header" href="#윈도우즈">윈도우즈</a></h3>
<p>sqlite3 홈페이지(<a href="https://www.sqlite.org/download.html" title="" target="_blank">https://www.sqlite.org/download.html</a>)에 들어가서 툴을 다운로드 받는다.</p>
<p><img src="db/sqlite3/img/20250426193620.png" alt="" /></p>
<p>압축을 풀고 그 폴더를 path에 걸어준다.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="indexed-db"><a class="header" href="#indexed-db">indexed db</a></h1>
<p>next.js에서 사용할 때 client component에서만 사용해야 한다.</p>
<h2 id="패키지-설치"><a class="header" href="#패키지-설치">패키지 설치</a></h2>
<p>indexed db는 브라우저에서 자체적으로 제공하는 기능을 이용하기 때문에 따로 패키지를 설치하지 않는다.</p>
<p>사용 편의성을 높이기 위해 <code>idb</code> 패키지를 설치해 사용하기도 한다.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="oracle"><a class="header" href="#oracle">oracle</a></h1>
<p>oracle db를 podman에서 사용하기</p>
<pre><code class="language-ps">podman pull docker.io/jaspeen/oracle-xe-11g

podman run --name oracle-xe-11g -d -p 1521:1521 jaspeen/oracle-xe-11g
</code></pre>
<p>컨테이너 처음 실행하고 2분 정도 기다려야 정상 접속됨.</p>
<pre><code>ls: cannot access /u01/app/oracle/oradata: No such file or directory
Database not initialized. Initializing database.
Setting up:
processes=500
sessions=555
transactions=610
If you want to use different parameters set processes, sessions, transactions env variables and consider this formula:
processes=x
sessions=x*1.1+5
transactions=sessions*1.1

Oracle Database 11g Express Edition Configuration
-------------------------------------------------
This will configure on-boot properties of Oracle Database 11g Express 
Edition.  The following questions will determine whether the database should 
be starting upon system boot, the ports it will use, and the passwords that 
will be used for database accounts.  Press &lt;Enter&gt; to accept the defaults. 
Ctrl-C will abort.

Specify the HTTP port that will be used for Oracle Application Express [8080]:
Specify a port that will be used for the database listener [1521]:
Specify a password to be used for database accounts.  Note that the same
password will be used for SYS and SYSTEM.  Oracle recommends the use of 
different passwords for each database account.  This can be done after 
initial configuration:
Confirm the password:

Do you want Oracle Database 11g Express Edition to be started on boot (y/n) [y]:
Starting Oracle Net Listener...Done
Configuring database...Done
Starting Oracle Database 11g Express Edition instance...Done
Installation completed successfully.
Database initialized. Please visit http://#containeer:8080/apex to proceed with configuration
Oracle Database 11g Express Edition instance is already started

Database ready to use. Enjoy! ;)
</code></pre>
<p>이런 말이 log에 나올 때까지 기다려야 한다.</p>
<h2 id="접속정보"><a class="header" href="#접속정보">접속정보</a></h2>
<ul>
<li>sid: XE</li>
<li>로그인: system / oracle</li>
</ul>
<h2 id="미리-생성되어-있는-계정-중-hr-사용하기"><a class="header" href="#미리-생성되어-있는-계정-중-hr-사용하기">미리 생성되어 있는 계정 중 HR 사용하기</a></h2>
<p>podman의 컨테이너 터미널에서 다음 실행</p>
<pre><code class="language-sql">root@f422033b47fe:/# sqlplus system/oracle

SQL*Plus: Release 11.2.0.2.0 Production on Thu Jun 26 12:58:53 2025

Copyright (c) 1982, 2011, Oracle.  All rights reserved.


Connected to:
Oracle Database 11g Express Edition Release 11.2.0.2.0 - 64bit Production

SQL&gt; ALTER USER HR ACCOUNT UNLOCK;

User altered.

SQL&gt; alter user hr identified by tiger;

User altered.

SQL&gt; 
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="유틸리티"><a class="header" href="#유틸리티">유틸리티</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="joplin"><a class="header" href="#joplin">joplin</a></h1>
<h2 id="joplin에서-mdbook으로-넘어온-이유"><a class="header" href="#joplin에서-mdbook으로-넘어온-이유">joplin에서 mdbook으로 넘어온 이유</a></h2>
<ul>
<li>
<p>잦은 동기화 오류.<br />
여러 기기에서 사용하다 보니 충돌 폴더가 생기고 그 안에 자꾸 내용이 쌓이고 있어 불안하다.<br />
그리고 작성한 기억이 있는데 동기화 하다보면 사라진 거 같은 느낌이 있다. 아 이건 정확하지 않아 뭐라 하기 어렵긴 하다.</p>
</li>
<li>
<p>이미지 처리의 불편함.<br />
이미지가 하나의 폴더에 전부 다 들어간다. 나중에 이 파일 찾기도 어렵다.</p>
</li>
<li>
<p>사실 아이패드나 핸드폰에서는 보기만 하지 작성은 하지 않는다. 작성할 일이 있으면 디바이스마다 죄다 다 펜을 사놨는데 그걸로 메모해 놨다가 나중에 다시 mdbook에 적어 넣으면 된다.</p>
</li>
<li>
<p>joplin은 md 표준을 지키지 않는다.
예를 들면 문장 맨 뒤에 space 2개를 넣지 않아도 자동으로 개행이 된다. 나중에 굉장히 난잡한 글을 보게 될 거 같아 걱정스럽다.</p>
</li>
<li>
<p>나는 온전한 md 파일을 내 로컬에 남기고 싶다.</p>
</li>
<li>
<p>mdbook에 대한 일종의 믿음(?)</p>
</li>
</ul>
<h2 id="joplin에서-mdbook으로-넘어올-때-아쉬웠던-점"><a class="header" href="#joplin에서-mdbook으로-넘어올-때-아쉬웠던-점">joplin에서 mdbook으로 넘어올 때 아쉬웠던 점</a></h2>
<ul>
<li>joplin은 종단간 암호화 동기화 기능을 지원한다.</li>
<li>쉬운 tags, backlinks 기능</li>
<li>다양한 플러그인들(하지만 내가 만들어 버리지 모).</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="podcast"><a class="header" href="#podcast">podcast</a></h1>
<p>역대 최고 편한 앱은 구글 팟캐스트였지만, 이제 android에서도 podcast를 비교적 쉽게 쓸 수 있게 되었음.<br />
apple이 <a href="https://podcasts.apple.com" title="" target="_blank">웹</a>에서 팟캐스트를 지원하기 시작했기 때문.</p>
<p>PC 브라우저에서 너무 잘 됨. 제일 편함. playlist 버튼이 바로 보임. playlist에 (전체) 지우기 버튼이 있음. playlist 내에서 순서바꾸기는 안됨.</p>
<p>android에서는 좀 불편해도 여튼 쓸 수 있음.</p>
<h2 id="web을-app으로-만들기"><a class="header" href="#web을-app으로-만들기">web을 app으로 만들기</a></h2>
<p>따로 설명 안함</p>
<h2 id="app으로-사용할-때-문제점"><a class="header" href="#app으로-사용할-때-문제점">app으로 사용할 때 문제점</a></h2>
<p><img src="utility/img/20241220222128.png" alt="" /></p>
<p>소리가 나고 있는데 아무리 찾아봐도 재생 창이 안 나타난다.<br />
재생창에 playlist 버튼이 있기 때문에 재생 창을 찾아야 한다.</p>
<h2 id="app으로-사용할-때-재생-창-보는-법"><a class="header" href="#app으로-사용할-때-재생-창-보는-법">app으로 사용할 때 재생 창 보는 법</a></h2>
<p>화면을 가로로 회전시키면 위에 저렇게 재생 창이 나타난다.</p>
<p><img src="utility/img/20241220222139.png" alt="" /></p>
<p>저 빨간 부분을 터치한다.</p>
<p><img src="utility/img/20241220222150.png" alt="" /></p>
<p>그럼 이렇게 재생 창이 나타난다. 그런데 여기서 아무리 찾아봐도 playlist 버튼이 안나온다. playlist를 보려면 다시 원래대로 세로로 회전시키면 된다.</p>
<p><img src="utility/img/20241220222159.png" alt="" /></p>
<p>** 2024. 12. 1. 추가 **<br />
1, 2주 전부터 이제 저렇게 회전 회전 하지 않아도 그냥 재생 창이 잘 보인다. 애플이 수정한듯.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="powertoys"><a class="header" href="#powertoys">powertoys</a></h1>
<h2 id="powerrename-을-이용해-자동으로-확장자-붙이기inkscape-export-후"><a class="header" href="#powerrename-을-이용해-자동으로-확장자-붙이기inkscape-export-후">powerRename 을 이용해 자동으로 확장자 붙이기(inkscape export 후)</a></h2>
<p><img src="utility/powertoys/img/20241220222538.png" alt="" /><br />
<img src="utility/powertoys/img/20241220222545.png" alt="" /></p>
<p>이렇게 설정하면 한 번에 자동으로 확장자를 붙여줄 수 있다.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="powershell"><a class="header" href="#powershell">powerShell</a></h1>
<h2 id="powershell-버전확인"><a class="header" href="#powershell-버전확인">powerShell 버전확인</a></h2>
<pre><code>PS E:\TEST\nextjs&gt; $PSVersionTable

Name                           Value
----                           -----
PSVersion                      5.1.19041.5607
PSEdition                      Desktop
PSCompatibleVersions           {1.0, 2.0, 3.0, 4.0...}
BuildVersion                   10.0.19041.5607
CLRVersion                     4.0.30319.42000
WSManStackVersion              3.0
PSRemotingProtocolVersion      2.3
SerializationVersion           1.1.0.1
</code></pre>
<h2 id="powershell-최신버전-확인"><a class="header" href="#powershell-최신버전-확인">powerShell 최신버전 확인</a></h2>
<pre><code>PS E:\TEST\nextjs&gt; winget search Microsoft.PowerShell
'msstore' 원본을 사용하려면 다음 계약을 확인해야 합니다.
Terms of Transaction: https://aka.ms/microsoft-store-terms-of-transaction
원본이 제대로 작동하려면 현재 컴퓨터의 두 글자 지리적 지역을 백 엔드 서비스로 보내야 합니다(예: "미국").

모든 원본 사용 약관에 동의하십니까?
[Y] 예  [N] 아니요: y
이름               장치 ID                      버전    원본
---------------------------------------------------------------
PowerShell         Microsoft.PowerShell         7.5.0.0 winget
PowerShell Preview Microsoft.PowerShell.Preview 7.6.0.3 winget
</code></pre>
<h2 id="powershell-최신버전-설치"><a class="header" href="#powershell-최신버전-설치">powerShell 최신버전 설치</a></h2>
<pre><code>PS E:\TEST\nextjs&gt; winget install Microsoft.PowerShell
찾음 PowerShell [Microsoft.PowerShell] 버전 7.5.0.0
이 응용 프로그램의 라이선스는 그 소유자가 사용자에게 부여했습니다.
Microsoft는 타사 패키지에 대한 책임을 지지 않고 라이선스를 부여하지도 않습니다.
다운로드 중 https://github.com/PowerShell/PowerShell/releases/download/v7.5.0/PowerShell-7.5.0-win-x64.msi
  ██████████████████████████████   107 MB /  107 MB
설치 관리자 해시를 확인했습니다.
패키지 설치를 시작하는 중...
설치 성공
</code></pre>
<p>이렇게 설치하면 기존 파란 화면의 powerShell이 남아있고 검은 화면의 PowerShell 7이 생겨남. PowerShell 7이 지금 새로 설치한 것임.</p>
<h2 id="utf-8-사용"><a class="header" href="#utf-8-사용">utf-8 사용</a></h2>
<p>utf-8을 사용하려면 아래를 ps에 복붙하면 된다.</p>
<pre><code class="language-ps">$env:LC_ALL='C.UTF-8'
[System.Console]::InputEncoding = [System.Console]::OutputEncoding = [System.Text.Encoding]::UTF8
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libre-office"><a class="header" href="#libre-office">libre office</a></h1>
<p>libre office에서 만든 문서를 inDesign에서 가져오기 하면 가져오기 에러가 나는 이유: libre office에서 이미지에 투명도를 설정해 줬기 때문.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="노트"><a class="header" href="#노트">노트</a></h1>
<p>노트 혹은 메모하는 방법 정리.</p>
<h2 id="노트를-위한-폴더-만드는-법"><a class="header" href="#노트를-위한-폴더-만드는-법">노트를 위한 폴더 만드는 법</a></h2>
<p>예를 들어,</p>
<ul>
<li>노트<br />
+– MDBook<br />
+– MKDocs<br />
+– HUGO</li>
</ul>
<p>와 같은 식으로 메뉴를 만들고 싶다면, 폴더도 저런 식으로 만들고 싶어진다.</p>
<p>그런데 폴더는 저런 식으로 만들면 안 된다.</p>
<p>폴더 자체는,</p>
<p>/노트<br />
/MDBook<br />
/MKDocs<br />
/HUGO</p>
<p>로 각각 4개를 만들고, summary.md 파일처럼 목록을 정해주는 곳에서<br />
메뉴 구성만</p>
<ul>
<li>노트<br />
+– MDBook<br />
+– MKDocs<br />
+– HUGO</li>
</ul>
<p>sub category 구조로 해줘야 한다.</p>
<p>대부분의 컨텐츠는 한 category에만 속하지 않고 여러 category에 걸쳐 속해 있기 때문이다. 그래서 나중에 폴더 구조를 바꿔야 할 때도 있는데 그 때 변경을 쉽게 하려면 컨텐츠 폴더는 각각 만들고 목록 정해주는 파일만 고쳐주면 되도록 준비해 놔야 한다.</p>
<p>지금 이미 note 밑에 MDBook 폴더를 만들어 놔서 이거 어떻게 다 고칠지 걱정이다. MDBook은 그냥 note 폴더에 놔둘까…</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="mdbook"><a class="header" href="#mdbook">mdbook</a></h1>
<h2 id="기본-사용법"><a class="header" href="#기본-사용법">기본 사용법</a></h2>
<ul>
<li>공식: https://rust-lang.github.io/mdBook/guide/installation.html</li>
<li>블로그: https://piatoss3612.tistory.com/105</li>
</ul>
<h3 id="프로젝트-생성-4"><a class="header" href="#프로젝트-생성-4">프로젝트 생성</a></h3>
<pre><code>mdbook init &lt;프로젝트명&gt;
</code></pre>
<h3 id="프로젝트-실시간-보기"><a class="header" href="#프로젝트-실시간-보기">프로젝트 실시간 보기</a></h3>
<pre><code>cd &lt;프로젝트명&gt;
mdbook serve --open
</code></pre>
<p>만약 포트번호를 3000번이 아닌 다른 번호(3001)로 주고 싶으면</p>
<pre><code>mdbook serve --open -p 3001
</code></pre>
<p>과 같이 한다.</p>
<h3 id="프로젝트-build"><a class="header" href="#프로젝트-build">프로젝트 build</a></h3>
<pre><code>mdbook build
</code></pre>
<p>기본적으로 &lt;프로젝트명&gt;/build 디렉토리에 결과물이 저장된다.<br />
그래서 mdbook init을 통해 자체 생산되는(optional) .gitignore 파일을 보면 book 디렉토리가 git ignore 되도록 하고 있다.</p>
<h3 id="mdbook-update"><a class="header" href="#mdbook-update">mdbook update</a></h3>
<pre><code>cargo install mdbook

...

Replaced package `mdbook v0.4.40` with `mdbook v0.4.43` (executable `mdbook.exe`)
</code></pre>
<h3 id="한글-검색이-안됨"><a class="header" href="#한글-검색이-안됨">한글 검색이 안됨.</a></h3>
<p>한글 검색 되게 하려면</p>
<pre><code>이런 작업$$task$$들은 식으로 영문도 옆에 적어두고 뭐 치환하라는데 장난하냐. 한글 검색 안 되어서 쓸모가 없어지네.
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="extensions-1"><a class="header" href="#extensions-1">extensions</a></h1>
<h2 id="mdbook-backlinks"><a class="header" href="#mdbook-backlinks">mdbook-backlinks</a></h2>
<p>https://crates.io/crates/mdbook-backlinks/0.2.7<br />
backlink를 걸어줌.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="mkdocs"><a class="header" href="#mkdocs">mkdocs</a></h1>
<h2 id="nav에서-섹션을-클릭했을-때도-문서가-열리도록"><a class="header" href="#nav에서-섹션을-클릭했을-때도-문서가-열리도록">nav에서 섹션을 클릭했을 때도 문서가 열리도록</a></h2>
<p>theme features에
navigation.indexes하면 된다.</p>
<h2 id="theme-디자인-건들지-않고-수정"><a class="header" href="#theme-디자인-건들지-않고-수정">theme 디자인 건들지 않고 수정</a></h2>
<p>이거 보고 함. material theme github.
https://squidfunk.github.io/mkdocs-material/customization/#additional-css</p>
<p>mkdocs는 theme의 css도 수정할 수 있게 했다.<br />
style.css 파일이 theme의 css를 customizing 하고 있다.</p>
<p><strong>mkdocs.yml 파일</strong></p>
<pre><code class="language-yaml">theme: 
  name: material

extra_css:
  - style.css
</code></pre>
<p>이렇게 수정하고, docs 폴더에 style.css 파일을 두면 된다.</p>
<br>
<p><strong>style.css 파일</strong></p>
<pre><code class="language-css">@font-face {
    font-family: 'Nanum Gothic';
    font-style: normal;
    font-weight: 400;
    src: url(./fonts/NanumGothic/NanumGothic-Regular.eot);
    src: url(./fonts/NanumGothic/NanumGothic-Regular.eot?#iefix) format('embedded-opentype'),
         url(./fonts/NanumGothic/NanumGothic-Regular.woff2) format('woff2'),
         url(./fonts/NanumGothic/NanumGothic-Regular.woff) format('woff'),
         url(./fonts/NanumGothic/NanumGothic-Regular.ttf) format('truetype');
}

@font-face {
    font-family: 'Nanum Gothic Bold';
    font-style: normal;
    font-weight: 700;
    src: url(./fonts/NanumGothic/NanumGothic-Bold.eot);
    src: url(./fonts/NanumGothic/NanumGothic-Bold.eot?#iefix) format('embedded-opentype'),
         url(./fonts/NanumGothic/NanumGothic-Bold.woff2) format('woff2'),
         url(./fonts/NanumGothic/NanumGothic-Bold.woff) format('woff'),
         url(./fonts/NanumGothic/NanumGothic-Bold.ttf) format('truetype');
}

@font-face {
    font-family: 'Nanum Gothic exBold';
    font-style: normal;
    font-weight: 800;
    src: url(./fonts/NanumGothic/NanumGothic-ExtraBold.eot);
    src: url(./fonts/NanumGothic/NanumGothic-ExtraBold.eot?#iefix) format('embedded-opentype'),
         url(./fonts/NanumGothic/NanumGothic-ExtraBold.woff2) format('woff2'),
         url(./fonts/NanumGothic/NanumGothic-ExtraBold.woff) format('woff'),
         url(./fonts/NanumGothic/NanumGothic-ExtraBold.ttf) format('truetype');
  }

@font-face {
    font-family: 'JalnanGothic';
    src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_231029@1.1/JalnanGothic.woff') format('woff');
}


h1
{
    font-family: 'Nanum Gothic exBold';    
    /*font-size: large;*/
    /*color: red;*/
    font-weight:bolder;

}

h2
{
    font-family: 'Nanum Gothic exBold';        
    /*color: red;*/
    font-weight:bolder;

}

h3
{
    font-family: 'Nanum Gothic exBold';
    /*color: green;*/
    font-weight: bolder;
    
}

p
{
    font-family: 'Nanum Gothic', sans-serif;    
    font-weight:400;
}
</code></pre>
<p><img src="note/mkdocs/img/20241220222412.png" alt="" /></p>
<p>h1은 아마도 색을 미리 정해 놓았나보다. 맨 위가 h1인데 css로는 글자색을 바꿀 수 없음. 폰트만 바꿀 수 있다.
h2, h3를 전부 나눔고딕 extra bold로 해 놓았는데 잘 되고 있다.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="hugo"><a class="header" href="#hugo">hugo</a></h1>
<ul>
<li>theme가 없으면 not found page 에러가 난다.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="mindmap"><a class="header" href="#mindmap">mindmap</a></h1>
<h2 id="markdown-파일을-mmfreemind-freeplane-으로-바꾸기"><a class="header" href="#markdown-파일을-mmfreemind-freeplane-으로-바꾸기">markdown 파일을 mm(freemind, freeplane) 으로 바꾸기</a></h2>
<p>https://github.com/unhurried/md-to-mm</p>
<p>여기서 markdown 파일을 freemind나 freeplane에서 사용하는 mm파일로 바꿀 수 있다.</p>
<p>freeplane이 freemind를 fork한 거다.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="pandoc"><a class="header" href="#pandoc">pandoc</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="latex"><a class="header" href="#latex">LaTeX</a></h1>
<p>LaTeX</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="latex-1"><a class="header" href="#latex-1">LaTeX</a></h1>
<ul>
<li><a href="latex/./latex001.html">Visual Studio Code에서 lualatex 사용하기</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="latex-설치"><a class="header" href="#latex-설치">LaTeX 설치</a></h1>
<h3 id="1-perl-설치"><a class="header" href="#1-perl-설치">1. perl 설치</a></h3>
<p>LaTeX Build는 Perl로 이루어진다.<br />
<a href="https://strawberryperl.com" title="" target="_blank">strawberry perl</a> 설치해 사용함.</p>
<h3 id="2-vscode-extension-중-latex-workshop-설치"><a class="header" href="#2-vscode-extension-중-latex-workshop-설치">2. vscode extension 중 <code>LaTeX Workshop</code> 설치</a></h3>
<p>LuaLaTeX를 사용하려면 <a href="latex/./latex001.html">여기</a>를 눌러 vscode를 세팅해야 함.</p>
<h3 id="3-latex-live-설치"><a class="header" href="#3-latex-live-설치">3. LaTeX Live 설치</a></h3>
<p>https://www.tug.org/texlive/windows.html#install</p>
<p>엄청 오래 걸림.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="visual-studio-code에서-lualatex-사용하기"><a class="header" href="#visual-studio-code에서-lualatex-사용하기">Visual Studio Code에서 lualatex 사용하기</a></h1>
<p>LaTeX는 기본적으로 시스템에 설치된 true type 글꼴을 지원하지 않기 때문에 lualatex를 사용해야 한다. lualatex는 기본적으로 한글을 지원한다(utf-8)</p>
<p>vscode에서 LaTeX workshop 익스텐션을 설치한 상태에서 lualatex를 사용하려면 다음과 같이 해야 한다.</p>
<p><img src="latex/img/20250401135927.png" alt="" /></p>
<ol>
<li>
<p>설치한 LaTeX Workshop 익스텐션을 찾아 톱니바퀴를 누른다.</p>
</li>
<li>
<p>settings가 나오면 검색창 뒤에 ’force’를 붙여 <code>LaTeX-Workshop &gt; Latex &gt; Build: Force Recipe Usage</code> 항목을 찾는다.</p>
</li>
<li>
<p>디폴트로 체크되어 있는건데, 이 체크를 풀어준다(체크 표시가 없어져야 함). 매직 커멘트를 적어놔도 무시하고 recipe를 무조건 쓰겠다는 옵션인데 우리는 매직 커멘트를 쓸 것이기 때문.</p>
</li>
<li>
<p>vscode를 닫고 다시 실행한다.</p>
</li>
<li>
<p>.tex 파일의 맨 위에 아래 매직 커멘트를 붙인다.</p>
<pre><code class="language-tex">% !TEX TS-program = lualatex
</code></pre>
<p>가장 간단한 전체 코드는 다음과 같다.</p>
<pre><code class="language-tex">% !TEX TS-program = lualatex

\documentclass{article}
\usepackage{fontspec}
\setmainfont{Nanum Gothic}

\begin{document}
한글도 잘 된다. 이제 나눔고딕 글꼴을 기본 글꼴로 사용할 수 있다.
\end{document}
</code></pre>
</li>
<li>
<p>빌드(Ctrl + Alt + B)해서 확인한다.
<img src="latex/img/20250401140837.png" alt="" /></p>
</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="소스코드-보이기"><a class="header" href="#소스코드-보이기">소스코드 보이기</a></h1>
<p>lualatex 이용해 소스코드 보여주는 방법</p>
<p><img src="latex/img/20250401194059.png" alt="" /></p>
<p>[LaTeX 코드]</p>
<pre><code class="language-tex">% !TEX TS−program = lualatex
\documentclass{article}
\usepackage{listings} % 코드 목록을 위한 패키지
\usepackage{tcolorbox} % 색상을 사용하기 위한 패키지
\usepackage{caption} % 캡션 설정
\usepackage{fontspec} % TTF 사용위한 패키지

\setmainfont{Nanum Gothic}

% D2Coding 폰트 설정
\newfontfamily{\DTwoCoding}{D2Coding}

% 색상 정의
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.9,0.9,0.9}

% 캡션 설정
\captionsetup{
    justification=raggedright, % 코드 캡션을 왼쪽 정렬로 설정
    singlelinecheck=false,
    labelformat=empty, % 앞에 Listing 1: 을 사용하지 않음
    font=small % 글씨 크기를 작게. small 등 사용 가능
}

% listings 스타일 설정
\lstdefinestyle{mystyle}{
    basicstyle=\DTwoCoding \normalsize, % D2Coding 폰트를 사용. 글씨크기 보통
    %numbers=left, % 줄 번호 위치
    numberstyle=\small, % 줄 번호 스타일
    keywordstyle=\color{blue}, % 키워드 스타일
    commentstyle=\color{codegreen}, % 주석 스타일
    stringstyle=\color{purple}, % 문자열 스타일
    backgroundcolor=\color{backcolour}, % 배경색
    breaklines=true, % 자동 줄 바꿈
    showstringspaces=false, % 문자열 내 빈 칸 기호 표시 비활성화
    xleftmargin=0pt, % 왼쪽 여백
    frame=single, % 코드 블록에 테두리 추가
    framerule=0pt, % 테두리 두께 설정 (1pt)
    rulecolor=\color{gray}, % 테두리 색상 설정 파란색()
    framesep=10pt, % 테두리와 블록 사이의 간격
    lineskip=2pt, % 줄 간격 설정
    keepspaces=true,
    columns=fullflexible, % 유니코드 문자 정렬 문제 해결
    inputencoding=utf8, % UTF−8 인코딩
}

\begin{document}
\lstset{style=mystyle} % 정의한 스타일을 사용 설정
%\begin{tcolorbox}[colback=white, colframe=black, title=Python Example, boxrule=0.5mm, left=5mm,right=5mm, top=5mm, bottom=5mm]

\begin{lstlisting}[language=Python, caption = 파이썬 샘플2]
# This is a sample Python code
def hello_world():
    print("Hello, World!")
hello_world()

\end{lstlisting}
%\end{tcolorbox}
\end{document}
</code></pre>
<br>
위 코드는 다른 문제도 있다. 
<p><img src="latex/img/20250401213315.png" alt="" /></p>
<p>lstlistring 안에 한글과 영문이 한꺼번에 붙어 있으면 순서가 엉망이 된다. 하.<br />
caption=파이썬 샘플 2 인데 이게 caption파이썬= 샘플2가 된다.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tkiz"><a class="header" href="#tkiz">tkiz</a></h1>
<ul>
<li><a href="tkiz/./tkiz001.html">한 각의 각도를 표시한 삼각형</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="한-각의-각도를-표시한-삼각형"><a class="header" href="#한-각의-각도를-표시한-삼각형">한 각의 각도를 표시한 삼각형</a></h1>
<p>[triangle.tex]</p>
<pre><code class="language-tex">\documentclass{article}
\usepackage{tikz}
\usetikzlibrary{angles,quotes} % 각도 표시를 위한 라이브러리

\begin{document}
\begin{tikzpicture}
    % 원점을 기준으로 첫 번째 선 그리기
    \draw[thick] (0,0) -- (5,0);
    
    % 두 번째 선을 37.5도 각도로 그리기
    \draw[thick] (0,0) -- ++(37.5:5) -- (5,0);
    
    % 각도 표시
    \draw[thick] (0.8,0) arc [start angle=0, end angle=37.5, radius=0.8];
    \node at (1.3,0.4) {37.5$^\circ$};
\end{tikzpicture}
\end{document}
</code></pre>
<p>결과</p>
<p><img src="tkiz/img/20250401143129.png" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="3줄일기"><a class="header" href="#3줄일기">3줄일기</a></h1>
<p>하루 딱 3줄만 쓰는 일기</p>
<p>일본 고바야시 히로유키라는 정신과 의사가 고안했다고 함. 책도 있음.</p>
<p>관련 글: <a href="https://m.blog.naver.com/28belbong2/222677002193" title="" target="_blank">https://m.blog.naver.com/28belbong2/222677002193</a></p>
<p>방법이 다양하다.</p>
<ol>
<li>가장 안 좋았던 일 / 가장 좋았던 일 / 내일 계획  			| 안 / 좋 / 내</li>
<li>가장 잘 한일 / 가장 못한 일 / 내일 계획				| 잘 / 못 / 내</li>
<li>가장 인상깊었던 일 / 그에 대한 나의 감정 / 내일의 다짐|	| 인 / 감 / 내</li>
</ol>
<p>책에 적혀 있는 방법은 1번 방법이다.<br />
최대한 간단하게 써야 한다 함.<br />
정신건강, 삶의 방향을 관리할 수 있다고.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="pdf"><a class="header" href="#pdf">pdf</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="pdf-내용-수정하기"><a class="header" href="#pdf-내용-수정하기">pdf 내용 수정하기</a></h1>
<h2 id="pdf-읽어들여-수정---inkscape"><a class="header" href="#pdf-읽어들여-수정---inkscape">pdf 읽어들여 수정 - inkscape</a></h2>
<p>pdf 파일을 inkscape에서 읽어들인다. inkscape 1.4.2 사용</p>
<p><img src="pdf/img/20250719203803.png" alt="" /></p>
<p><img src="pdf/img/20250719230124.png" alt="" /></p>
<p>첫 페이지는 빈 페이지고 그 다음 페이지부터 pdf 파일의 내용이 보여진다.</p>
<p>inkscape를 이용해 내용을 마음껏 수정한다.</p>
<p><img src="pdf/img/20250719230650.png" alt="" /></p>
<p>그리고 내보내기를 하면서 ‘페이지’ 탭을 선택한 후</p>
<ol>
<li>single file 선택</li>
<li>페이지 선택</li>
<li>확장자를 ’pdf’로 변경하면 여러 페이지를 선택할 수 있다.</li>
<li>저장될 파일명을 선택하고</li>
<li>저장할 페이지들을 선택한다.</li>
</ol>
<p>여기서 page1은 선택을 풀어준다. 이 페이지는 맨 처음 앱을 실행할 때 만들어져 있던 페이지로 내용이 비어있다.</p>
<p>이제 ‘내보내기’ 버튼을 누르면 하나의 완성된 파일이 만들어진다.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="마케팅"><a class="header" href="#마케팅">마케팅</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="팔지마라-해결해줘라"><a class="header" href="#팔지마라-해결해줘라">팔지마라. 해결해줘라</a></h1>
<p><a href="https://www.linkedin.com/feed/update/urn:li:activity:7264963259730976768" title="" target="_blank">https://www.linkedin.com/feed/update/urn:li:activity:7264963259730976768</a></p>
<p>팔지 말고 그들의 문제점을 해결해 줘라.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="콘텐츠"><a class="header" href="#콘텐츠">콘텐츠</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="저작권"><a class="header" href="#저작권">저작권</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="유튜브-링크를-걸면-저작권-위반인지에-대한-대법원-판결"><a class="header" href="#유튜브-링크를-걸면-저작권-위반인지에-대한-대법원-판결">유튜브 링크를 걸면 저작권 위반인지에 대한 대법원 판결</a></h1>
<p>유튜브 등 링크를 무단으로 걸면 저작권 등 침해일까?</p>
<p>https://www.youtube.com/watch?v=lqaJvTl5oZA</p>
<p>대법원 2015. 3. 12. 판결에서 경로를 나타낸 것에 불과하여 저작권 침해가 아니라고 판결.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="유튜브"><a class="header" href="#유튜브">유튜브</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="유튜브에서-광고-허용-요청"><a class="header" href="#유튜브에서-광고-허용-요청">유튜브에서 광고 허용 요청</a></h1>
<p>brave browser 쓰는 데 2024. 12. 21.에 이 메시지 처음 보여줌.<br />
<img src="youtube/img/20241221091624.png" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="팟캐스트"><a class="header" href="#팟캐스트">팟캐스트</a></h1>
<h2 id="팟캐스트-릴리즈"><a class="header" href="#팟캐스트-릴리즈">팟캐스트 릴리즈</a></h2>
<p>github pages를 이용해 릴리즈 하는 경우 많다 함.</p>
<br />
<h2 id="rssxml"><a class="header" href="#rssxml">rss.xml</a></h2>
<h3 id="mdbook으로-rss를-생성하는-방법"><a class="header" href="#mdbook으로-rss를-생성하는-방법">mdbook으로 rss를 생성하는 방법</a></h3>
<h4 id="1-mdbook-rss-설치"><a class="header" href="#1-mdbook-rss-설치">1. <code>mdbook-rss</code> 설치</a></h4>
<pre><code>cargo install mdbook-rss
</code></pre>
<h4 id="2-markdown-파일-위에-메타데이터-추가"><a class="header" href="#2-markdown-파일-위에-메타데이터-추가">2. markdown 파일 위에 메타데이터 추가</a></h4>
<pre><code>---
title: "에피소드 제목"
pub_date: "2024-05-06"
author: "저자 이름"
url: "https://example.com/episode-url"
description: "에피소드 설명"
---
</code></pre>
<h4 id="3-booktoml-파일에-mdbook-rss를-프리프로세서로-추가"><a class="header" href="#3-booktoml-파일에-mdbook-rss를-프리프로세서로-추가">3. book.toml 파일에 mdbook-rss를 프리프로세서로 추가</a></h4>
<h4 id="4-mdbook-build-하면-boolrssxml-파일이-생성됨"><a class="header" href="#4-mdbook-build-하면-boolrssxml-파일이-생성됨">4. mdbook build 하면 bool\rss.xml 파일이 생성됨.</a></h4>
<div style="break-before: page; page-break-before: always;"></div><h1 id="자격증"><a class="header" href="#자격증">자격증</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="버스1종-대형-면허"><a class="header" href="#버스1종-대형-면허">버스(1종 대형 면허)</a></h1>
<p>1종 대형 면허증을 따는 방법에 대해 많은 글들이 있지만 아래 몇 개만 제대로 보면 된다.</p>
<h2 id="1-전체-진행-파악"><a class="header" href="#1-전체-진행-파악">1. 전체 진행 파악</a></h2>
<iframe width="1280" height="720" src="https://www.youtube.com/embed/rLWJMhwvsB0?si=Oj1ZivaayG0EkaAo" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
<h2 id="2-코스-및-점수-내역-파악"><a class="header" href="#2-코스-및-점수-내역-파악">2. 코스 및 점수 내역 파악</a></h2>
<p><a href="https://www.koroad.or.kr/main/board/9/87890/board_view.do?&cp=1&listType=list&bdOpenYn=Y&bdNoticeYn=N" title="" target="_blank">https://www.koroad.or.kr/main/board/9/87890/board_view.do?&amp;cp=1&amp;listType=list&amp;bdOpenYn=Y&amp;bdNoticeYn=N</a></p>
<p>내가 응시할 면허 시험장의 코스가 있는지 찾아보는 것도 필요함.</p>
<h2 id="3-인천면허-시험장-실제-시험-영상보고-실제-시험-감각-잡기"><a class="header" href="#3-인천면허-시험장-실제-시험-영상보고-실제-시험-감각-잡기">3. 인천면허 시험장 실제 시험 영상보고 실제 시험 감각 잡기</a></h2>
<iframe width="1280" height="720" src="https://www.youtube.com/embed/IFZnz9Frcgo?si=32eWNNStpQE8efcO" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
<p>이 영상까지 보면 아 시험을 이렇게 보는구나 싶은데 각 코스마다 실제로 어떻게 해야 통과하는지는 알 수 없다. 버스 운전은 자가용 자동차 운전과는 좀 다르니까. 아래 4번의 글을 보고 일종의 공식같은 걸 외우면 된다. 이런 공식이 왜 필요해라고 생각할 수 있는데, 공식이라기 보다는 거의 유일한 방법이라 생각하자.</p>
<h2 id="4-1종-대형-코스별-통과-요령-숙지"><a class="header" href="#4-1종-대형-코스별-통과-요령-숙지">4. 1종 대형 코스별 통과 요령 숙지</a></h2>
<p><a href="https://m.blog.naver.com/jakejeong/221551323349" title="" target="_blank">https://m.blog.naver.com/jakejeong/221551323349</a></p>
<p>원본은 어디에 있는지 모르겠음. 암튼 위 사이트에서 “1종대형 코스별 통과요령(1).pdf” 와 같은 pdf 파일 5개를 다운로드받아 보면 시험 과정을 모두 확인할 수 있다.</p>
<h2 id="5-인천면허-시험장-실제-시험-영상보고-실제-시험-해-보기"><a class="header" href="#5-인천면허-시험장-실제-시험-영상보고-실제-시험-해-보기">5. 인천면허 시험장 실제 시험 영상보고 실제 시험 해 보기</a></h2>
<iframe width="1280" height="720" src="https://www.youtube.com/embed/IFZnz9Frcgo?si=32eWNNStpQE8efcO" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
<p>영상을 틀어놓고 4의 1종 대형 코스별 통과 요령 pdf 파일을 보면서 각 코스를 같이 진행한다.</p>
<h2 id="6-시뮬레이션"><a class="header" href="#6-시뮬레이션">6. 시뮬레이션</a></h2>
<p>OMSI2로 한다 함.<br />
<a href="https://gall.dcinside.com/mini/board/view/?id=omsi2&no=6375&s_type=search_subject_memo&s_keyword=%EB%A9%B4%ED%97%88&page=1" title="" target="_blank">청주 면허시험장 맵</a>을 공유하는 사람들도 있음.</p>
<iframe width="1280" height="720" src="https://www.youtube.com/embed/6sSiaVxCLSk" title="[1종대형] 01 굴절 수정 - 학원 안 가고 합격하기 - 3D 입체시각" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe><div style="break-before: page; page-break-before: always;"></div><h1 id="전북면허시험장"><a class="header" href="#전북면허시험장">전북면허시험장</a></h1>
<p>코스의 노란선은 잘 보인다.<br />
클러치를 완전히 다 올려야 차가 움직인다. 그래서 반클러치가 없다.<br />
오늘 떨어진 이유도 이 때문.<br />
처음 시작하자마자 20초 동안 차를 움직이지 못해 벌점 5점 먹었다.  기어를 몇 번이나 다시 넣고 엄청 놀람.<br />
경사로에서 힘들 거 같다.</p>
<h1 id="head"><a class="header" href="#head">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</a></h1>
<p>전북면허시험장 1종 대형은 대우 NEW BS106을 사용한다고 한다.(<a href="https://namu.wiki/w/%EB%8C%80%ED%95%9C%EB%AF%BC%EA%B5%AD%EC%9D%98%20%EC%9A%B4%EC%A0%84%EB%A9%B4%ED%97%88%20%EC%8B%9C%ED%97%98%EC%9E%A5#s-4.5.1" title="" target="_blank">나무위키</a>)</p>
<h2 id="동영상"><a class="header" href="#동영상">동영상</a></h2>
<iframe width="800" height="450" src="https://www.youtube.com/embed/ER6Q2nGIZQo?list=TLPQMjYwMTIwMjUPxl1fcQCoPA" title="전북운전면허시험장 💡1종 대형 기능시험 코스 안내💡" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
<p>이 영상 끝에 드론에서 내려다 본 영상 나옴.</p>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>1330d4736a5d0cec2bc699f381e358a95d825a60</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<h2 id="버스-조작"><a class="header" href="#버스-조작">버스 조작</a></h2>
<ul>
<li>반 클러치 안 됨. 앞으로 가려면 발에서 클러치를 완전히 떼야 함.</li>
<li>기어<br />
<img src="license/bus/img/20241219172025.png" alt="" /></li>
<li>R 놓을 때 레버 위로 올리는 거 없음. 그냥 R로 가면 됨.</li>
<li>비상등: 오른쪽 레버 위로 올리면 켜지고, 내리면 꺼진다.</li>
</ul>
<h2 id="좋은-점"><a class="header" href="#좋은-점">좋은 점</a></h2>
<p>처음 시작할 때 코스를 한 번에 해버려서 시간을 더 절약할 수 있고, S코스를 오른쪽에 바로 붙여서 들어갈 수 있어 통과할 확률이 훨씬 높아졌다.</p>
<h2 id="나쁜-점"><a class="header" href="#나쁜-점">나쁜 점</a></h2>
<p>그지같은 버스. 반클러치를 할 수가 없다.</p>
<h2 id="떨어진-이유"><a class="header" href="#떨어진-이유">떨어진 이유</a></h2>
<h3 id="1차전체-2차"><a class="header" href="#1차전체-2차">1차(전체 2차)</a></h3>
<h4 id="이유"><a class="header" href="#이유">이유</a></h4>
<ul>
<li>여기 버스는 반클러치를 할 수가 없다. 클러치에서 발을 떼야 차가 앞으로 간다. 반클러치 성공 못함. 이러다 20초 내에 출발 못해서 5점 깎이면서 엄청 당황함.</li>
<li>굴절에서 떨어짐. 바퀴를 11자로 놓아야 할 때 핸들을 완전히 오른쪽으로 돌려버려 차가 완전히 이상하게 가버렸다.</li>
</ul>
<h4 id="반성-할-일-기대"><a class="header" href="#반성-할-일-기대">반성, 할 일, 기대</a></h4>
<ul>
<li>여태까지는 경험이었지만 이제부터는 실전이다. 준비 제대로 해서 가자.</li>
<li>마인드 트레이닝 확실히 해가자. 굴절에서 후진 시 핸들을 완전히 오른쪽으로 돌려버릴 줄이야.</li>
<li>기어 외워 가자.</li>
<li>다음은 꼭 코스 통과까지 가자.</li>
</ul>
<h3 id="2차전체-3차"><a class="header" href="#2차전체-3차">2차(전체 3차)</a></h3>
<h4 id="이유-1"><a class="header" href="#이유-1">이유</a></h4>
<ul>
<li>코스는 다 통과했으나 속도가 느려서 굴절에서 5점, T자에서 5점(이상), 횡단보도에서 2m 앞 쯤에서 멈춰섰다고 한다.</li>
<li>T자 끝나고 횡단보도가 이렇게 빨리 나올 줄 몰랐는데 횡단보도가 나와서 당황한 것도 있다.</li>
</ul>
<h4 id="반성"><a class="header" href="#반성">반성</a></h4>
<ul>
<li>시간이 오래 걸린 건 클러치 때문인데 반 클러치가 안 되기 때문이다.</li>
<li>볼록거울 잘 보고 횡단보도 거의 직전에 멈춰서자. 이렇게 빨리 멈추면 사거리에서 무조건 떨어진다.</li>
</ul>
<h3 id="3차전체-4차"><a class="header" href="#3차전체-4차">3차(전체 4차)</a></h3>
<ul>
<li>버스가 2대 있다. 그 중 2호차는 반클러치가 된다. 3호차랑 클러치가 다르다.</li>
</ul>
<h4 id="이유-2"><a class="header" href="#이유-2">이유</a></h4>
<ul>
<li>굴절에서 검지선 건드림 5점. 시간 초과 5점</li>
<li>T코스에서 시간 초과 5점.</li>
<li>실격. 연석 건드림. 첫번째 교차로에서 1단 출발한 다음 2단으로 기어 안 들어감. 다시 1단으로도 안 들어감. 2단은 구멍을 못 찾은 느낌이고 1단은 드르르르 소리가 남. 기어 바꾸는 거 신경쓰느라 첫번쨰 교차로 지난 후 만난 우회전 길에서 크게 안 돌아 연석 건드림.</li>
</ul>
<h4 id="반성-1"><a class="header" href="#반성-1">반성</a></h4>
<ul>
<li>기어 안 들어가면 브레이크를 밟으라는 사람도 있고 클러치에서 발을 떼야 한다는 사람도 있었음. 기어 변속 구간 연습을 위해, 그 전에 돌면서 기어 바꿀 때 브레이크를 밟아야 할 지 클러치에서 발을 떼야 할지 테스트해봐야 함.</li>
<li>굴절에서 검지선 건드린 이유는 왼쪽으로 바짝 붙지 않아서임. 왼쪽으로 바짝 붙자.</li>
<li>T코스에서 확인되었습니다 듣고 왼쪽으로 최대한 틀어서 간 후 후진하지 않고 그냥 바로 우회전 했는데 검지선 안 건드림.</li>
</ul>
<h3 id="4차전체-5차"><a class="header" href="#4차전체-5차">4차(전체 5차)</a></h3>
<ul>
<li>3호차를 타게 됨. 접수순으로 시험보나 봄.</li>
</ul>
<h4 id="이유-3"><a class="header" href="#이유-3">이유</a></h4>
<ul>
<li>굴절에서 검지선 2번 건드림 10점. 시간 초과 5점</li>
<li>T코스에서 시간 초과 5점.</li>
<li>실격. 연석 건드림. 3차와 같은 곳.</li>
</ul>
<h4 id="반성-2"><a class="header" href="#반성-2">반성</a></h4>
<ul>
<li>3호차는 기어 2단 잘 들어갔음.</li>
<li>3차에서 떨어진 이유를 남 탓 했음. 기어 안들어가서 그거 신경 쓰느라 크게 안 돌았다고. 그런데 나는 그냥 신경을 안 쓰고 있으면 크게 돌아도 핸들을 너무 빨리 푸는 사람이었음. 90도 우회전할 때 크게 돌고 난 후에 사이드미러 보면서 핸들을 천천히 풀어야 하는데 자가용 차처럼 빨리 풀어버림. 그냥 내 탓이었음. 처음엔 천천히 돌다가 금방 잊어버리고 빨리 푸는 듯 함. 다음엔 꼭 핸들 천천히 풀자.</li>
<li>아마도 핸들 1자로 놓는 걸 하지 않은 듯 함. 하다보니 핸들을 덜 풀은 상태였음. 시간은 초과하지 않았음. 곡선끝났을 때 3분 40초 정도. 핸들 푸는 거 신경쓰자.</li>
</ul>
<h3 id="5차전체-6차"><a class="header" href="#5차전체-6차">5차(전체 6차)</a></h3>
<ul>
<li>3호차를 타게 됨. 가나다순으로 시험보나 봄.</li>
</ul>
<h4 id="이유-4"><a class="header" href="#이유-4">이유</a></h4>
<ul>
<li>굴절에서 검지선 2번 건드림 10점. 시간 초과 5점</li>
<li>T코스에서 시간 초과 5점.</li>
<li>횡단보도에서 멀리 떨어진 곳에서 멈춰서 5점 감점 꽤 바짝붙었었는데. 물어보니 기울어져서 들어와서 센서가 인식하지 못했던 거라 함.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="부동산"><a class="header" href="#부동산">부동산</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="임대"><a class="header" href="#임대">임대</a></h1>
<h2 id="계약일보다-한-달-후에-임차인이-나간-경우"><a class="header" href="#계약일보다-한-달-후에-임차인이-나간-경우">계약일보다 한 달 후에 임차인이 나간 경우</a></h2>
<p>예를 들어, 2024. 12. 31.까지 계약인데 1달 더 살아 2025. 1. 31.까지 살고, 새 임차인 계약 시작일이 2025. 2. 1.라면<br />
rent home에 등록할 때, 다음과 같이 함.</p>
<ul>
<li>
<p>1년 이하 계약: 상관없음. 그냥 그 한 달은 비워놓고 신고하면 됨.</p>
</li>
<li>
<p>2년 계약</p>
<ul>
<li>만기일 이전에 새 임차인 계약: 상관없음. 그냥 그 한 달은 비워놓고 신고하면 됨.</li>
<li>만기일 이후에 새 임차인 계약: 다음 둘 중 하나 선택(빨리 해야 함)
<ul>
<li>새로 1달짜리 계약서를 쓰고 신고.</li>
<li>연장에 대한 묵시적 갱신으로 신고.</li>
</ul>
</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="취미"><a class="header" href="#취미">취미</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="그림그리기"><a class="header" href="#그림그리기">그림그리기</a></h1>
<h2 id="클립스튜디오-1-ex-마스크-사용법"><a class="header" href="#클립스튜디오-1-ex-마스크-사용법">클립스튜디오 1 ex 마스크 사용법</a></h2>
<p>https://youtu.be/uQFVh0jNMiE</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="그림그리기-1"><a class="header" href="#그림그리기-1">그림그리기</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="시계만들기"><a class="header" href="#시계만들기">시계만들기</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="초침규격"><a class="header" href="#초침규격">초침규격</a></h1>
<p>다양한 초침 파는 곳:
https://www.coupang.com/vp/products/7616826975?itemId=20184919564</p>
<h2 id="내가-주로-쓰는-스즈끼-규격"><a class="header" href="#내가-주로-쓰는-스즈끼-규격">내가 주로 쓰는 스즈끼 규격</a></h2>
<p>https://www.coupang.com/vp/products/6750290910?itemId=15785648375</p>
<ul>
<li>시 바늘: 5.2mm</li>
<li>분 바늘: 3.4mm</li>
</ul>
<h2 id="8inch-x-8inch-액자-안에-넣는-경우"><a class="header" href="#8inch-x-8inch-액자-안에-넣는-경우">8inch x 8inch 액자 안에 넣는 경우</a></h2>
<p>중점에서 최대 가로폭까지 거리가 <strong>90mm</strong>(최대 95mm까지는 될 듯)</p>
<h2 id="4inch-x-4inch-액자-안에-넣는-경우"><a class="header" href="#4inch-x-4inch-액자-안에-넣는-경우">4inch x 4inch 액자 안에 넣는 경우</a></h2>
<p>https://www.coupang.com/vp/products/6266572371?itemId=12791318654</p>
<p><img src="hobby/clock/:/dc0e7e544c184c15a42a39e02a99b2b2" alt="ef7ec42b7432fe0009e8f0ede61f6cf9.png" /></p>
<p>중점에서 최대 가로폭까지 거리가 <strong>45mm</strong></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="피아노"><a class="header" href="#피아노">피아노</a></h1>
<div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><h1 id="프로그램-설치"><a class="header" href="#프로그램-설치">프로그램 설치</a></h1>
<ul>
<li>
<p>무료 analog lab 프로그램 설치:</p>
<ul>
<li>https://www.arturia.com/products/software-instruments/analoglab/free</li>
<li>하지만 이 프로그램은 아래 설치할 ASC에서 설치하도록 하자.</li>
</ul>
</li>
<li>
<p>ASC(Arturia Software Center) 설치:</p>
<ul>
<li>https://www.arturia.com/fr/support/downloads-manuals</li>
<li>그리고 이 안에서 MIDI Control Center를 설치하면 드라이버가 설치되고 펌웨어 버전과 업데이트도 자동으로 할 수 있다.</li>
</ul>
</li>
</ul>
<h1 id="관련-youtube-video"><a class="header" href="#관련-youtube-video">관련 Youtube Video</a></h1>
<p>https://www.youtube.com/watch?v=490krwG0qDk</p>
<h1 id="firmware-upgrade"><a class="header" href="#firmware-upgrade">firmware upgrade</a></h1>
<p>ASC(Arturia Software Center)를 설치한 다음, MIDI Control Center를 설치하면 현재 펌웨어 버전을 보여준다.</p>
<p>이 프로그램에서 최신 버전을 자동으로 다운로드받아 설치할 수 있다.</p>
<p><img src="hobby/piano/img/20241220221147.png" alt="" /></p>
<p>펌웨어 버전을 누르면 창이 나오는데 가운데에 지금은 최신 버전으로 펌웨어 업그레이드 되어 안 보이는 버튼이 하나 나타나는데, “Download latest” 버튼이다. 그걸 누르면 자동으로 펌웨어를 다운로드받고 설치한다.</p>
<h1 id="가만-놔두면-불빛이-번쩍번쩍거린다"><a class="header" href="#가만-놔두면-불빛이-번쩍번쩍거린다">가만 놔두면 불빛이 번쩍번쩍거린다.</a></h1>
<p>MIDI Control Center에서 Device Settings로 들어가 Vegas Mode를 “disable” 로 바꾼다.</p>
<p><img src="hobby/piano/:/4d8994741c12478c94c307102f1fba9f" alt="aa81f175d8f9b7f3c91e0cce24fb504a.png" /></p>
<p>관련 글: https://legacy-forum.arturia.com/index.php?topic=95080.0</p>
<h1 id="매뉴얼"><a class="header" href="#매뉴얼">매뉴얼</a></h1>
<p><a href="hobby/piano/:/ce18ef6086b0466987892bbf0fad88b3">keylab-essential_Manual_1_0_0_EN.pdf</a></p>
<p>다운로드 URL: https://downloads.arturia.com/products/keylab-essential-49/manual/keylab-essential_Manual_1_0_0_EN.pdf</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="아이패드와-연결"><a class="header" href="#아이패드와-연결">아이패드와 연결</a></h1>
<p>keylab 61과 아이패드를 연결하는 방법을 찾아보니 3가지 방법이 나옴.</p>
<h2 id="1-otg-케이블"><a class="header" href="#1-otg-케이블">1. OTG 케이블</a></h2>
<p>https://www.coupang.com/vp/products/7685325978?itemId=20536740130</p>
<p><img src="hobby/piano/img/20241220221319.png" alt="" /></p>
<p>이걸 쓰면 직접 연결할 수 있을 거 같다.</p>
<p>3미터면 너무 긴데.. 하면서 다른 걸 찾아봄. (짧은 걸 못 잦음)</p>
<h2 id="2-otg-변환잭"><a class="header" href="#2-otg-변환잭">2 OTG 변환잭</a></h2>
<p>https://www.coupang.com/vp/products/7345042735?itemId=18887847704</p>
<p><img src="hobby/piano/img/20241220221328.png" alt="" /></p>
<p>음.. 웬지 믿음이 안 감.</p>
<h2 id="3-미디-연결-케이블"><a class="header" href="#3-미디-연결-케이블">3. 미디 연결 케이블</a></h2>
<p>https://www.coupang.com/vp/products/5320283335?itemId=7736124268</p>
<p><img src="hobby/piano/img/20241220221338.png" alt="" /></p>
<p>이 제품으로 구입했음.</p>
<p>이렇게 되면 keylab 61의 usb 포트에서 PC가 아닌 이 장비로 연결해야 하기 때문에 전원 공급을 신경써야 함. 이 장비에 충전 포트가 있는데 전원이 아이패드로만 갈지 아니면 keylab 61로도 전달될지 궁금. 만약 keylab 61로 전원 공급이 안되면 별도의 아답터(<a href="hobby/piano/:/32e2b1cbcca1415fbd1ded323f844b3d">전원 공급</a>) 를 써야 함.</p>
<h3 id="2024-11-18월"><a class="header" href="#2024-11-18월">2024. 11. 18.(월)</a></h3>
<p>택배 도착함.</p>
<p><img src="hobby/piano/img/20241220221347.png" alt="" /></p>
<p><img src="hobby/piano/img/20241220221358.png" alt="" /></p>
<p><img src="hobby/piano/img/20241220221406.png" alt="" /></p>
<p>저 사진과 다른 게 옴. 약간만 다르고 기본적인 건 다 똑같다.</p>
<p>충전하는 포트는 8핀이다.</p>
<p>keylab 61 usb 포트에 꽂은 케이블을 왼쪽 usb 포트에 연결하니 바로 keylab 61에 전원이 공급된다. 아이패드의 전원을 쓰는 거다. 헐.</p>
<p>오른쪽 충전포트에도 8핀 꽂았더니 아이패드 바로 충전된다. 와우.</p>
<p>그런데 내 충전기가 약한 건지 충전 중인데도 피아노를 계속 치고 있으면 아이패드 배터리 잔량이 내려가고 피아노 안 치고 그냥 그대로 놔두고 있으면 배터리 잔량이 올라간다.</p>
<p>잘된다.
latency도 거의 느껴지지 않는다.</p>
<p>keylab 61 버튼 몇개가 KORG module과 연결된다.</p>
<p>처음엔 velocity 강약을 맞추기가 어려웠는데, KORG module의 velocity curve를 light로 고치니 손에 딱 맞는다.
기본인 velocity curve: normal인 상태일 때는 썌게 쳐야 소리가 크게 나고 약하게 치면 소리가 아예 안 났는데 light 로 고치니 어느 정도 약하게 치면 어느 정도 누른 상태로 약하게 인식하고 쎄게 치면 쎄게 인식해서 딱 좋다.</p>
<p>아답터 안 사도 되서 좋다.</p>
<h4 id="manual"><a class="header" href="#manual">manual</a></h4>
<p><img src="hobby/piano/img/20241220221418.png" alt="" /><br />
<img src="hobby/piano/img/20241220221424.png" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="전원-공급"><a class="header" href="#전원-공급">전원 공급</a></h1>
<p>arturia KeyLab 61 Essential의 전원 공급 방법은 2가지임.</p>
<h2 id="1-usb를-통한-전원공급"><a class="header" href="#1-usb를-통한-전원공급">1. USB를 통한 전원공급</a></h2>
<p>PC와 USB(B타입)로 연결하면 자동으로 전원이 공급됨.</p>
<h2 id="2-dc-아답터-이용"><a class="header" href="#2-dc-아답터-이용">2. DC 아답터 이용</a></h2>
<p>매뉴얼에 9V 0.5A를 연결하라고 되어 있음.
안쪽이 플러스 바깥쪽이 마이너스임.
크기는 명시 안되어 있음.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="매뉴얼-1"><a class="header" href="#매뉴얼-1">매뉴얼</a></h1>
<p>https://downloads.arturia.com/products/keylab-essential-49/manual/keylab-essential_Manual_1_0_0_EN.pdf</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="디자인"><a class="header" href="#디자인">디자인</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="글꼴"><a class="header" href="#글꼴">글꼴</a></h1>
<h2 id="무료-글꼴-주는-곳"><a class="header" href="#무료-글꼴-주는-곳">무료 글꼴 주는 곳</a></h2>
<h3 id="상상토끼-글꼴"><a class="header" href="#상상토끼-글꼴">상상토끼 글꼴</a></h3>
<p>https://sangsangfont.com/21</p>
<h3 id="윤디자인-나눔-라이선스"><a class="header" href="#윤디자인-나눔-라이선스">윤디자인 나눔 라이선스</a></h3>
<p>https://font.co.kr/collection/detail?pd_idx=10339</p>
<p><img src="design/font/../../../../img/20241226205347.png" alt="" /></p>
<h2 id="캘리그라피용-글꼴"><a class="header" href="#캘리그라피용-글꼴">캘리그라피용 글꼴</a></h2>
<h3 id="상상토끼-바위체"><a class="header" href="#상상토끼-바위체">상상토끼 바위체</a></h3>
<p>https://sangsangfont.com/21/?idx=122</p>
<p><img src="design/font/../../../../img/20241226201251.png" alt="" /></p>
<h3 id="상상토끼-신과장"><a class="header" href="#상상토끼-신과장">상상토끼 신과장</a></h3>
<p>https://sangsangfont.com/21/?idx=102</p>
<p><img src="design/font/../../../../img/20241226201400.png" alt="" /></p>
<h3 id="더페이스샵-잉크립퀴드"><a class="header" href="#더페이스샵-잉크립퀴드">더페이스샵 잉크립퀴드</a></h3>
<p>https://www.thefaceshop.com/brand/introduction/brand.jsp?tab_seq=1</p>
<p><img src="design/font/../../../../img/20241226201711.png" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="vector-graphics"><a class="header" href="#vector-graphics">vector graphics</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ai-파일로-저장하기"><a class="header" href="#ai-파일로-저장하기">.AI 파일로 저장하기</a></h1>
<h2 id="affinity"><a class="header" href="#affinity">affinity</a></h2>
<p>url: https://affinity.serif.com
affinity Designer가 .ai로 저장할 수 <strong>있었던</strong> 거 같다.</p>
<p>sobi@g로 체험판을 신청해 사용해 봄.
https://store.serif.com/en-us/account/downloads</p>
<p>직접 사용해 보니 .ai로는 export 할 수 없었음.<br />
지금 블랙프라이데이 50% 할인 기간이지만 사용하지 않겠음.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="assets"><a class="header" href="#assets">Assets</a></h1>
<h2 id="아이콘"><a class="header" href="#아이콘">아이콘</a></h2>
<p>아이콘 몬스터 <a href="https://iconmonstr.com/" title="" target="_blank">https://iconmonstr.com</a>
excalidraw : 프로그램 내에서 제공해 주는 아이콘 많음</p>
<h2 id="3d"><a class="header" href="#3d">3D</a></h2>
<h3 id="models"><a class="header" href="#models">models</a></h3>
<ul>
<li><a href="https://nasa3d.arc.nasa.gov/models" title="" target="_blank">나사에서 제공하는 3D 모델들. 우주, 인공위성 등 매우 많음</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="blender"><a class="header" href="#blender">blender</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="toon-shader"><a class="header" href="#toon-shader">toon shader</a></h1>
<h2 id="shader"><a class="header" href="#shader">shader</a></h2>
<p><img src="design/blender/img/20250424001838.png" alt="" /></p>
<h2 id="그림자-연하게-하기"><a class="header" href="#그림자-연하게-하기">그림자 연하게 하기</a></h2>
<h3 id="w1-world-조정"><a class="header" href="#w1-world-조정">w1: world 조정</a></h3>
<p><img src="design/blender/img/20250423232946.png" alt="" /></p>
<ol>
<li>light를 sun으로 바꾸고 각도를 0도로 해서 fall off가 되지 않도록 한다.</li>
<li>light의 세기를 5 정도로 작게 한다. world의 밝기에 따라 조정한다.</li>
<li>world를 밝게 한다. 그림자가 연해진다.</li>
</ol>
<h3 id="w2-바닥의-재질을-color-ramp로-해서"><a class="header" href="#w2-바닥의-재질을-color-ramp로-해서">w2: 바닥의 재질을 color ramp로 해서</a></h3>
<p><img src="design/blender/img/20250423234214.png" alt="" /></p>
<p>plane위에 그림자 부분이 그려지는 것도 material의 영향을 받는다.</p>
<p><img src="design/blender/img/20250423234344.png" alt="" /></p>
<p>위와 같이 plane의 material을 color ramp로 잡아주면 바닥 전체는 가장 밝은 색으로 표현되고(world를 밝게 설정해서 전반적으로 밝으니까), 그림자 부분은 중간에 있는 색으로 표현된다.</p>
<h2 id="blender-42-그림자-fall-off-아예-없애기eevee"><a class="header" href="#blender-42-그림자-fall-off-아예-없애기eevee">blender 4.2 그림자 fall off 아예 없애기(EEVEE)</a></h2>
<p><img src="design/blender/img/20250424000943.png" alt="" /></p>
<p>rays값과 steps값을 모두 1로 하면 sun의 angle값과 상관없이 fall off를 없앨 수 있다.</p>
<h2 id="테두리-선그리기"><a class="header" href="#테두리-선그리기">테두리 선그리기</a></h2>
<p>테두리 선은 기본적으로 grease pencil로 그린다.</p>
<ol>
<li>
<p>같은 선으로 그릴 객체들을 같은 collection으로 묶는다.</p>
</li>
<li>
<p>grease pencil을 추가(Shift + A, Grease Pencil &gt; Blank)하고 별도의 collection으로 묶는다.</p>
</li>
</ol>
<p>여기까지 하면</p>
<p><img src="design/blender/img/20250424003029.png" alt="" /></p>
<ol start="3">
<li>GPencil에 <code>Line Art</code> Modifier를 추가하고 아래와 같이 설정한다.</li>
</ol>
<p><img src="design/blender/img/20250424003519.png" alt="" /></p>
<ol start="4">
<li>오른쪽 오브젝트인 sphere를 보면 선이 삐뚤빼뚤 그려졌는데 실제로는 카메라로 보면 이 선은 그려지지 않는다. 하지만 만약 다른 오브제트에서 이렇게 선이 그려지는 문제를 해결하려면 <code>subdivision surface</code> modifier를 추가해준다.</li>
</ol>
<p>특이하게도 edit 모드에 있는 오브젝트는 render 했을 때 선이 그려지지 않는다.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="davinci-resolve"><a class="header" href="#davinci-resolve">davinci resolve</a></h1>
<p>다빈치리졸브가  프로젝트 관리자까지만 오면 멈춰버린다.</p>
<p><img src="davinciresolve/img/20250623232229.png" alt="" /></p>
<p>이렇게 응답없음이 된다.</p>
<p>찾아보니 가상데스크톱이 있으면 이렇게 된다고 한다. 그래서 가상데스크톱 하나를 지웠는데 문제가 계속 되었다.</p>
<p>원인은 파이썬 버전때문이었다.</p>
<p>다빈치리졸브 20은 파이썬 3.12까지 지원한다.</p>
<p>최근에 파이썬 3.13을 설치한 게 문제였던 거 .</p>
<p>파이썬을 지우거나 할 필요없이</p>
<p><img src="davinciresolve/img/20250623232558.png" alt="" /></p>
<p>시스템 환경변수에 <code>PYTHONHOME</code>을 새로 추가하고 파이썬 3.12 의 위치로 설정해주면 바로 해결된다. 이런게 문제였다니.</p>
<p><img src="davinciresolve/img/20250623232453.png" alt="" /></p>
<p>이 문제는 `PYTHONHOME의 값을 다시 파이썬 3.13버전의 위치로 설정해주면 바로 다시 나타난다.</p>
<p>파이썬 버전만 맞춰놓으면 가상데스크톱을 켜 놓아도 잘 된다.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="inkscape"><a class="header" href="#inkscape">inkscape</a></h1>
<h2 id="export-하면-dpi가-이상하게-설정되는-거-없애기"><a class="header" href="#export-하면-dpi가-이상하게-설정되는-거-없애기">export 하면 dpi가 이상하게 설정되는 거 없애기</a></h2>
<p><img src="design/img/20250530134150.png" alt="" /></p>
<p>이렇게 하면 dpi 상관없이 파워포인트에 이미지 크기대로 이미지가 삽입된다.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="indesign"><a class="header" href="#indesign">inDesign</a></h1>
<p>libre office에서 만든 문서를 inDesign에서 가져오기 하면 가져오기 에러가 나는 이유: libre office에서 이미지에 투명도를 설정해 줬기 때문.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="어휘"><a class="header" href="#어휘">어휘</a></h1>
<p>나는 어휘력이, 문해력이 높은 편일까?</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="여기서-장사하면-안된다-여기서-장사하면-안-된다-의-차이"><a class="header" href="#여기서-장사하면-안된다-여기서-장사하면-안-된다-의-차이">여기서 장사하면 안된다 여기서 장사하면 안 된다 의 차이</a></h1>
<ul>
<li>여기서 장사하면 안된다: 잘되다의 부정형. 여기서 장사하면 돈을 많이 못 번다는 뜻이다.</li>
<li>여기서 장사하면 안 된다: 경고의 뜻으로, 이 곳은 물건을 팔면 안 되는 곳으라는 뜻.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="생산성"><a class="header" href="#생산성">생산성</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="kwl-전략"><a class="header" href="#kwl-전략">KWL 전략</a></h1>
<p>KWL 전략은 책을 읽을 때 사용하는 전략이다.</p>
<ul>
<li>K: Know. 이 책을 읽기 전에 이미 알고 있었던 것</li>
<li>W: Want to know. 이 책을 읽는 목적. 알고 싶은 것</li>
<li>L: Learned. 이 책을 읽어서 알게 된 것.</li>
</ul>
<p>이것들을 만들어 기록해 놓거나 혹은 책 첫 번째장에 포스트잇으로 만들어 붙여놓는 거다. 그럼 나중에 그 책을 열어보기만 해도 이 책을 읽은 직후의 느낌을 되살려 볼 수 있다.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="diy"><a class="header" href="#diy">DIY</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="승화전사-프린터"><a class="header" href="#승화전사-프린터">승화전사 프린터</a></h1>
<h2 id="승화전사-인쇄-가능한-프린터"><a class="header" href="#승화전사-인쇄-가능한-프린터">승화전사 인쇄 가능한 프린터</a></h2>
<p><a href="https://www.slrclub.com/bbs/vx2.php?id=pr&no=84963" title="" target="_blank">https://www.slrclub.com/bbs/vx2.php?id=pr&amp;no=84963</a></p>
<p>호환 프린터 A4프린터 엡손L300,L310.L355,L365,L455,L555,L565,L655</p>
<p><img src="diy/img/20250505234549.png" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="공주"><a class="header" href="#공주">공주</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="식당"><a class="header" href="#식당">식당</a></h1>
<h3 id="명륜진사갈비-공주-신관점"><a class="header" href="#명륜진사갈비-공주-신관점">명륜진사갈비 공주 신관점</a></h3>
<p>1인가능. 단 2인분 요금 내야 함.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
